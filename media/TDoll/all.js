/*!
 * pixi.js - v4.8.9
 * Compiled Thu, 16 Jan 2020 21:43:15 UTC
 *
 * pixi.js is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */!function(r){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=r();else if("function"==typeof define&&define.amd)define([],r);else{var t;t="undefined"==typeof window?"undefined"==typeof global?"undefined"==typeof self?this:self:global:window,t.PIXI=r()}}(function(){var e=Number.isInteger,r=Math.sign,l=Math.round,T=Math.atan2,C=Math.ceil,z=Math.sqrt,q=Math.sin,K=Math.cos,Z=Math.PI,J=Math.floor,Q=Math.min,$=String.fromCharCode,ee=Math.abs,te=Math.max,re;return function(){function d(p,e,t){function n(o,i){if(!e[o]){if(!p[o]){var a="function"==typeof require&&require;if(!i&&a)return a(o,!0);if(r)return r(o,!0);var s=new Error("Cannot find module '"+o+"'");throw s.code="MODULE_NOT_FOUND",s}var u=e[o]={exports:{}};p[o][0].call(u.exports,function(e){var t=p[o][1][e];return n(t||e)},u,u.exports,d,p,e,t)}return e[o].exports}for(var r="function"==typeof require&&require,a=0;a<t.length;a++)n(t[a]);return n}return d}()({1:[function(a,t,e){"use strict";"use restrict";function r(r){var n=32;return r&=-r,r&&n--,65535&r&&(n-=16),16711935&r&&(n-=8),252645135&r&&(n-=4),858993459&r&&(n-=2),1431655765&r&&(n-=1),n}e.INT_BITS=32,e.INT_MAX=2147483647,e.INT_MIN=-2147483648,e.sign=function(e){return(0<e)-(0>e)},e.abs=function(r){var t=r>>31;return(r^t)-t},e.min=function(r,t){return t^(r^t)&-(r<t)},e.max=function(r,t){return r^(r^t)&-(r<t)},e.isPow2=function(e){return!(e&e-1)&&e},e.log2=function(n){var a,o;return a=(65535<n)<<4,n>>>=a,o=(255<n)<<3,n>>>=o,a|=o,o=(15<n)<<2,n>>>=o,a|=o,o=(3<n)<<1,n>>>=o,(a|=o)|n>>1},e.log10=function(e){return 1e9<=e?9:1e8<=e?8:1e7<=e?7:1e6<=e?6:1e5<=e?5:1e4<=e?4:1e3<=e?3:100<=e?2:10<=e?1:0},e.popCount=function(e){return e-=1431655765&e>>>1,16843009*(252645135&(e=(858993459&e)+(858993459&e>>>2))+(e>>>4))>>>24},e.countTrailingZeros=r,e.nextPow2=function(e){return e+=0===e,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,(e|=e>>>16)+1},e.prevPow2=function(e){return e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,(e|=e>>>16)-(e>>>1)},e.parity=function(e){return e^=e>>>16,e^=e>>>8,e^=e>>>4,1&27030>>>(e&=15)};var n=Array(256);!function(a){for(var t=0;256>t;++t){var o=t,s=t,l=7;for(o>>>=1;o;o>>>=1)s<<=1,s|=1&o,--l;a[t]=255&s<<l}}(n),e.reverse=function(e){return n[255&e]<<24|n[255&e>>>8]<<16|n[255&e>>>16]<<8|n[255&e>>>24]},e.interleave2=function(r,n){return r&=65535,r=16711935&(r|r<<8),r=252645135&(r|r<<4),r=858993459&(r|r<<2),r=1431655765&(r|r<<1),n&=65535,n=16711935&(n|n<<8),n=252645135&(n|n<<4),n=858993459&(n|n<<2),n=1431655765&(n|n<<1),r|n<<1},e.deinterleave2=function(r,n){return r=1431655765&r>>>n,r=858993459&(r|r>>>1),r=252645135&(r|r>>>2),r=16711935&(r|r>>>4),(r=65535&(r|r>>>16))<<16>>16},e.interleave3=function(n,a,o){return n&=1023,n=4278190335&(n|n<<16),n=251719695&(n|n<<8),n=3272356035&(n|n<<4),n=1227133513&(n|n<<2),a&=1023,a=4278190335&(a|a<<16),a=251719695&(a|a<<8),a=3272356035&(a|a<<4),a=1227133513&(a|a<<2),n|=a<<1,o&=1023,o=4278190335&(o|o<<16),o=251719695&(o|o<<8),o=3272356035&(o|o<<4),o=1227133513&(o|o<<2),n|o<<2},e.deinterleave3=function(r,n){return r=1227133513&r>>>n,r=3272356035&(r|r>>>2),r=251719695&(r|r>>>4),r=4278190335&(r|r>>>8),(r=1023&(r|r>>>16))<<22>>22},e.nextCombination=function(n){var t=n|n-1;return t+1|(~t&-~t)-1>>>r(n)+1}},{}],2:[function(r,t){"use strict";function e(s,t,e){e=e||2;var c=t&&t.length,n=c?t[0]*e:s.length,o=I(s,0,n,e,!0),m=[];if(!o||o.next===o.prev)return m;var u,_,b,T,S,E,C;if(c&&(o=i(s,t,o,e)),s.length>80*e){u=b=s[0],_=T=s[1];for(var P=e;P<n;P+=e)S=s[P],E=s[P+1],S<u&&(u=S),E<_&&(_=E),S>b&&(b=S),E>T&&(T=E);C=te(b-u,T-_),C=0===C?0:1/C}return L(o,m,e,u,_,C),m}function I(a,t,e,r,n){var i,l;if(n===0<R(a,t,e,r))for(i=t;i<e;i+=r)l=M(i,a[i],a[i+1],l);else for(i=e-r;i>=t;i-=r)l=M(i,a[i],a[i+1],l);return l&&b(l,l.next)&&(P(l),l=l.next),l}function D(a,t){if(!a)return a;t||(t=a);var o=a,i;do if(i=!1,o.steiner||!b(o,o.next)&&0!==_(o.prev,o,o.next))o=o.next;else{if(P(o),(o=t=o.prev)===o.next)break;i=!0}while(i||o!==t);return t}function L(l,m,e,r,n,i,c){if(l){!c&&i&&k(l,r,n,i);for(var d=l,_,b;l.prev!==l.next;)if(_=l.prev,b=l.next,i?a(l,r,n,i):o(l))m.push(_.i/e),m.push(l.i/e),m.push(b.i/e),P(l),l=b.next,d=b.next;else if((l=b)===d){c?1===c?(l=s(l,m,e),L(l,m,e,r,n,i,2)):2==c&&u(l,m,e,r,n,i):L(D(l),m,e,r,n,i,1);break}}}function o(a){var t=a.prev,e=a,r=a.next;if(0<=_(t,e,r))return!1;for(var n=a.next.next;n!==a.prev;){if(m(t.x,t.y,e.x,e.y,r.x,r.y,n.x,n.y)&&0<=_(n.prev,n,n.next))return!1;n=n.next}return!0}function a(b,t,e,r){var n=b.prev,i=b,o=b.next;if(0<=_(n,i,o))return!1;for(var s=n.x<i.x?n.x<o.x?n.x:o.x:i.x<o.x?i.x:o.x,a=n.y<i.y?n.y<o.y?n.y:o.y:i.y<o.y?i.y:o.y,u=n.x>i.x?n.x>o.x?n.x:o.x:i.x>o.x?i.x:o.x,T=n.y>i.y?n.y>o.y?n.y:o.y:i.y>o.y?i.y:o.y,l=g(s,a,t,e,r),c=g(u,T,t,e,r),d=b.prevZ,v=b.nextZ;d&&d.z>=l&&v&&v.z<=c;){if(d!==b.prev&&d!==b.next&&m(n.x,n.y,i.x,i.y,o.x,o.y,d.x,d.y)&&0<=_(d.prev,d,d.next))return!1;if(d=d.prevZ,v!==b.prev&&v!==b.next&&m(n.x,n.y,i.x,i.y,o.x,o.y,v.x,v.y)&&0<=_(v.prev,v,v.next))return!1;v=v.nextZ}for(;d&&d.z>=l;){if(d!==b.prev&&d!==b.next&&m(n.x,n.y,i.x,i.y,o.x,o.y,d.x,d.y)&&0<=_(d.prev,d,d.next))return!1;d=d.prevZ}for(;v&&v.z<=c;){if(v!==b.prev&&v!==b.next&&m(n.x,n.y,i.x,i.y,o.x,o.y,v.x,v.y)&&0<=_(v.prev,v,v.next))return!1;v=v.nextZ}return!0}function s(a,s,e){var r=a;do{var l=r.prev,i=r.next.next;!b(l,i)&&T(l,r,r.next,i)&&E(l,i)&&E(i,l)&&(s.push(l.i/e),s.push(r.i/e),s.push(i.i/e),P(r),P(r.next),r=a=i),r=r.next}while(r!==a);return r}function u(o,t,e,r,n,i){var a=o;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&c(a,s)){var d=O(a,s);return a=D(a,a.next),d=D(d,d.next),L(a,t,e,r,n,i),void L(d,t,e,r,n,i)}s=s.next}a=a.next}while(a!==o)}function i(o,t,e,i){var d=[],p,c,g,m,_;for(p=0,c=t.length;p<c;p++)g=t[p]*i,m=p<c-1?t[p+1]*i:o.length,_=I(o,g,m,i,!1),_===_.next&&(_.steiner=!0),d.push(f(_));for(d.sort(n),p=0;p<d.length;p++)l(d[p],e),e=D(e,e.next);return e}function n(r,t){return r.x-t.x}function l(n,t){if(t=d(n,t)){var a=O(t,n);D(a,a.next)}}function d(p,t){var e=t,f=p.x,i=p.y,o=-1/0,g;do{if(i<=e.y&&i>=e.next.y&&e.next.y!==e.y){var _=e.x+(i-e.y)*(e.next.x-e.x)/(e.next.y-e.y);if(_<=f&&_>o){if(o=_,_===f){if(i===e.y)return e;if(i===e.next.y)return e.next}g=e.x<e.next.x?e:e.next}}e=e.next}while(e!==t);if(!g)return null;if(f===o)return g.prev;var a=g,b=g.x,l=g.y,c=1/0,T;for(e=g.next;e!==a;)f>=e.x&&e.x>=b&&f!==e.x&&m(i<l?f:o,i,b,l,i<l?o:f,i,e.x,e.y)&&((T=ee(i-e.y)/(f-e.x))<c||T===c&&e.x>g.x)&&E(e,p)&&(g=e,c=T),e=e.next;return g}function k(a,t,e,r){var n=a;do null===n.z&&(n.z=g(n.x,n.y,t,e,r)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next;while(n!==a);n.prevZ.nextZ=null,n.prevZ=null,p(n)}function p(l){var d=1,p,c,f,g,m,_,b,T;do{for(c=l,l=null,m=null,_=0;c;){for(_++,f=c,b=0,p=0;p<d&&(b++,f=f.nextZ);p++);for(T=d;0<b||0<T&&f;)0!==b&&(0===T||!f||c.z<=f.z)?(g=c,c=c.nextZ,b--):(g=f,f=f.nextZ,T--),m?m.nextZ=g:l=g,g.prevZ=m,m=g;c=f}m.nextZ=null,d*=2}while(1<_);return l}function g(a,o,s,r,n){return a=32767*(a-s)*n,o=32767*(o-r)*n,a=16711935&(a|a<<8),a=252645135&(a|a<<4),a=858993459&(a|a<<2),a=1431655765&(a|a<<1),o=16711935&(o|o<<8),o=252645135&(o|o<<4),o=858993459&(o|o<<2),o=1431655765&(o|o<<1),a|o<<1}function f(n){var t=n,a=n;do t.x<a.x&&(a=t),t=t.next;while(t!==n);return a}function m(l,t,e,r,n,i,o,s){return 0<=(n-o)*(t-s)-(l-o)*(i-s)&&0<=(l-o)*(r-s)-(e-o)*(t-s)&&0<=(e-o)*(i-s)-(n-o)*(r-s)}function c(r,t){return r.next.i!==t.i&&r.prev.i!==t.i&&!v(r,t)&&E(r,t)&&E(t,r)&&S(r,t)}function _(n,t,e){return(t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y)}function b(r,t){return r.x===t.x&&r.y===t.y}function T(a,t,e,r){return!!(b(a,t)&&b(e,r)||b(a,r)&&b(e,t))||0<_(a,t,e)!=0<_(a,t,r)&&0<_(e,r,a)!=0<_(e,r,t)}function v(n,t){var e=n;do{if(e.i!==n.i&&e.next.i!==n.i&&e.i!==t.i&&e.next.i!==t.i&&T(e,e.next,n,t))return!0;e=e.next}while(e!==n);return!1}function E(r,t){return 0>_(r.prev,r,r.next)?0<=_(r,t,r.next)&&0<=_(r,r.prev,t):0>_(r,t,r.prev)||0>_(r,r.next,t)}function S(a,t){var e=a,s=!1,l=(a.x+t.x)/2,i=(a.y+t.y)/2;do e.y>i!=e.next.y>i&&e.next.y!==e.y&&l<(e.next.x-e.x)*(i-e.y)/(e.next.y-e.y)+e.x&&(s=!s),e=e.next;while(e!==a);return s}function O(a,t){var e=new C(a.i,a.x,a.y),r=new C(t.i,t.x,t.y),n=a.next,i=t.prev;return a.next=t,t.prev=a,e.next=n,n.prev=e,r.next=e,e.prev=r,i.next=r,r.prev=i,r}function M(a,t,e,r){var n=new C(a,t,e);return r?(n.next=r.next,n.prev=r,r.next.prev=n,r.next=n):(n.prev=n,n.next=n),n}function P(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function C(n,t,e){this.i=n,this.x=t,this.y=e,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function R(a,t,e,r){for(var n=0,l=t,d=e-r;l<e;l+=r)n+=(a[d]-a[l])*(a[l+1]+a[d+1]),d=l;return n}t.exports=e,t.exports.default=e,e.deviation=function(g,t,e,r){var n=t&&t.length,i=n?t[0]*e:g.length,o=ee(R(g,0,i,e));if(n)for(var m=0,_=t.length;m<_;m++){var u=t[m]*e,b=m<_-1?t[m+1]*e:g.length;o-=ee(R(g,u,b,e))}var l=0;for(m=0;m<r.length;m+=3){var T=r[m]*e,d=r[m+1]*e,f=r[m+2]*e;l+=ee((g[T]-g[f])*(g[d+1]-g[T+1])-(g[T]-g[d])*(g[f+1]-g[T+1]))}return 0===o&&0===l?0:ee((l-o)/o)},e.flatten=function(a){for(var t=a[0][0].length,e={vertices:[],holes:[],dimensions:t},r=0,l=0;l<a.length;l++){for(var d=0;d<a[l].length;d++)for(var u=0;u<t;u++)e.vertices.push(a[l][d][u]);0<l&&(r+=a[l-1].length,e.holes.push(r))}return e}},{}],3:[function(r,t){"use strict";function d(){}function l(n,t,e){this.fn=n,this.context=t,this.once=e||!1}function e(){this._events=new d,this._eventsCount=0}var n=Object.prototype.hasOwnProperty,p="~";Object.create&&(d.prototype=Object.create(null),new d().__proto__||(p=!1)),e.prototype.eventNames=function(){var a=[],r,o;if(0===this._eventsCount)return a;for(o in r=this._events)n.call(r,o)&&a.push(p?o.slice(1):o);return Object.getOwnPropertySymbols?a.concat(Object.getOwnPropertySymbols(r)):a},e.prototype.listeners=function(a,t){var e=p?p+a:a,r=this._events[e];if(t)return!!r;if(!r)return[];if(r.fn)return[r.fn];for(var n=0,l=r.length,o=Array(l);n<l;n++)o[n]=r[n].fn;return o},e.prototype.emit=function(a,t,e,r,n,i){var o=p?p+a:a;if(!this._events[o])return!1;var s=this._events[o],l=arguments.length,c,g;if(s.fn){switch(s.once&&this.removeListener(a,s.fn,void 0,!0),l){case 1:return s.fn.call(s.context),!0;case 2:return s.fn.call(s.context,t),!0;case 3:return s.fn.call(s.context,t,e),!0;case 4:return s.fn.call(s.context,t,e,r),!0;case 5:return s.fn.call(s.context,t,e,r,n),!0;case 6:return s.fn.call(s.context,t,e,r,n,i),!0;}for(g=1,c=Array(l-1);g<l;g++)c[g-1]=arguments[g];s.fn.apply(s.context,c)}else{var m=s.length,f;for(g=0;g<m;g++)switch(s[g].once&&this.removeListener(a,s[g].fn,void 0,!0),l){case 1:s[g].fn.call(s[g].context);break;case 2:s[g].fn.call(s[g].context,t);break;case 3:s[g].fn.call(s[g].context,t,e);break;case 4:s[g].fn.call(s[g].context,t,e,r);break;default:if(!c)for(f=1,c=Array(l-1);f<l;f++)c[f-1]=arguments[f];s[g].fn.apply(s[g].context,c);}}return!0},e.prototype.on=function(a,t,e){var r=new l(t,e||this),n=p?p+a:a;return this._events[n]?this._events[n].fn?this._events[n]=[this._events[n],r]:this._events[n].push(r):(this._events[n]=r,this._eventsCount++),this},e.prototype.once=function(a,t,e){var r=new l(t,e||this,!0),n=p?p+a:a;return this._events[n]?this._events[n].fn?this._events[n]=[this._events[n],r]:this._events[n].push(r):(this._events[n]=r,this._eventsCount++),this},e.prototype.removeListener=function(n,t,e,r){var a=p?p+n:n;if(!this._events[a])return this;if(!t)return 0==--this._eventsCount?this._events=new d:delete this._events[a],this;var o=this._events[a];if(o.fn)o.fn!==t||r&&!o.once||e&&o.context!==e||(0==--this._eventsCount?this._events=new d:delete this._events[a]);else{for(var i=0,s=[],c=o.length;i<c;i++)(o[i].fn!==t||r&&!o[i].once||e&&o[i].context!==e)&&s.push(o[i]);s.length?this._events[a]=1===s.length?s[0]:s:0==--this._eventsCount?this._events=new d:delete this._events[a]}return this},e.prototype.removeAllListeners=function(r){var t;return r?(t=p?p+r:r,this._events[t]&&(0==--this._eventsCount?this._events=new d:delete this._events[t])):(this._events=new d,this._eventsCount=0),this},e.prototype.off=e.prototype.removeListener,e.prototype.addListener=e.prototype.on,e.prototype.setMaxListeners=function(){return this},e.prefixed=p,e.EventEmitter=e,void 0!==t&&(t.exports=e)},{}],4:[function(t,_){!function(t){function b(r,t){return r.test(t)}function e(m){var t=m||("undefined"==typeof navigator?"":navigator.userAgent),_=t.split("[FBAN");void 0!==_[1]&&(t=_[0]),void 0!==(_=t.split("Twitter"))[1]&&(t=_[0]);var E={apple:{phone:b(n,t)&&!b(c,t),ipod:b(o,t),tablet:!b(n,t)&&b(s,t)&&!b(c,t),device:(b(n,t)||b(o,t)||b(s,t))&&!b(c,t)},amazon:{phone:b(T,t),tablet:!b(T,t)&&b(l,t),device:b(T,t)||b(l,t)},android:{phone:!b(c,t)&&b(T,t)||!b(c,t)&&b(a,t),tablet:!b(c,t)&&!b(T,t)&&!b(a,t)&&(b(l,t)||b(u,t)),device:!b(c,t)&&(b(T,t)||b(l,t)||b(a,t)||b(u,t))},windows:{phone:b(c,t),tablet:b(d,t),device:b(c,t)||b(d,t)},other:{blackberry:b(f,t),blackberry10:b(p,t),opera:b(v,t),firefox:b(S,t),chrome:b(g,t),device:b(f,t)||b(p,t)||b(v,t)||b(S,t)||b(g,t)}};return E.any=E.apple.device||E.android.device||E.windows.device||E.other.device,E.phone=E.apple.phone||E.android.phone||E.windows.phone,E.tablet=E.apple.tablet||E.android.tablet||E.windows.tablet,E}var n=/iPhone/i,o=/iPod/i,s=/iPad/i,a=/\bAndroid(?:.+)Mobile\b/i,u=/Android/i,T=/\bAndroid(?:.+)SD4930UR\b/i,l=/\bAndroid(?:.+)(?:KF[A-Z]{2,4})\b/i,c=/Windows Phone/i,d=/\bWindows(?:.+)ARM\b/i,f=/BlackBerry/i,p=/BB10/i,v=/Opera Mini/i,g=/\b(CriOS|Chrome)(?:.+)Mobile/i,S=/\Mobile(?:.+)Firefox\b/i;void 0!==_&&_.exports&&"undefined"==typeof window?_.exports=e:void 0!==_&&_.exports&&"undefined"!=typeof window?_.exports=e():"function"==typeof re&&re.amd?re([],t.isMobile=e()):t.isMobile=e()}(this)},{}],5:[function(l,t,e){"use strict";function d(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function r(r,t){return r._head?(r._tail._next=t,t._prev=r._tail,r._tail=t):(r._head=t,r._tail=t),t._owner=r,t}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function a(a,t){for(var e=0,o;e<t.length;e++)o=t[e],o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(a,o.key,o)}return function(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t}}(),o=function(){function a(t,e,n){void 0===e&&(e=!1),d(this,a),this._fn=t,this._once=e,this._thisArg=n,this._next=this._prev=this._owner=null}return n(a,[{key:"detach",value:function(){return null!==this._owner&&(this._owner.detach(this),!0)}}]),a}(),i=function(){function e(){d(this,e),this._head=this._tail=void 0}return n(e,[{key:"handlers",value:function(){var n=!(0>=arguments.length||void 0===arguments[0])&&arguments[0],t=this._head;if(n)return!!t;for(var a=[];t;)a.push(t),t=t._next;return a}},{key:"has",value:function(e){if(!(e instanceof o))throw new Error("MiniSignal#has(): First arg must be a MiniSignalBinding object.");return e._owner===this}},{key:"dispatch",value:function(){var e=this._head;if(!e)return!1;for(;e;)e._once&&this.detach(e),e._fn.apply(e._thisArg,arguments),e=e._next;return!0}},{key:"add",value:function(n){var t=1>=arguments.length||void 0===arguments[1]?null:arguments[1];if("function"!=typeof n)throw new Error("MiniSignal#add(): First arg must be a Function.");return r(this,new o(n,!1,t))}},{key:"once",value:function(n){var t=1>=arguments.length||void 0===arguments[1]?null:arguments[1];if("function"!=typeof n)throw new Error("MiniSignal#once(): First arg must be a Function.");return r(this,new o(n,!0,t))}},{key:"detach",value:function(e){if(!(e instanceof o))throw new Error("MiniSignal#detach(): First arg must be a MiniSignalBinding object.");return e._owner===this?(e._prev&&(e._prev._next=e._next),e._next&&(e._next._prev=e._prev),e===this._head?(this._head=e._next,null===e._next&&(this._tail=null)):e===this._tail&&(this._tail=e._prev,this._tail._next=null),e._owner=null,this):this}},{key:"detachAll",value:function(){var e=this._head;if(!e)return this;for(this._head=this._tail=null;e;)e._owner=null,e=e._next;return this}}]),e}();i.MiniSignalBinding=o,e.default=i,t.exports=e.default},{}],6:[function(r,t){"use strict";function e(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var n=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var a=new String("abc");if(a[5]="de","5"===Object.getOwnPropertyNames(a)[0])return!1;for(var o={},e=0;10>e;e++)o["_"+$(e)]=e;if("0123456789"!==Object.getOwnPropertyNames(o).map(function(e){return o[e]}).join(""))return!1;var i={};return["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t"].forEach(function(e){i[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(e){return!1}}()?Object.assign:function(i){for(var t=e(i),s=1,d,u;s<arguments.length;s++){for(var p in d=Object(arguments[s]),d)a.call(d,p)&&(t[p]=d[p]);if(n){u=n(d);for(var l=0;l<u.length;l++)o.call(d,u[l])&&(t[u[l]]=d[u[l]])}}return t}},{}],7:[function(r,t){"use strict";t.exports=function(a,t){t=t||{};for(var s={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},r=s.parser[t.strictMode?"strict":"loose"].exec(a),l={},n=14;n--;)l[s.key[n]]=r[n]||"";return l[s.q.name]={},l[s.key[12]].replace(s.q.parser,function(r,t,e){t&&(l[s.q.name][t]=e)}),l}},{}],8:[function(n,t,l){(function(a){function d(a,t){for(var e=0,o=a.length-1,s;0<=o;o--)s=a[o],"."===s?a.splice(o,1):".."===s?(a.splice(o,1),e++):e&&(a.splice(o,1),e--);if(t)for(;e--;e)a.unshift("..");return a}function e(a,t){if(a.filter)return a.filter(t);for(var e=[],r=0;r<a.length;r++)t(a[r],r,a)&&e.push(a[r]);return e}var i=function(e){return /^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(e).slice(1)};l.resolve=function(){for(var t="",n=!1,l=arguments.length-1,u;-1<=l&&!n;l--){if(u=0<=l?arguments[l]:a.cwd(),"string"!=typeof u)throw new TypeError("Arguments to path.resolve must be strings");u&&(t=u+"/"+t,n="/"===u.charAt(0))}return t=d(e(t.split("/"),function(e){return!!e}),!n).join("/"),(n?"/":"")+t||"."},l.normalize=function(n){var a=l.isAbsolute(n),i="/"===r(n,-1);return n=d(e(n.split("/"),function(e){return!!e}),!a).join("/"),n||a||(n="."),n&&i&&(n+="/"),(a?"/":"")+n},l.isAbsolute=function(e){return"/"===e.charAt(0)},l.join=function(){var r=Array.prototype.slice.call(arguments,0);return l.normalize(e(r,function(e){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},l.relative=function(r,d){function p(n){for(var t=0;t<n.length&&""===n[t];t++);for(var a=n.length-1;0<=a&&""===n[a];a--);return t>a?[]:n.slice(t,a-t+1)}r=l.resolve(r).substr(1),d=l.resolve(d).substr(1);for(var n=p(r.split("/")),i=p(d.split("/")),o=Q(n.length,i.length),s=o,c=0;c<o;c++)if(n[c]!==i[c]){s=c;break}for(var f=[],c=s;c<n.length;c++)f.push("..");return f=f.concat(i.slice(s)),f.join("/")},l.sep="/",l.delimiter=":",l.dirname=function(a){var t=i(a),e=t[0],r=t[1];return e||r?(r&&(r=r.substr(0,r.length-1)),e+r):"."},l.basename=function(n,t){var e=i(n)[2];return t&&e.substr(-1*t.length)===t&&(e=e.substr(0,e.length-t.length)),e},l.extname=function(e){return i(e)[3]};var r=function(n,t,e){return n.substr(t,e)}}).call(this,n("_process"))},{_process:26}],9:[function(r,t){var a=new ArrayBuffer(0),o=function(n,t,e,r){this.gl=n,this.buffer=n.createBuffer(),this.type=t||n.ARRAY_BUFFER,this.drawType=r||n.STATIC_DRAW,this.data=a,e&&this.upload(e),this._updateID=0};o.prototype.upload=function(a,o,i){i||this.bind();var r=this.gl;a=a||this.data,o=o||0,this.data.byteLength>=a.byteLength?r.bufferSubData(this.type,o,a):r.bufferData(this.type,a,this.drawType),this.data=a},o.prototype.bind=function(){this.gl.bindBuffer(this.type,this.buffer)},o.createVertexBuffer=function(n,t,e){return new o(n,n.ARRAY_BUFFER,t,e)},o.createIndexBuffer=function(n,t,e){return new o(n,n.ELEMENT_ARRAY_BUFFER,t,e)},o.create=function(a,t,e,r){return new o(a,t,e,r)},o.prototype.destroy=function(){this.gl.deleteBuffer(this.buffer)},t.exports=o},{}],10:[function(r,t){var l=r("./GLTexture"),n=function(n,t,e){this.gl=n,this.framebuffer=n.createFramebuffer(),this.stencil=null,this.texture=null,this.width=t||100,this.height=e||100};n.prototype.enableTexture=function(r){var t=this.gl;this.texture=r||new l(t),this.texture.bind(),this.bind(),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.texture.texture,0)},n.prototype.enableStencil=function(){if(!this.stencil){var e=this.gl;this.stencil=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,this.stencil),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,this.stencil),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,this.width,this.height)}},n.prototype.clear=function(a,t,e,r){this.bind();var n=this.gl;n.clearColor(a,t,e,r),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT)},n.prototype.bind=function(){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer)},n.prototype.unbind=function(){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,null)},n.prototype.resize=function(n,t){var e=this.gl;this.width=n,this.height=t,this.texture&&this.texture.uploadData(null,n,t),this.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,this.stencil),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,n,t))},n.prototype.destroy=function(){var e=this.gl;this.texture&&this.texture.destroy(),e.deleteFramebuffer(this.framebuffer),this.gl=null,this.stencil=null,this.texture=null},n.createRGBA=function(o,t,e){var r=l.fromData(o,null,t,e);r.enableNearestScaling(),r.enableWrapClamp();var i=new n(o,t,e);return i.enableTexture(r),i.unbind(),i},n.createFloat32=function(i,t,e,r){var o=new l.fromData(i,r,t,e);o.enableNearestScaling(),o.enableWrapClamp();var s=new n(i,t,e);return s.enableTexture(o),s.unbind(),s},t.exports=n},{"./GLTexture":12}],11:[function(r,t){var l=r("./shader/compileProgram"),n=r("./shader/extractAttributes"),i=r("./shader/extractUniforms"),o=r("./shader/setPrecision"),s=r("./shader/generateUniformAccessObject"),e=function(a,t,d,p,u){this.gl=a,p&&(t=o(t,p),d=o(d,p)),this.program=l(a,t,d,u),this.attributes=n(a,this.program),this.uniformData=i(a,this.program),this.uniforms=s(a,this.uniformData)};e.prototype.bind=function(){return this.gl.useProgram(this.program),this},e.prototype.destroy=function(){this.attributes=null,this.uniformData=null,this.uniforms=null,this.gl.deleteProgram(this.program)},t.exports=e},{"./shader/compileProgram":17,"./shader/extractAttributes":19,"./shader/extractUniforms":20,"./shader/generateUniformAccessObject":21,"./shader/setPrecision":25}],12:[function(r,t){var a=function(a,t,e,r,n){this.gl=a,this.texture=a.createTexture(),this.mipmap=!1,this.premultiplyAlpha=!1,this.width=t||-1,this.height=e||-1,this.format=r||a.RGBA,this.type=n||a.UNSIGNED_BYTE};a.prototype.upload=function(a){this.bind();var t=this.gl;t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha);var e=a.videoWidth||a.width,r=a.videoHeight||a.height;r!==this.height||e!==this.width?t.texImage2D(t.TEXTURE_2D,0,this.format,this.format,this.type,a):t.texSubImage2D(t.TEXTURE_2D,0,0,0,this.format,this.type,a),this.width=e,this.height=r};var e=!1;a.prototype.uploadData=function(a,t,o){this.bind();var r=this.gl;if(a instanceof Float32Array){if(!e){if(!r.getExtension("OES_texture_float"))throw new Error("floating point textures not available");e=!0}this.type=r.FLOAT}else this.type=this.type||r.UNSIGNED_BYTE;r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),t!==this.width||o!==this.height?r.texImage2D(r.TEXTURE_2D,0,this.format,t,o,0,this.format,this.type,a||null):r.texSubImage2D(r.TEXTURE_2D,0,0,0,t,o,this.format,this.type,a||null),this.width=t,this.height=o},a.prototype.bind=function(r){var t=this.gl;void 0!==r&&t.activeTexture(t.TEXTURE0+r),t.bindTexture(t.TEXTURE_2D,this.texture)},a.prototype.unbind=function(){var e=this.gl;e.bindTexture(e.TEXTURE_2D,null)},a.prototype.minFilter=function(r){var t=this.gl;this.bind(),this.mipmap?t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,r?t.LINEAR_MIPMAP_LINEAR:t.NEAREST_MIPMAP_NEAREST):t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,r?t.LINEAR:t.NEAREST)},a.prototype.magFilter=function(r){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,r?t.LINEAR:t.NEAREST)},a.prototype.enableMipmap=function(){var e=this.gl;this.bind(),this.mipmap=!0,e.generateMipmap(e.TEXTURE_2D)},a.prototype.enableLinearScaling=function(){this.minFilter(!0),this.magFilter(!0)},a.prototype.enableNearestScaling=function(){this.minFilter(!1),this.magFilter(!1)},a.prototype.enableWrapClamp=function(){var e=this.gl;this.bind(),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)},a.prototype.enableWrapRepeat=function(){var e=this.gl;this.bind(),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT)},a.prototype.enableWrapMirrorRepeat=function(){var e=this.gl;this.bind(),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.MIRRORED_REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.MIRRORED_REPEAT)},a.prototype.destroy=function(){this.gl.deleteTexture(this.texture)},a.fromSource=function(n,t,e){var r=new a(n);return r.premultiplyAlpha=e||!1,r.upload(t),r},a.fromData=function(n,t,e,r){var i=new a(n);return i.uploadData(t,e,r),i},t.exports=a},{}],13:[function(r,t){function a(n,t){if(this.nativeVaoExtension=null,a.FORCE_NATIVE||(this.nativeVaoExtension=n.getExtension("OES_vertex_array_object")||n.getExtension("MOZ_OES_vertex_array_object")||n.getExtension("WEBKIT_OES_vertex_array_object")),this.nativeState=t,this.nativeVaoExtension){this.nativeVao=this.nativeVaoExtension.createVertexArrayOES();var e=n.getParameter(n.MAX_VERTEX_ATTRIBS);this.nativeState={tempAttribState:Array(e),attribState:Array(e)}}this.gl=n,this.attributes=[],this.indexBuffer=null,this.dirty=!1}var o=r("./setVertexAttribArrays");a.prototype.constructor=a,t.exports=a,a.FORCE_NATIVE=!1,a.prototype.bind=function(){if(this.nativeVao){if(this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.dirty)return this.dirty=!1,this.activate(),this;this.indexBuffer&&this.indexBuffer.bind()}else this.activate();return this},a.prototype.unbind=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(null),this},a.prototype.activate=function(){for(var a=this.gl,t=null,i=0,s;i<this.attributes.length;i++)s=this.attributes[i],t!==s.buffer&&(s.buffer.bind(),t=s.buffer),a.vertexAttribPointer(s.attribute.location,s.attribute.size,s.type||a.FLOAT,s.normalized||!1,s.stride||0,s.start||0);return o(a,this.attributes,this.nativeState),this.indexBuffer&&this.indexBuffer.bind(),this},a.prototype.addAttribute=function(a,t,e,r,n,i){return this.attributes.push({buffer:a,attribute:t,location:t.location,type:e||this.gl.FLOAT,normalized:r||!1,stride:n||0,start:i||0}),this.dirty=!0,this},a.prototype.addIndex=function(e){return this.indexBuffer=e,this.dirty=!0,this},a.prototype.clear=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.attributes.length=0,this.indexBuffer=null,this},a.prototype.draw=function(a,t,e){var r=this.gl;return this.indexBuffer?r.drawElements(a,t||this.indexBuffer.data.length,r.UNSIGNED_SHORT,2*(e||0)):r.drawArrays(a,e,t||this.getSize()),this},a.prototype.destroy=function(){this.gl=null,this.indexBuffer=null,this.attributes=null,this.nativeState=null,this.nativeVao&&this.nativeVaoExtension.deleteVertexArrayOES(this.nativeVao),this.nativeVaoExtension=null,this.nativeVao=null},a.prototype.getSize=function(){var e=this.attributes[0];return e.buffer.data.length/(e.stride/4||e.attribute.size)}},{"./setVertexAttribArrays":16}],14:[function(r,t){t.exports=function(n,t){var e=n.getContext("webgl",t)||n.getContext("experimental-webgl",t);if(!e)throw new Error("This browser does not support webGL. Try using the canvas renderer");return e}},{}],15:[function(r,t){var e={createContext:r("./createContext"),setVertexAttribArrays:r("./setVertexAttribArrays"),GLBuffer:r("./GLBuffer"),GLFramebuffer:r("./GLFramebuffer"),GLShader:r("./GLShader"),GLTexture:r("./GLTexture"),VertexArrayObject:r("./VertexArrayObject"),shader:r("./shader")};void 0!==t&&t.exports&&(t.exports=e),"undefined"!=typeof window&&(window.PIXI=window.PIXI||{},window.PIXI.glCore=e)},{"./GLBuffer":9,"./GLFramebuffer":10,"./GLShader":11,"./GLTexture":12,"./VertexArrayObject":13,"./createContext":14,"./setVertexAttribArrays":16,"./shader":22}],16:[function(r,t){t.exports=function(a,t,e){var r;if(e){var l=e.tempAttribState,i=e.attribState;for(r=0;r<l.length;r++)l[r]=!1;for(r=0;r<t.length;r++)l[t[r].attribute.location]=!0;for(r=0;r<i.length;r++)i[r]!==l[r]&&(i[r]=l[r],e.attribState[r]?a.enableVertexAttribArray(r):a.disableVertexAttribArray(r))}else for(r=0;r<t.length;r++){var o=t[r];a.enableVertexAttribArray(o.attribute.location)}}},{}],17:[function(r,t){var l=function(a,t,e){var r=a.createShader(t);return a.shaderSource(r,e),a.compileShader(r),a.getShaderParameter(r,a.COMPILE_STATUS)?r:(console.log(a.getShaderInfoLog(r)),null)};t.exports=function(i,t,e,r){var n=l(i,i.VERTEX_SHADER,t),o=l(i,i.FRAGMENT_SHADER,e),s=i.createProgram();if(i.attachShader(s,n),i.attachShader(s,o),r)for(var d in r)i.bindAttribLocation(s,r[d],d);return i.linkProgram(s),i.getProgramParameter(s,i.LINK_STATUS)||(console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",i.getProgramParameter(s,i.VALIDATE_STATUS)),console.error("gl.getError()",i.getError()),""!==i.getProgramInfoLog(s)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",i.getProgramInfoLog(s)),i.deleteProgram(s),s=null),i.deleteShader(n),i.deleteShader(o),s}},{}],18:[function(r,t){var n=function(n){for(var t=Array(n),e=0;e<t.length;e++)t[e]=!1;return t};t.exports=function(r,t){return"float"===r?0:"vec2"===r?new Float32Array(2*t):"vec3"===r?new Float32Array(3*t):"vec4"===r?new Float32Array(4*t):"int"===r||"sampler2D"===r?0:"ivec2"===r?new Int32Array(2*t):"ivec3"===r?new Int32Array(3*t):"ivec4"===r?new Int32Array(4*t):"bool"!=r&&("bvec2"===r?n(2*t):"bvec3"===r?n(3*t):"bvec4"===r?n(4*t):"mat2"===r?new Float32Array([1,0,0,1]):"mat3"===r?new Float32Array([1,0,0,0,1,0,0,0,1]):"mat4"===r?new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]):void 0)}},{}],19:[function(r,t){var o=r("./mapType"),n=r("./mapSize"),i=function(a,t,e,r){gl.vertexAttribPointer(this.location,this.size,a||gl.FLOAT,t||!1,e||0,r||0)};t.exports=function(s,t){for(var e={},r=s.getProgramParameter(t,s.ACTIVE_ATTRIBUTES),l=0;l<r;l++){var d=s.getActiveAttrib(t,l),u=o(s,d.type);e[d.name]={type:u,size:n(u),location:s.getAttribLocation(t,d.name),pointer:i}}return e}},{"./mapSize":23,"./mapType":24}],20:[function(r,t){var o=r("./mapType"),n=r("./defaultValue");t.exports=function(i,t){for(var e={},r=i.getProgramParameter(t,i.ACTIVE_UNIFORMS),l=0;l<r;l++){var d=i.getActiveUniform(t,l),a=d.name.replace(/\[.*?\]/,""),u=o(i,d.type);e[a]={type:u,size:d.size,location:i.getUniformLocation(t,a),value:n(u,d.size)}}return e}},{"./defaultValue":18,"./mapType":24}],21:[function(r,t){function p(i,t){return function(e){this.data[i].value=e;var r=this.data[i].location;1===t.size?o[t.type](this.gl,r,e):a[t.type](this.gl,r,e)}}function n(a,t){for(var e=t,o=0,s;o<a.length-1;o++)s=e[a[o]]||{data:{}},e[a[o]]=s,e=s;return e}var i=function(e){return function(){return this.data[e].value}},o={float:function(n,t,e){n.uniform1f(t,e)},vec2:function(n,t,e){n.uniform2f(t,e[0],e[1])},vec3:function(n,t,e){n.uniform3f(t,e[0],e[1],e[2])},vec4:function(n,t,e){n.uniform4f(t,e[0],e[1],e[2],e[3])},int:function(n,t,e){n.uniform1i(t,e)},ivec2:function(n,t,e){n.uniform2i(t,e[0],e[1])},ivec3:function(n,t,e){n.uniform3i(t,e[0],e[1],e[2])},ivec4:function(n,t,e){n.uniform4i(t,e[0],e[1],e[2],e[3])},bool:function(n,t,e){n.uniform1i(t,e)},bvec2:function(n,t,e){n.uniform2i(t,e[0],e[1])},bvec3:function(n,t,e){n.uniform3i(t,e[0],e[1],e[2])},bvec4:function(n,t,e){n.uniform4i(t,e[0],e[1],e[2],e[3])},mat2:function(n,t,e){n.uniformMatrix2fv(t,!1,e)},mat3:function(n,t,e){n.uniformMatrix3fv(t,!1,e)},mat4:function(n,t,e){n.uniformMatrix4fv(t,!1,e)},sampler2D:function(n,t,e){n.uniform1i(t,e)}},a={float:function(n,t,e){n.uniform1fv(t,e)},vec2:function(n,t,e){n.uniform2fv(t,e)},vec3:function(n,t,e){n.uniform3fv(t,e)},vec4:function(n,t,e){n.uniform4fv(t,e)},int:function(n,t,e){n.uniform1iv(t,e)},ivec2:function(n,t,e){n.uniform2iv(t,e)},ivec3:function(n,t,e){n.uniform3iv(t,e)},ivec4:function(n,t,e){n.uniform4iv(t,e)},bool:function(n,t,e){n.uniform1iv(t,e)},bvec2:function(n,t,e){n.uniform2iv(t,e)},bvec3:function(n,t,e){n.uniform3iv(t,e)},bvec4:function(n,t,e){n.uniform4iv(t,e)},sampler2D:function(n,t,e){n.uniform1iv(t,e)}};t.exports=function(s,t){for(var e={data:{},gl:s},r=Object.keys(t),o=0;o<r.length;o++){var f=r[o],u=f.split("."),g=u[u.length-1],l=n(u,e),c=t[f];l.data[g]=c,l.gl=s,Object.defineProperty(l,g,{get:i(g),set:p(g,c)})}return e}},{}],22:[function(r,t){t.exports={compileProgram:r("./compileProgram"),defaultValue:r("./defaultValue"),extractAttributes:r("./extractAttributes"),extractUniforms:r("./extractUniforms"),generateUniformAccessObject:r("./generateUniformAccessObject"),setPrecision:r("./setPrecision"),mapSize:r("./mapSize"),mapType:r("./mapType")}},{"./compileProgram":17,"./defaultValue":18,"./extractAttributes":19,"./extractUniforms":20,"./generateUniformAccessObject":21,"./mapSize":23,"./mapType":24,"./setPrecision":25}],23:[function(r,t){var e={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};t.exports=function(r){return e[r]}},{}],24:[function(r,t){var e=function(o,t){if(!a){var e=Object.keys(l);a={};for(var r=0,i;r<e.length;++r)i=e[r],a[o[i]]=l[i]}return a[t]},a=null,l={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D"};t.exports=e},{}],25:[function(r,t){t.exports=function(r,t){return"precision"===r.substring(0,9)?r:"precision "+t+" float;\n"+r}},{}],26:[function(r,t){function e(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function i(r){if(f===setTimeout)return setTimeout(r,0);if((f===e||!f)&&setTimeout)return f=setTimeout,setTimeout(r,0);try{return f(r,0)}catch(t){try{return f.call(null,r,0)}catch(t){return f.call(this,r,0)}}}function o(r){if(_===clearTimeout)return clearTimeout(r);if((_===n||!_)&&clearTimeout)return _=clearTimeout,clearTimeout(r);try{return _(r)}catch(t){try{return _.call(null,r)}catch(t){return _.call(this,r)}}}function s(){T&&E&&(T=!1,E.length?b=E.concat(b):S=-1,b.length&&a())}function a(){if(!T){var r=i(s);T=!0;for(var t=b.length;t;){for(E=b,b=[];++S<t;)E&&E[S].run();S=-1,t=b.length}E=null,T=!1,o(r)}}function u(r,t){this.fun=r,this.array=t}function m(){}var l=t.exports={},f,_;!function(){try{f="function"==typeof setTimeout?setTimeout:e}catch(r){f=e}try{_="function"==typeof clearTimeout?clearTimeout:n}catch(e){_=n}}();var b=[],T=!1,S=-1,E;l.nextTick=function(n){var t=Array(arguments.length-1);if(1<arguments.length)for(var e=1;e<arguments.length;e++)t[e-1]=arguments[e];b.push(new u(n,t)),1!==b.length||T||i(a)},u.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={},l.on=m,l.addListener=m,l.once=m,l.off=m,l.removeListener=m,l.removeAllListeners=m,l.emit=m,l.prependListener=m,l.prependOnceListener=m,l.listeners=function(){return[]},l.binding=function(){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},{}],27:[function(t,g,r){(function(t){!function(e){function A(e){throw new RangeError(M[e])}function o(a,t){for(var e=a.length,o=[];e--;)o[e]=t(a[e]);return o}function n(a,i){var e=a.split("@"),r="";return 1<e.length&&(r=e[0]+"@",a=e[1]),a=a.replace(_,"."),r+o(a.split("."),i).join(".")}function s(a){for(var t=[],n=0,s=a.length,o,l;n<s;)o=a.charCodeAt(n++),55296<=o&&56319>=o&&n<s?(l=a.charCodeAt(n++),56320==(64512&l)?t.push(((1023&o)<<10)+(1023&l)+65536):(t.push(o),n--)):t.push(o);return t}function I(e){return o(e,function(r){var n="";return 65535<r&&(r-=65536,n+=D(55296|1023&r>>>10),r=56320|1023&r),n+=D(r)}).join("")}function v(e){return 10>e-48?e-22:26>e-65?e-65:26>e-97?e-97:T}function a(r,t){return r+22+75*(26>r)-((0!=t)<<5)}function F(a,o,e){var r=0;for(a=e?O(a/m):a>>1,a+=O(a/o);a>R*E>>1;r+=T)a=O(a/R);return O(r+(R+1)*a/(a+f))}function l(o){var t=[],l=o.length,d=0,g=P,b=S,M,R,D,L,k,B,N,W,G,Y;for(R=o.lastIndexOf(C),0>R&&(R=0),D=0;D<R;++D)128<=o.charCodeAt(D)&&A("not-basic"),t.push(o.charCodeAt(D));for(L=0<R?R+1:0;L<l;){for(k=d,B=1,N=T;L>=l&&A("invalid-input"),W=v(o.charCodeAt(L++)),(W>=T||W>O((U-d)/B))&&A("overflow"),d+=W*B,G=N<=b?X:N>=b+E?E:N-b,!(W<G);N+=T)Y=T-G,B>O(U/Y)&&A("overflow"),B*=Y;M=t.length+1,b=F(d-k,M,0==k),O(d/M)>U-g&&A("overflow"),g+=O(d/M),d%=M,t.splice(d++,0,g)}return I(t)}function d(o){var d=[],u,c,b,M,R,I,L,k,B,N,W,G,Y,V,H;for(o=s(o),G=o.length,u=P,c=0,R=S,I=0;I<G;++I)128>(W=o[I])&&d.push(D(W));for(b=M=d.length,M&&d.push(C);b<G;){for(L=U,I=0;I<G;++I)(W=o[I])>=u&&W<L&&(L=W);for(Y=b+1,L-u>O((U-c)/Y)&&A("overflow"),c+=(L-u)*Y,u=L,I=0;I<G;++I)if(W=o[I],W<u&&++c>U&&A("overflow"),W==u){for(k=c,B=T;N=B<=R?X:B>=R+E?E:B-R,!(k<N);B+=T)H=k-N,V=T-N,d.push(D(a(N+H%V,0))),k=O(H/V);d.push(D(a(k,0))),R=F(c,Y,b==M),c=0,++b}++c,++u}return d.join("")}var u="object"==typeof r&&r&&!r.nodeType&&r,p="object"==typeof g&&g&&!g.nodeType&&g,c="object"==typeof t&&t;c.global!==c&&c.window!==c&&c.self!==c||(e=c);var U=2147483647,T=36,X=1,E=26,f=38,m=700,S=72,P=128,C="-",_=/[\x2E\u3002\uFF0E\uFF61]/g,M={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},R=35,O=J,D=$,L,k;if(L={version:"1.4.1",ucs2:{decode:s,encode:I},decode:l,encode:d,toASCII:function(e){return n(e,function(e){return /[^\x20-\x7E]/.test(e)?"xn--"+d(e):e})},toUnicode:function(e){return n(e,function(e){return /^xn--/.test(e)?l(e.slice(4).toLowerCase()):e})}},"function"==typeof re&&"object"==typeof re.amd&&re.amd)re("punycode",function(){return L});else if(!(u&&p))e.punycode=L;else if(g.exports==u)p.exports=L;else for(k in L)L.hasOwnProperty(k)&&(u[k]=L[k])}(this)}).call(this,"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{}],28:[function(r,t){"use strict";function e(r,t){return Object.prototype.hasOwnProperty.call(r,t)}t.exports=function(a,i,m,_){i=i||"&",m=m||"=";var o={};if("string"!=typeof a||0===a.length)return o;a=a.split(i);var s=1e3;_&&"number"==typeof _.maxKeys&&(s=_.maxKeys);var b=a.length;0<s&&b>s&&(b=s);for(var T=0;T<b;++T){var S=a[T].replace(/\+/g,"%20"),v=S.indexOf(m),g,E,C,P;0<=v?(g=S.substr(0,v),E=S.substr(v+1)):(g=S,E=""),C=decodeURIComponent(g),P=decodeURIComponent(E),e(o,C)?n(o[C])?o[C].push(P):o[C]=[o[C],P]:o[C]=P}return o};var n=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{}],29:[function(r,t){"use strict";function l(a,t){if(a.map)return a.map(t);for(var e=[],r=0;r<a.length;r++)e.push(t(a[r],r));return e}var n=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return"";}};t.exports=function(d,u,p,s){return u=u||"&",p=p||"=",null===d&&(d=void 0),"object"==typeof d?l(o(d),function(e){var r=encodeURIComponent(n(e))+p;return i(d[e])?l(d[e],function(e){return r+encodeURIComponent(n(e))}).join(u):r+encodeURIComponent(n(d[e]))}).join(u):s?encodeURIComponent(n(s))+p+encodeURIComponent(n(d)):""};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},o=Object.keys||function(n){var t=[];for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&t.push(e);return t}},{}],30:[function(n,t,e){"use strict";e.decode=e.parse=n("./decode"),e.encode=e.stringify=n("./encode")},{"./decode":28,"./encode":29}],31:[function(r,t){"use strict";t.exports=function(a,t,e){var s=a.length,i;if(!(t>=s||0===e)){e=t+e>s?s-t:e;var l=s-e;for(i=t;i<l;++i)a[i]=a[i+e];a.length=l}}},{}],32:[function(p,t,e){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function g(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0,e.Loader=void 0;var m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=function(){function a(a,t){for(var e=0,o;e<t.length;e++)o=t[e],o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(a,o.key,o)}return function(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t}}(),o=p("mini-signals"),a=r(o),i=p("parse-uri"),s=r(i),l=p("./async"),u=function(n){if(n&&n.__esModule)return n;var t={};if(null!=n)for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t.default=n,t}(l),d=p("./Resource"),c=e.Loader=function(){function i(){var l=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:10;g(this,i),this.baseUrl=e,this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(e,t){return l._loadResource(e,t)},this._queue=u.queue(this._boundLoadResource,t),this._queue.pause(),this.resources={},this.onProgress=new a.default,this.onError=new a.default,this.onLoad=new a.default,this.onStart=new a.default,this.onComplete=new a.default;for(var r=0;r<i._defaultBeforeMiddleware.length;++r)this.pre(i._defaultBeforeMiddleware[r]);for(var n=0;n<i._defaultAfterMiddleware.length;++n)this.use(i._defaultAfterMiddleware[n])}return i.prototype.add=function(o,p,f,g){if(Array.isArray(o)){for(var _=0;_<o.length;++_)this.add(o[_]);return this}if("object"===(void 0===o?"undefined":m(o))&&(g=p||o.callback||o.onComplete,f=o,p=o.url,o=o.name||o.key||o.url),"string"!=typeof p&&(g=f,f=p,p=o),"string"!=typeof p)throw new Error("No url passed to add resource to loader.");if("function"==typeof f&&(g=f,f=null),this.loading&&(!f||!f.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[o])throw new Error("Resource named \""+o+"\" already exists.");if(p=this._prepareUrl(p),this.resources[o]=new d.Resource(o,p,f),"function"==typeof g&&this.resources[o].onAfterMiddleware.once(g),this.loading){for(var b=f.parentResource,s=[],a=0;a<b.children.length;++a)b.children[a].isComplete||s.push(b.children[a]);var T=b.progressChunk*(s.length+1),v=T/(s.length+2);b.children.push(this.resources[o]),b.progressChunk=v;for(var l=0;l<s.length;++l)s[l].progressChunk=v;this.resources[o].progressChunk=v}return this._queue.push(this.resources[o]),this},i.prototype.pre=function(e){return this._beforeMiddleware.push(e),this},i.prototype.use=function(e){return this._afterMiddleware.push(e),this},i.prototype.reset=function(){for(var r in this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause(),this.resources){var t=this.resources[r];t._onLoadBinding&&t._onLoadBinding.detach(),t.isLoading&&t.abort()}return this.resources={},this},i.prototype.load=function(r){if("function"==typeof r&&this.onComplete.once(r),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var t=this._queue._tasks.length,e=0;e<this._queue._tasks.length;++e)this._queue._tasks[e].data.progressChunk=100/t;this._onStart(),this._queue.resume()}return this},i.prototype._prepareUrl=function(a){var t=(0,s.default)(a,{strictMode:!0}),e;if(e=t.protocol||!t.path||0===a.indexOf("//")?a:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==a.charAt(0)?this.baseUrl+"/"+a:this.baseUrl+a,this.defaultQueryString){var o=/(#[\w-]+)?$/.exec(e)[0];e=e.substr(0,e.length-o.length),e+=-1===e.indexOf("?")?"?"+this.defaultQueryString:"&"+this.defaultQueryString,e+=o}return e},i.prototype._loadResource=function(a,t){var o=this;a._dequeue=t,u.eachSeries(this._beforeMiddleware,function(t,e){t.call(o,a,function(){e(a.isComplete?{}:null)})},function(){a.isComplete?o._onLoad(a):(a._onLoadBinding=a.onComplete.once(o._onLoad,o),a.load())},!0)},i.prototype._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},i.prototype._onComplete=function(){this.progress=100,this.loading=!1,this.onComplete.dispatch(this,this.resources)},i.prototype._onLoad=function(a){var t=this;a._onLoadBinding=null,this._resourcesParsing.push(a),a._dequeue(),u.eachSeries(this._afterMiddleware,function(e,r){e.call(t,a,r)},function(){a.onAfterMiddleware.dispatch(a),t.progress=Q(100,t.progress+a.progressChunk),t.onProgress.dispatch(t,a),a.error?t.onError.dispatch(a.error,t,a):t.onLoad.dispatch(t,a),t._resourcesParsing.splice(t._resourcesParsing.indexOf(a),1),t._queue.idle()&&0===t._resourcesParsing.length&&t._onComplete()},!0)},n(i,[{key:"concurrency",get:function(){return this._queue.concurrency},set:function(e){this._queue.concurrency=e}}]),i}();c._defaultBeforeMiddleware=[],c._defaultAfterMiddleware=[],c.pre=function(e){return c._defaultBeforeMiddleware.push(e),c},c.use=function(e){return c._defaultAfterMiddleware.push(e),c}},{"./Resource":33,"./async":34,"mini-signals":5,"parse-uri":7}],33:[function(g,t,e){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function m(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function i(){}function n(n,t,a){t&&0===t.indexOf(".")&&(t=t.substring(1)),t&&(n[t]=a)}function o(e){return e.toString().replace("object ","")}e.__esModule=!0,e.Resource=void 0;var a=function(){function a(a,t){for(var e=0,o;e<t.length;e++)o=t[e],o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(a,o.key,o)}return function(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t}}(),s=g("parse-uri"),u=r(s),l=g("mini-signals"),c=r(l),d=window.XDomainRequest&&!("withCredentials"in new XMLHttpRequest),f=null,_=e.Resource=function(){function s(t,e,r){if(m(this,s),"string"!=typeof t||"string"!=typeof e)throw new Error("Both name and url are required for constructing a resource.");r=r||{},this._flags=0,this._setFlag(s.STATUS_FLAGS.DATA_URL,0===e.indexOf("data:")),this.name=t,this.url=e,this.extension=this._getExtension(),this.data=null,this.crossOrigin=!0===r.crossOrigin?"anonymous":r.crossOrigin,this.timeout=r.timeout||0,this.loadType=r.loadType||this._determineLoadType(),this.xhrType=r.xhrType,this.metadata=r.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=s.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=i,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new c.default,this.onProgress=new c.default,this.onComplete=new c.default,this.onAfterMiddleware=new c.default}return s.setExtensionLoadType=function(t,e){n(s._loadTypeMap,t,e)},s.setExtensionXhrType=function(t,e){n(s._xhrTypeMap,t,e)},s.prototype.complete=function(){this._clearEvents(),this._finish()},s.prototype.abort=function(t){if(!this.error){if(this.error=new Error(t),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=s.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},s.prototype.load=function(t){var e=this;if(!this.isLoading){if(this.isComplete)return void(t&&setTimeout(function(){return t(e)},1));switch(t&&this.onComplete.once(t),this._setFlag(s.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),!1!==this.crossOrigin&&"string"==typeof this.crossOrigin||(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case s.LOAD_TYPE.IMAGE:this.type=s.TYPE.IMAGE,this._loadElement("image");break;case s.LOAD_TYPE.AUDIO:this.type=s.TYPE.AUDIO,this._loadSourceElement("audio");break;case s.LOAD_TYPE.VIDEO:this.type=s.TYPE.VIDEO,this._loadSourceElement("video");break;case s.LOAD_TYPE.XHR:default:d&&this.crossOrigin?this._loadXdr():this._loadXhr();}}},s.prototype._hasFlag=function(e){return 0!=(this._flags&e)},s.prototype._setFlag=function(r,t){this._flags=t?this._flags|r:this._flags&~r},s.prototype._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},s.prototype._finish=function(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(s.STATUS_FLAGS.COMPLETE,!0),this._setFlag(s.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},s.prototype._loadElement=function(e){this.data=this.metadata.loadElement?this.metadata.loadElement:"image"===e&&void 0!==window.Image?new Image:document.createElement(e),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},s.prototype._loadSourceElement=function(a){if(this.data=this.metadata.loadElement?this.metadata.loadElement:"audio"===a&&void 0!==window.Audio?new Audio:document.createElement(a),null===this.data)return void this.abort("Unsupported element: "+a);if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var t=this.metadata.mimeType,e=0;e<this.url.length;++e)this.data.appendChild(this._createSource(a,this.url[e],Array.isArray(t)?t[e]:t));else{var o=this.metadata.mimeType;this.data.appendChild(this._createSource(a,this.url,Array.isArray(o)?o[0]:o))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},s.prototype._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XMLHttpRequest;t.open("GET",this.url,!0),t.timeout=this.timeout,t.responseType=this.xhrType===s.XHR_RESPONSE_TYPE.JSON||this.xhrType===s.XHR_RESPONSE_TYPE.DOCUMENT?s.XHR_RESPONSE_TYPE.TEXT:this.xhrType,t.addEventListener("error",this._boundXhrOnError,!1),t.addEventListener("timeout",this._boundXhrOnTimeout,!1),t.addEventListener("abort",this._boundXhrOnAbort,!1),t.addEventListener("progress",this._boundOnProgress,!1),t.addEventListener("load",this._boundXhrOnLoad,!1),t.send()},s.prototype._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var e=this.xhr=new XDomainRequest;e.timeout=this.timeout||5e3,e.onerror=this._boundXhrOnError,e.ontimeout=this._boundXhrOnTimeout,e.onprogress=this._boundOnProgress,e.onload=this._boundXhrOnLoad,e.open("GET",this.url,!0),setTimeout(function(){return e.send()},1)},s.prototype._createSource=function(a,t,e){e||(e=a+"/"+this._getExtension(t));var o=document.createElement("source");return o.src=t,o.type=e,o},s.prototype._onError=function(e){this.abort("Failed to load element using: "+e.target.nodeName)},s.prototype._onProgress=function(e){e&&e.lengthComputable&&this.onProgress.dispatch(this,e.loaded/e.total)},s.prototype._onTimeout=function(){this.abort("Load timed out.")},s.prototype._xhrOnError=function(){var e=this.xhr;this.abort(o(e)+" Request failed. Status: "+e.status+", text: \""+e.statusText+"\"")},s.prototype._xhrOnTimeout=function(){var e=this.xhr;this.abort(o(e)+" Request timed out.")},s.prototype._xhrOnAbort=function(){var e=this.xhr;this.abort(o(e)+" Request was aborted by the user.")},s.prototype._xhrOnLoad=function(){var t=this.xhr,e="",a=void 0===t.status?200:t.status;if(""!==t.responseType&&"text"!==t.responseType&&void 0!==t.responseType||(e=t.responseText),0===a&&(0<e.length||t.responseType===s.XHR_RESPONSE_TYPE.BUFFER)?a=200:1223==a&&(a=204),2!=(0|a/100))return void this.abort("["+t.status+"] "+t.statusText+": "+t.responseURL);if(this.xhrType===s.XHR_RESPONSE_TYPE.TEXT)this.data=e,this.type=s.TYPE.TEXT;else if(this.xhrType===s.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(e),this.type=s.TYPE.JSON}catch(e){return void this.abort("Error trying to parse loaded json: "+e)}else if(this.xhrType===s.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser){var l=new DOMParser;this.data=l.parseFromString(e,"text/xml")}else{var i=document.createElement("div");i.innerHTML=e,this.data=i}this.type=s.TYPE.XML}catch(e){return void this.abort("Error trying to parse loaded xml: "+e)}else this.data=t.response||e;this.complete()},s.prototype._determineCrossOrigin=function(a,o){if(0===a.indexOf("data:"))return"";if(window.origin!==window.location.origin)return"anonymous";o=o||window.location,f||(f=document.createElement("a")),f.href=a,a=(0,u.default)(f.href,{strictMode:!0});var i=!a.port&&""===o.port||a.port===o.port,r=a.protocol?a.protocol+":":"";return a.host===o.hostname&&i&&r===o.protocol?"":"anonymous"},s.prototype._determineXhrType=function(){return s._xhrTypeMap[this.extension]||s.XHR_RESPONSE_TYPE.TEXT},s.prototype._determineLoadType=function(){return s._loadTypeMap[this.extension]||s.LOAD_TYPE.XHR},s.prototype._getExtension=function(){var a=this.url,s="";if(this.isDataUrl){var l=a.indexOf("/");s=a.substring(l+1,a.indexOf(";",l))}else{var r=a.indexOf("?"),n=a.indexOf("#"),i=Q(-1<r?r:a.length,-1<n?n:a.length);a=a.substring(0,i),s=a.substring(a.lastIndexOf(".")+1)}return s.toLowerCase()},s.prototype._getMimeFromXhrType=function(t){switch(t){case s.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case s.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case s.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case s.XHR_RESPONSE_TYPE.JSON:return"application/json";case s.XHR_RESPONSE_TYPE.DEFAULT:case s.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain";}},a(s,[{key:"isDataUrl",get:function(){return this._hasFlag(s.STATUS_FLAGS.DATA_URL)}},{key:"isComplete",get:function(){return this._hasFlag(s.STATUS_FLAGS.COMPLETE)}},{key:"isLoading",get:function(){return this._hasFlag(s.STATUS_FLAGS.LOADING)}}]),s}();_.STATUS_FLAGS={NONE:0,DATA_URL:1,COMPLETE:2,LOADING:4},_.TYPE={UNKNOWN:0,JSON:1,XML:2,IMAGE:3,AUDIO:4,VIDEO:5,TEXT:6},_.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},_.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},_._loadTypeMap={gif:_.LOAD_TYPE.IMAGE,png:_.LOAD_TYPE.IMAGE,bmp:_.LOAD_TYPE.IMAGE,jpg:_.LOAD_TYPE.IMAGE,jpeg:_.LOAD_TYPE.IMAGE,tif:_.LOAD_TYPE.IMAGE,tiff:_.LOAD_TYPE.IMAGE,webp:_.LOAD_TYPE.IMAGE,tga:_.LOAD_TYPE.IMAGE,svg:_.LOAD_TYPE.IMAGE,"svg+xml":_.LOAD_TYPE.IMAGE,mp3:_.LOAD_TYPE.AUDIO,ogg:_.LOAD_TYPE.AUDIO,wav:_.LOAD_TYPE.AUDIO,mp4:_.LOAD_TYPE.VIDEO,webm:_.LOAD_TYPE.VIDEO},_._xhrTypeMap={xhtml:_.XHR_RESPONSE_TYPE.DOCUMENT,html:_.XHR_RESPONSE_TYPE.DOCUMENT,htm:_.XHR_RESPONSE_TYPE.DOCUMENT,xml:_.XHR_RESPONSE_TYPE.DOCUMENT,tmx:_.XHR_RESPONSE_TYPE.DOCUMENT,svg:_.XHR_RESPONSE_TYPE.DOCUMENT,tsx:_.XHR_RESPONSE_TYPE.DOCUMENT,gif:_.XHR_RESPONSE_TYPE.BLOB,png:_.XHR_RESPONSE_TYPE.BLOB,bmp:_.XHR_RESPONSE_TYPE.BLOB,jpg:_.XHR_RESPONSE_TYPE.BLOB,jpeg:_.XHR_RESPONSE_TYPE.BLOB,tif:_.XHR_RESPONSE_TYPE.BLOB,tiff:_.XHR_RESPONSE_TYPE.BLOB,webp:_.XHR_RESPONSE_TYPE.BLOB,tga:_.XHR_RESPONSE_TYPE.BLOB,json:_.XHR_RESPONSE_TYPE.JSON,text:_.XHR_RESPONSE_TYPE.TEXT,txt:_.XHR_RESPONSE_TYPE.TEXT,ttf:_.XHR_RESPONSE_TYPE.BUFFER,otf:_.XHR_RESPONSE_TYPE.BUFFER},_.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",void 0!==t&&(t.exports.default=_)},{"mini-signals":5,"parse-uri":7}],34:[function(a,t,e){"use strict";function l(){}function r(l,t,e,r){var n=0,d=l.length;!function o(i){return i||n===d?void(e&&e(i)):void(r?setTimeout(function(){t(l[n++],o)},1):t(l[n++],o))}()}function n(r){return function(){if(null===r)throw new Error("Callback was already called.");var t=r;r=null,t.apply(this,arguments)}}function o(o,t){function d(n,t,e){if(null!=e&&"function"!=typeof e)throw new Error("task callback must be a function");if(u.started=!0,null==n&&u.idle())return void setTimeout(function(){return u.drain()},1);var r={data:n,callback:"function"==typeof e?e:l};t?u._tasks.unshift(r):u._tasks.push(r),setTimeout(function(){return u.process()},1)}function r(e){return function(){i-=1,e.callback.apply(e,arguments),null!=arguments[0]&&u.error(arguments[0],e.data),i<=u.concurrency-u.buffer&&u.unsaturated(),u.idle()&&u.drain(),u.process()}}if(null==t)t=1;else if(0===t)throw new Error("Concurrency must not be zero");var i=0,u={_tasks:[],concurrency:t,saturated:l,unsaturated:l,buffer:t/4,empty:l,drain:l,error:l,started:!1,paused:!1,push:function(r,t){d(r,!1,t)},kill:function(){i=0,u.drain=l,u.started=!1,u._tasks=[]},unshift:function(r,t){d(r,!0,t)},process:function(){for(;!u.paused&&i<u.concurrency&&u._tasks.length;){var t=u._tasks.shift();0===u._tasks.length&&u.empty(),i+=1,i===u.concurrency&&u.saturated(),o(t.data,n(r(t)))}},length:function(){return u._tasks.length},running:function(){return i},idle:function(){return 0===u._tasks.length+i},pause:function(){!0!==u.paused&&(u.paused=!0)},resume:function(){if(!1!==u.paused){u.paused=!1;for(var e=1;e<=u.concurrency;e++)u.process()}}};return u}e.__esModule=!0,e.eachSeries=r,e.queue=o},{}],35:[function(a,t,e){"use strict";function r(i){for(var t="",l=0;l<i.length;){for(var d=[0,0,0],u=[0,0,0,0],o=0;o<d.length;++o)d[o]=l<i.length?255&i.charCodeAt(l++):0;switch(u[0]=d[0]>>2,u[1]=(3&d[0])<<4|d[1]>>4,u[2]=(15&d[1])<<2|d[2]>>6,u[3]=63&d[2],l-(i.length-1)){case 2:u[3]=64,u[2]=64;break;case 1:u[3]=64;}for(var p=0;p<u.length;++p)t+=n.charAt(u[p])}return t}e.__esModule=!0,e.encodeBinary=r;var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";void 0!==t&&(t.exports.default=r)},{}],36:[function(r,t){"use strict";var e=r("./Loader").Loader,n=r("./Resource").Resource,a=r("./async"),o=r("./b64");e.Resource=n,e.async=a,e.encodeBinary=o,e.base64=o,t.exports=e,t.exports.Loader=e,t.exports.default=e},{"./Loader":32,"./Resource":33,"./async":34,"./b64":35}],37:[function(n,t,e){"use strict";e.__esModule=!0,e.blobMiddlewareFactory=function(){return function(i,t){if(!i.data)return void t();if(i.xhr&&i.xhrType===a.Resource.XHR_RESPONSE_TYPE.BLOB)if(!(window.Blob&&"string"!=typeof i.data)){var e=i.xhr.getResponseHeader("content-type");if(e&&0===e.indexOf("image"))return i.data=new Image,i.data.src="data:"+e+";base64,"+(0,r.encodeBinary)(i.xhr.responseText),i.type=a.Resource.TYPE.IMAGE,void(i.data.onload=function(){i.data.onload=null,t()})}else if(0===i.data.type.indexOf("image")){var n=o.createObjectURL(i.data);return i.blob=i.data,i.data=new Image,i.data.src=n,i.type=a.Resource.TYPE.IMAGE,void(i.data.onload=function(){o.revokeObjectURL(n),i.data.onload=null,t()})}t()}};var a=n("../../Resource"),r=n("../../b64"),o=window.URL||window.webkitURL},{"../../Resource":33,"../../b64":35}],38:[function(a,t,e){"use strict";function l(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function r(n,t,e){if(n&&z.isObject(n)&&n instanceof l)return n;var r=new l;return r.parse(n,t,e),r}var n=a("punycode"),z=a("./util");e.parse=r,e.resolve=function(n,t){return r(n,!1,!0).resolve(t)},e.resolveObject=function(n,t){return n?r(n,!1,!0).resolveObject(t):t},e.format=function(e){return z.isString(e)&&(e=r(e)),e instanceof l?e.format():l.prototype.format.call(e)},e.Url=l;var o=["{","}","|","\\","^","`"].concat(["<",">","\"","`"," ","\r","\n","\t"]),i=["'"].concat(o),s=["%","/","?",";","#"].concat(i),d=["/","?","#"],u=/^[+a-z0-9A-Z_-]{0,63}$/,g={javascript:!0,"javascript:":!0},m={javascript:!0,"javascript:":!0},q={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},_=a("querystring");l.prototype.parse=function(l,b,e){if(!z.isString(l))throw new TypeError("Parameter 'url' must be a string, not "+typeof l);var r=l.indexOf("?"),T=-1!==r&&r<l.indexOf("#")?"?":"#",v=l.split(T);v[0]=v[0].replace(/\\/g,"/"),l=v.join(T);var o=l;if(o=o.trim(),!e&&1===l.split("#").length){var K=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/.exec(o);if(K)return this.path=o,this.href=o,this.pathname=K[1],K[2]?(this.search=K[2],this.query=b?_.parse(this.search.substr(1)):this.search.substr(1)):b&&(this.search="",this.query={}),this}var c=/^([a-z0-9.+-]+:)/i.exec(o);if(c){c=c[0];var Z=c.toLowerCase();this.protocol=Z,o=o.substr(c.length)}if(e||c||o.match(/^\/\/[^@\/]+@[^@\/]+/)){var p="//"===o.substr(0,2);!p||c&&m[c]||(o=o.substr(2),this.slashes=!0)}if(!m[c]&&(p||c&&!q[c])){for(var E=-1,J=0,Q;J<d.length;J++)Q=o.indexOf(d[J]),-1!==Q&&(-1===E||Q<E)&&(E=Q);var $,ee;ee=-1===E?o.lastIndexOf("@"):o.lastIndexOf("@",E),-1!==ee&&($=o.slice(0,ee),o=o.slice(ee+1),this.auth=decodeURIComponent($)),E=-1;for(var J=0,Q;J<s.length;J++)Q=o.indexOf(s[J]),-1!==Q&&(-1===E||Q<E)&&(E=Q);-1===E&&(E=o.length),this.host=o.slice(0,E),o=o.slice(E),this.parseHost(),this.hostname=this.hostname||"";var te="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!te)for(var R=this.hostname.split(/\./),J=0,A=R.length,re;J<A;J++)if(re=R[J],re&&!re.match(u)){for(var ne="",ae=0,oe=re.length;ae<oe;ae++)ne+=127<re.charCodeAt(ae)?"x":re[ae];if(!ne.match(u)){var B=R.slice(0,J),k=R.slice(J+1),F=re.match(/^([+a-z0-9A-Z_-]{0,63})(.*)$/);F&&(B.push(F[1]),k.unshift(F[2])),k.length&&(o="/"+k.join(".")+o),this.hostname=B.join(".");break}}this.hostname=255<this.hostname.length?"":this.hostname.toLowerCase(),te||(this.hostname=n.toASCII(this.hostname));var j=this.port?":"+this.port:"",ie=this.hostname||"";this.host=ie+j,this.href+=this.host,te&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==o[0]&&(o="/"+o))}if(!g[Z])for(var J=0,A=i.length,X;J<A;J++)if(X=i[J],-1!==o.indexOf(X)){var se=encodeURIComponent(X);se===X&&(se=escape(X)),o=o.split(X).join(se)}var le=o.indexOf("#");-1!==le&&(this.hash=o.substr(le),o=o.slice(0,le));var H=o.indexOf("?");if(-1===H?b&&(this.search="",this.query={}):(this.search=o.substr(H),this.query=o.substr(H+1),b&&(this.query=_.parse(this.query)),o=o.slice(0,H)),o&&(this.pathname=o),q[Z]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var j=this.pathname||"",Y=this.search||"";this.path=j+Y}return this.href=this.format(),this},l.prototype.format=function(){var a=this.auth||"";a&&(a=encodeURIComponent(a),a=a.replace(/%3A/i,":"),a+="@");var l=this.protocol||"",d=this.pathname||"",u=this.hash||"",p=!1,c="";this.host?p=a+this.host:this.hostname&&(p=a+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(p+=":"+this.port)),this.query&&z.isObject(this.query)&&Object.keys(this.query).length&&(c=_.stringify(this.query));var f=this.search||c&&"?"+c||"";return l&&":"!==l.substr(-1)&&(l+=":"),this.slashes||(!l||q[l])&&!1!==p?(p="//"+(p||""),d&&"/"!==d.charAt(0)&&(d="/"+d)):p||(p=""),u&&"#"!==u.charAt(0)&&(u="#"+u),f&&"?"!==f.charAt(0)&&(f="?"+f),d=d.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),f=f.replace("#","%23"),l+p+d+f+u},l.prototype.resolve=function(e){return this.resolveObject(r(e,!1,!0)).format()},l.prototype.resolveObject=function(n){if(z.isString(n)){var T=new l;T.parse(n,!1,!0),n=T}for(var e=new l,r=Object.keys(this),i=0,A;i<r.length;i++)A=r[i],e[A]=this[A];if(e.hash=n.hash,""===n.href)return e.href=e.format(),e;if(n.slashes&&!n.protocol){for(var I=Object.keys(n),a=0,D;a<I.length;a++)D=I[a],"protocol"!==D&&(e[D]=n[D]);return q[e.protocol]&&e.hostname&&!e.pathname&&(e.path=e.pathname="/"),e.href=e.format(),e}if(n.protocol&&n.protocol!==e.protocol){if(!q[n.protocol]){for(var L=Object.keys(n),c=0,k;c<L.length;c++)k=L[c],e[k]=n[k];return e.href=e.format(),e}if(e.protocol=n.protocol,n.host||m[n.protocol])e.pathname=n.pathname;else{for(var B=(n.pathname||"").split("/");B.length&&!(n.host=B.shift()););n.host||(n.host=""),n.hostname||(n.hostname=""),""!==B[0]&&B.unshift(""),2>B.length&&B.unshift(""),e.pathname=B.join("/")}if(e.search=n.search,e.query=n.query,e.host=n.host||"",e.auth=n.auth,e.hostname=n.hostname||n.host,e.port=n.port,e.pathname||e.search){var N=e.pathname||"",v=e.search||"";e.path=N+v}return e.slashes=e.slashes||n.slashes,e.href=e.format(),e}var g=e.pathname&&"/"===e.pathname.charAt(0),F=n.host||n.pathname&&"/"===n.pathname.charAt(0),U=F||g||e.host&&n.pathname,X=U,b=e.pathname&&e.pathname.split("/")||[],B=n.pathname&&n.pathname.split("/")||[],W=e.protocol&&!q[e.protocol];if(W&&(e.hostname="",e.port=null,e.host&&(""===b[0]?b[0]=e.host:b.unshift(e.host)),e.host="",n.protocol&&(n.hostname=null,n.port=null,n.host&&(""===B[0]?B[0]=n.host:B.unshift(n.host)),n.host=null),U=U&&(""===B[0]||""===b[0])),F)e.host=n.host||""===n.host?n.host:e.host,e.hostname=n.hostname||""===n.hostname?n.hostname:e.hostname,e.search=n.search,e.query=n.query,b=B;else if(B.length)b||(b=[]),b.pop(),b=b.concat(B),e.search=n.search,e.query=n.query;else if(!z.isNullOrUndefined(n.search)){if(W){e.hostname=e.host=b.shift();var E=!!(e.host&&0<e.host.indexOf("@"))&&e.host.split("@");E&&(e.auth=E.shift(),e.host=e.hostname=E.shift())}return e.search=n.search,e.query=n.query,z.isNull(e.pathname)&&z.isNull(e.search)||(e.path=(e.pathname?e.pathname:"")+(e.search?e.search:"")),e.href=e.format(),e}if(!b.length)return e.pathname=null,e.path=e.search?"/"+e.search:null,e.href=e.format(),e;for(var G=b.slice(-1)[0],Y=(e.host||n.host||1<b.length)&&("."===G||".."===G)||""===G,M=0,V=b.length;0<=V;V--)G=b[V],"."===G?b.splice(V,1):".."===G?(b.splice(V,1),M++):M&&(b.splice(V,1),M--);if(!U&&!X)for(;M--;M)b.unshift("..");!U||""===b[0]||b[0]&&"/"===b[0].charAt(0)||b.unshift(""),Y&&"/"!==b.join("/").substr(-1)&&b.push("");var H=""===b[0]||b[0]&&"/"===b[0].charAt(0);if(W){e.hostname=e.host=H?"":b.length?b.shift():"";var E=!!(e.host&&0<e.host.indexOf("@"))&&e.host.split("@");E&&(e.auth=E.shift(),e.host=e.hostname=E.shift())}return U=U||e.host&&b.length,U&&!H&&b.unshift(""),b.length?e.pathname=b.join("/"):(e.pathname=null,e.path=null),z.isNull(e.pathname)&&z.isNull(e.search)||(e.path=(e.pathname?e.pathname:"")+(e.search?e.search:"")),e.auth=n.auth||e.auth,e.slashes=e.slashes||n.slashes,e.href=e.format(),e},l.prototype.parseHost=function(){var r=this.host,n=/:[0-9]*$/.exec(r);n&&(n=n[0],":"!==n&&(this.port=n.substr(1)),r=r.substr(0,r.length-n.length)),r&&(this.hostname=r)}},{"./util":39,punycode:27,querystring:30}],39:[function(r,t){"use strict";t.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},{}],40:[function(d,t,e){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var i=d("../core"),p=function(n){if(n&&n.__esModule)return n;var t={};if(null!=n)for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t.default=n,t}(i),o=d("ismobilejs"),a=r(o),s=d("./accessibleTarget"),u=r(s);p.utils.mixins.delayMixin(p.DisplayObject.prototype,u.default);var l=function(){function o(t){n(this,o),(a.default.tablet||a.default.phone)&&!navigator.isCocoonJS&&this.createTouchHook();var e=document.createElement("div");e.style.width="100px",e.style.height="100px",e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.zIndex=2,this.div=e,this.pool=[],this.renderId=0,this.debug=!1,this.renderer=t,this.children=[],this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this.isActive=!1,this.isMobileAccessabillity=!1,window.addEventListener("keydown",this._onKeyDown,!1)}return o.prototype.createTouchHook=function(){var r=this,t=document.createElement("button");t.style.width="1px",t.style.height="1px",t.style.position="absolute",t.style.top="-1000px",t.style.left="-1000px",t.style.zIndex=2,t.style.backgroundColor="#FF0000",t.title="HOOK DIV",t.addEventListener("focus",function(){r.isMobileAccessabillity=!0,r.activate(),document.body.removeChild(t)}),document.body.appendChild(t)},o.prototype.activate=function(){this.isActive||(this.isActive=!0,window.document.addEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode&&this.renderer.view.parentNode.appendChild(this.div))},o.prototype.deactivate=function(){this.isActive&&!this.isMobileAccessabillity&&(this.isActive=!1,window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode&&this.div.parentNode.removeChild(this.div))},o.prototype.updateAccessibleObjects=function(n){if(n.visible){n.accessible&&n.interactive&&(n._accessibleActive||this.addChild(n),n.renderId=this.renderId);for(var t=n.children,e=0;e<t.length;e++)this.updateAccessibleObjects(t[e])}},o.prototype.update=function(){if(this.renderer.renderingToScreen){this.updateAccessibleObjects(this.renderer._lastObjectRendered);var s=this.renderer.view.getBoundingClientRect(),t=s.width/this.renderer.width,e=s.height/this.renderer.height,r=this.div;r.style.left=s.left+"px",r.style.top=s.top+"px",r.style.width=this.renderer.width+"px",r.style.height=this.renderer.height+"px";for(var l=0,d;l<this.children.length;l++)if(d=this.children[l],d.renderId!==this.renderId)d._accessibleActive=!1,p.utils.removeItems(this.children,l,1),this.div.removeChild(d._accessibleDiv),this.pool.push(d._accessibleDiv),d._accessibleDiv=null,l--,0===this.children.length&&this.deactivate();else{r=d._accessibleDiv;var c=d.hitArea,f=d.worldTransform;d.hitArea?(r.style.left=(f.tx+c.x*f.a)*t+"px",r.style.top=(f.ty+c.y*f.d)*e+"px",r.style.width=c.width*f.a*t+"px",r.style.height=c.height*f.d*e+"px"):(c=d.getBounds(),this.capHitArea(c),r.style.left=c.x*t+"px",r.style.top=c.y*e+"px",r.style.width=c.width*t+"px",r.style.height=c.height*e+"px",r.title!==d.accessibleTitle&&null!==d.accessibleTitle&&(r.title=d.accessibleTitle),r.getAttribute("aria-label")!==d.accessibleHint&&null!==d.accessibleHint&&r.setAttribute("aria-label",d.accessibleHint))}this.renderId++}},o.prototype.capHitArea=function(e){0>e.x&&(e.width+=e.x,e.x=0),0>e.y&&(e.height+=e.y,e.y=0),e.x+e.width>this.renderer.width&&(e.width=this.renderer.width-e.x),e.y+e.height>this.renderer.height&&(e.height=this.renderer.height-e.y)},o.prototype.addChild=function(r){var t=this.pool.pop();t||(t=document.createElement("button"),t.style.width="100px",t.style.height="100px",t.style.backgroundColor=this.debug?"rgba(255,0,0,0.5)":"transparent",t.style.position="absolute",t.style.zIndex=2,t.style.borderStyle="none",-1<navigator.userAgent.toLowerCase().indexOf("chrome")?t.setAttribute("aria-live","off"):t.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?t.setAttribute("aria-relevant","additions"):t.setAttribute("aria-relevant","text"),t.addEventListener("click",this._onClick.bind(this)),t.addEventListener("focus",this._onFocus.bind(this)),t.addEventListener("focusout",this._onFocusOut.bind(this))),r.accessibleTitle&&null!==r.accessibleTitle?t.title=r.accessibleTitle:r.accessibleHint&&null!==r.accessibleHint||(t.title="displayObject "+r.tabIndex),r.accessibleHint&&null!==r.accessibleHint&&t.setAttribute("aria-label",r.accessibleHint),r._accessibleActive=!0,r._accessibleDiv=t,t.displayObject=r,this.children.push(r),this.div.appendChild(r._accessibleDiv),r._accessibleDiv.tabIndex=r.tabIndex},o.prototype._onClick=function(r){var t=this.renderer.plugins.interaction;t.dispatchEvent(r.target.displayObject,"click",t.eventData)},o.prototype._onFocus=function(r){r.target.getAttribute("aria-live","off")||r.target.setAttribute("aria-live","assertive");var t=this.renderer.plugins.interaction;t.dispatchEvent(r.target.displayObject,"mouseover",t.eventData)},o.prototype._onFocusOut=function(r){r.target.getAttribute("aria-live","off")||r.target.setAttribute("aria-live","polite");var t=this.renderer.plugins.interaction;t.dispatchEvent(r.target.displayObject,"mouseout",t.eventData)},o.prototype._onKeyDown=function(e){9===e.keyCode&&this.activate()},o.prototype._onMouseMove=function(e){0===e.movementX&&0===e.movementY||this.deactivate()},o.prototype.destroy=function(){this.div=null;for(var e=0;e<this.children.length;e++)this.children[e].div=null;window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},o}();e.default=l,p.WebGLRenderer.registerPlugin("accessibility",l),p.CanvasRenderer.registerPlugin("accessibility",l)},{"../core":65,"./accessibleTarget":41,ismobilejs:4}],41:[function(n,t,e){"use strict";e.__esModule=!0,e.default={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:!1}},{}],42:[function(a,t,e){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}e.__esModule=!0;var n=a("./accessibleTarget");Object.defineProperty(e,"accessibleTarget",{enumerable:!0,get:function(){return r(n).default}});var i=a("./AccessibilityManager");Object.defineProperty(e,"AccessibilityManager",{enumerable:!0,get:function(){return r(i).default}})},{"./AccessibilityManager":40,"./accessibleTarget":41}],43:[function(p,t,e){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function g(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var n=function(){function a(a,t){for(var e=0,o;e<t.length;e++)o=t[e],o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(a,o.key,o)}return function(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t}}(),i=p("./autoDetectRenderer"),o=p("./display/Container"),s=r(o),u=p("./ticker"),a=p("./settings"),l=r(a),c=p("./const"),d=function(){function d(t,p,r,n,o){g(this,d),"number"==typeof t&&(t=Object.assign({width:t,height:p||l.default.RENDER_OPTIONS.height,forceCanvas:!!n,sharedTicker:!!o},r)),this._options=t=Object.assign({autoStart:!0,sharedTicker:!1,forceCanvas:!1,sharedLoader:!1},t),this.renderer=(0,i.autoDetectRenderer)(t),this.stage=new s.default,this._ticker=null,this.ticker=t.sharedTicker?u.shared:new u.Ticker,t.autoStart&&this.start()}return d.prototype.render=function(){this.renderer.render(this.stage)},d.prototype.stop=function(){this._ticker.stop()},d.prototype.start=function(){this._ticker.start()},d.prototype.destroy=function(n,t){if(this._ticker){var e=this._ticker;this.ticker=null,e.destroy()}this.stage.destroy(t),this.stage=null,this.renderer.destroy(n),this.renderer=null,this._options=null},n(d,[{key:"ticker",set:function(e){this._ticker&&this._ticker.remove(this.render,this),this._ticker=e,e&&e.add(this.render,this,c.UPDATE_PRIORITY.LOW)},get:function(){return this._ticker}},{key:"view",get:function(){return this.renderer.view}},{key:"screen",get:function(){return this.renderer.screen}}]),d}();e.default=d},{"./autoDetectRenderer":45,"./const":46,"./display/Container":48,"./settings":101,"./ticker":121}],44:[function(d,t,e){"use strict";function p(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function n(r,t){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:r}function r(r,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(r,t):r.__proto__=t)}function i(n,t){if(n instanceof Array){if("precision"!==n[0].substring(0,9)){var e=n.slice(0);return e.unshift("precision "+t+" float;"),e}}else if("precision"!==n.trim().substring(0,9))return"precision "+t+" float;\n"+n;return n}e.__esModule=!0;var o=d("pixi-gl-core"),a=d("./settings"),s=function(e){return e&&e.__esModule?e:{default:e}}(a),u=function(d){function t(e,r,o,a,u){return p(this,t),n(this,d.call(this,e,i(r,u||s.default.PRECISION_VERTEX),i(o,u||s.default.PRECISION_FRAGMENT),void 0,a))}return r(t,d),t}(o.GLShader);e.default=u},{"./settings":101,"pixi-gl-core":15}],45:[function(d,t,e){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(s,t,e,r){var n=s&&s.forceCanvas;return void 0!==r&&(n=r),!n&&o.isWebGLSupported()?new p.default(s,t,e):new a.default(s,t,e)}e.__esModule=!0,e.autoDetectRenderer=n;var i=d("./utils"),o=function(n){if(n&&n.__esModule)return n;var t={};if(null!=n)for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t.default=n,t}(i),s=d("./renderers/canvas/CanvasRenderer"),a=r(s),u=d("./renderers/webgl/WebGLRenderer"),p=r(u)},{"./renderers/canvas/CanvasRenderer":77,"./renderers/webgl/WebGLRenderer":84,"./utils":125}],46:[function(n,t,e){"use strict";e.__esModule=!0,e.VERSION="4.8.9",e.PI_2=2*Z,e.RAD_TO_DEG=180/Z,e.DEG_TO_RAD=Z/180,e.RENDERER_TYPE={UNKNOWN:0,WEBGL:1,CANVAS:2},e.BLEND_MODES={NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,NORMAL_NPM:17,ADD_NPM:18,SCREEN_NPM:19},e.DRAW_MODES={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},e.SCALE_MODES={LINEAR:0,NEAREST:1},e.WRAP_MODES={CLAMP:0,REPEAT:1,MIRRORED_REPEAT:2},e.GC_MODES={AUTO:0,MANUAL:1},e.URL_FILE_EXTENSION=/\.(\w{3,4})(?:$|\?|#)/i,e.DATA_URI=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i,e.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,e.SHAPES={POLY:0,RECT:1,CIRC:2,ELIP:3,RREC:4},e.PRECISION={LOW:"lowp",MEDIUM:"mediump",HIGH:"highp"},e.TRANSFORM_MODE={STATIC:0,DYNAMIC:1},e.TEXT_GRADIENT={LINEAR_VERTICAL:0,LINEAR_HORIZONTAL:1},e.UPDATE_PRIORITY={INTERACTION:50,HIGH:25,NORMAL:0,LOW:-25,UTILITY:-50}},{}],47:[function(a,t,e){"use strict";function r(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var n=a("../math"),i=function(){function e(){r(this,e),this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null}return e.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},e.prototype.clear=function(){this.updateID++,this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},e.prototype.getRectangle=function(e){return this.minX>this.maxX||this.minY>this.maxY?n.Rectangle.EMPTY:(e=e||new n.Rectangle(0,0,1,1),e.x=this.minX,e.y=this.minY,e.width=this.maxX-this.minX,e.height=this.maxY-this.minY,e)},e.prototype.addPoint=function(e){this.minX=Q(this.minX,e.x),this.maxX=te(this.maxX,e.x),this.minY=Q(this.minY,e.y),this.maxY=te(this.maxY,e.y)},e.prototype.addQuad=function(a){var t=this.minX,l=this.minY,d=this.maxX,u=this.maxY,p=a[0],c=a[1];t=p<t?p:t,l=c<l?c:l,d=p>d?p:d,u=c>u?c:u,p=a[2],c=a[3],t=p<t?p:t,l=c<l?c:l,d=p>d?p:d,u=c>u?c:u,p=a[4],c=a[5],t=p<t?p:t,l=c<l?c:l,d=p>d?p:d,u=c>u?c:u,p=a[6],c=a[7],t=p<t?p:t,l=c<l?c:l,d=p>d?p:d,u=c>u?c:u,this.minX=t,this.minY=l,this.maxX=d,this.maxY=u},e.prototype.addFrame=function(m,t,e,r,n){var i=m.worldTransform,o=i.a,s=i.b,a=i.c,u=i.d,_=i.tx,l=i.ty,c=this.minX,b=this.minY,T=this.maxX,S=this.maxY,E=o*t+a*e+_,C=s*t+u*e+l;c=E<c?E:c,b=C<b?C:b,T=E>T?E:T,S=C>S?C:S,E=o*r+a*e+_,C=s*r+u*e+l,c=E<c?E:c,b=C<b?C:b,T=E>T?E:T,S=C>S?C:S,E=o*t+a*n+_,C=s*t+u*n+l,c=E<c?E:c,b=C<b?C:b,T=E>T?E:T,S=C>S?C:S,E=o*r+a*n+_,C=s*r+u*n+l,c=E<c?E:c,b=C<b?C:b,T=E>T?E:T,S=C>S?C:S,this.minX=c,this.minY=b,this.maxX=T,this.maxY=S},e.prototype.addVertices=function(b,t,e,r){for(var n=b.worldTransform,i=n.a,o=n.b,s=n.c,a=n.d,u=n.tx,T=n.ty,l=this.minX,S=this.minY,E=this.maxX,C=this.maxY,P=e;P<r;P+=2){var A=t[P],g=t[P+1],M=i*A+s*g+u,m=a*g+o*A+T;l=M<l?M:l,S=m<S?m:S,E=M>E?M:E,C=m>C?m:C}this.minX=l,this.minY=S,this.maxX=E,this.maxY=C},e.prototype.addBounds=function(a){var t=this.minX,e=this.minY,r=this.maxX,n=this.maxY;this.minX=a.minX<t?a.minX:t,this.minY=a.minY<e?a.minY:e,this.maxX=a.maxX>r?a.maxX:r,this.maxY=a.maxY>n?a.maxY:n},e.prototype.addBoundsMask=function(l,t){var e=l.minX>t.minX?l.minX:t.minX,r=l.minY>t.minY?l.minY:t.minY,n=l.maxX<t.maxX?l.maxX:t.maxX,i=l.maxY<t.maxY?l.maxY:t.maxY;if(e<=n&&r<=i){var o=this.minX,s=this.minY,a=this.maxX,d=this.maxY;this.minX=e<o?e:o,this.minY=r<s?r:s,this.maxX=n>a?n:a,this.maxY=i>d?i:d}},e.prototype.addBoundsArea=function(l,t){var e=l.minX>t.x?l.minX:t.x,r=l.minY>t.y?l.minY:t.y,n=l.maxX<t.x+t.width?l.maxX:t.x+t.width,i=l.maxY<t.y+t.height?l.maxY:t.y+t.height;if(e<=n&&r<=i){var o=this.minX,s=this.minY,a=this.maxX,d=this.maxY;this.minX=e<o?e:o,this.minY=r<s?r:s,this.maxX=n>a?n:a,this.maxY=i>d?i:d}},e}();e.default=i},{"../math":70}],48:[function(d,t,e){"use strict";function p(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function n(r,t){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:r}function r(r,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(r,t):r.__proto__=t)}e.__esModule=!0;var o=function(){function a(a,t){for(var e=0,o;e<t.length;e++)o=t[e],o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(a,o.key,o)}return function(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t}}(),i=d("../utils"),a=d("./DisplayObject"),s=function(e){return e&&e.__esModule?e:{default:e}}(a),u=function(a){function t(){p(this,t);var e=n(this,a.call(this));return e.children=[],e}return r(t,a),t.prototype.onChildrenChange=function(){},t.prototype.addChild=function(n){var t=arguments.length;if(1<t)for(var e=0;e<t;e++)this.addChild(arguments[e]);else n.parent&&n.parent.removeChild(n),n.parent=this,n.transform._parentID=-1,this.children.push(n),this._boundsID++,this.onChildrenChange(this.children.length-1),n.emit("added",this);return n},t.prototype.addChildAt=function(r,t){if(0>t||t>this.children.length)throw new Error(r+"addChildAt: The index "+t+" supplied is out of bounds "+this.children.length);return r.parent&&r.parent.removeChild(r),r.parent=this,r.transform._parentID=-1,this.children.splice(t,0,r),this._boundsID++,this.onChildrenChange(t),r.emit("added",this),r},t.prototype.swapChildren=function(a,t){if(a!==t){var e=this.getChildIndex(a),r=this.getChildIndex(t);this.children[e]=t,this.children[r]=a,this.onChildrenChange(e<r?e:r)}},t.prototype.getChildIndex=function(r){var t=this.children.indexOf(r);if(-1===t)throw new Error("The supplied DisplayObject must be a child of the caller");return t},t.prototype.setChildIndex=function(n,t){if(0>t||t>=this.children.length)throw new Error("The index "+t+" supplied is out of bounds "+this.children.length);var e=this.getChildIndex(n);(0,i.removeItems)(this.children,e,1),this.children.splice(t,0,n),this.onChildrenChange(t)},t.prototype.getChildAt=function(e){if(0>e||e>=this.children.length)throw new Error("getChildAt: Index ("+e+") does not exist.");return this.children[e]},t.prototype.removeChild=function(a){var t=arguments.length;if(1<t)for(var e=0;e<t;e++)this.removeChild(arguments[e]);else{var o=this.children.indexOf(a);if(-1===o)return null;a.parent=null,a.transform._parentID=-1,(0,i.removeItems)(this.children,o,1),this._boundsID++,this.onChildrenChange(o),a.emit("removed",this)}return a},t.prototype.removeChildAt=function(r){var t=this.getChildAt(r);return t.parent=null,t.transform._parentID=-1,(0,i.removeItems)(this.children,r,1),this._boundsID++,this.onChildrenChange(r),t.emit("removed",this),t},t.prototype.removeChildren=function(){var l=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=arguments[1],e=l,r="number"==typeof t?t:this.children.length,n=r-e,i;if(0<n&&n<=r){i=this.children.splice(e,n);for(var d=0;d<i.length;++d)i[d].parent=null,i[d].transform&&(i[d].transform._parentID=-1);this._boundsID++,this.onChildrenChange(l);for(var u=0;u<i.length;++u)i[u].emit("removed",this);return i}if(0==n&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},t.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var n=0,a=this.children.length,e;n<a;++n)e=this.children[n],e.visible&&e.updateTransform()},t.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var r=0,n;r<this.children.length;r++)n=this.children[r],n.visible&&n.renderable&&(n.calculateBounds(),n._mask?(n._mask.calculateBounds(),this._bounds.addBoundsMask(n._bounds,n._mask._bounds)):n.filterArea?this._bounds.addBoundsArea(n._bounds,n.filterArea):this._bounds.addBounds(n._bounds));this._lastBoundsID=this._boundsID},t.prototype._calculateBounds=function(){},t.prototype.renderWebGL=function(n){if(this.visible&&!(0>=this.worldAlpha)&&this.renderable)if(this._mask||this.filters&&this.filters.length)this.renderAdvancedWebGL(n);else{this._renderWebGL(n);for(var t=0,a=this.children.length;t<a;++t)this.children[t].renderWebGL(n)}},t.prototype.renderAdvancedWebGL=function(a){a.flush();var t=this._filters,e=this._mask;if(t){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var r=0;r<t.length;r++)t[r].enabled&&this._enabledFilters.push(t[r]);this._enabledFilters.length&&a.filterManager.pushFilter(this,this._enabledFilters)}e&&a.maskManager.pushMask(this,this._mask),this._renderWebGL(a);for(var s=0,l=this.children.length;s<l;s++)this.children[s].renderWebGL(a);a.flush(),e&&a.maskManager.popMask(this,this._mask),t&&this._enabledFilters&&this._enabledFilters.length&&a.filterManager.popFilter()},t.prototype._renderWebGL=function(){},t.prototype._renderCanvas=function(){},t.prototype.renderCanvas=function(n){if(this.visible&&!(0>=this.worldAlpha)&&this.renderable){this._mask&&n.maskManager.pushMask(this._mask),this._renderCanvas(n);for(var t=0,a=this.children.length;t<a;++t)this.children[t].renderCanvas(n);this._mask&&n.maskManager.popMask(n)}},t.prototype.destroy=function(t){a.prototype.destroy.call(this);var e="boolean"==typeof t?t:t&&t.children,r=this.removeChildren(0,this.children.length);if(e)for(var n=0;n<r.length;++n)r[n].destroy(t)},o(t,[{key:"width",get:function(){return this.scale.x*this.getLocalBounds().width},set:function(r){var t=this.getLocalBounds().width;this.scale.x=0===t?1:r/t,this._width=r}},{key:"height",get:function(){return this.scale.y*this.getLocalBounds().height},set:function(r){var t=this.getLocalBounds().height;this.scale.y=0===t?1:r/t,this._height=r}}]),t}(s.default);e.default=u,u.prototype.containerUpdateTransform=u.prototype.updateTransform},{"../utils":125,"./DisplayObject":49}],49:[function(T,t,e){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function S(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function i(r,t){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:r}function n(r,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(r,t):r.__proto__=t)}e.__esModule=!0;var o=function(){function a(a,t){for(var e=0,o;e<t.length;e++)o=t[e],o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(a,o.key,o)}return function(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t}}(),a=T("eventemitter3"),s=r(a),u=T("../const"),l=T("../settings"),c=r(l),d=T("./TransformStatic"),f=r(d),p=T("./Transform"),v=r(p),g=T("./Bounds"),E=r(g),m=T("../math"),_=function(a){function t(){S(this,t);var e=i(this,a.call(this)),r=c.default.TRANSFORM_MODE===u.TRANSFORM_MODE.STATIC?f.default:v.default;return e.tempDisplayObjectParent=null,e.transform=new r,e.alpha=1,e.visible=!0,e.renderable=!0,e.parent=null,e.worldAlpha=1,e.filterArea=null,e._filters=null,e._enabledFilters=null,e._bounds=new E.default,e._boundsID=0,e._lastBoundsID=-1,e._boundsRect=null,e._localBoundsRect=null,e._mask=null,e._destroyed=!1,e}return n(t,a),t.prototype.updateTransform=function(){this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha,this._bounds.updateID++},t.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},t.prototype.getBounds=function(r,t){return r||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._boundsID!==this._lastBoundsID&&this.calculateBounds(),t||(this._boundsRect||(this._boundsRect=new m.Rectangle),t=this._boundsRect),this._bounds.getRectangle(t)},t.prototype.getLocalBounds=function(a){var o=this.transform,e=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform,a||(this._localBoundsRect||(this._localBoundsRect=new m.Rectangle),a=this._localBoundsRect);var r=this.getBounds(!1,a);return this.parent=e,this.transform=o,r},t.prototype.toGlobal=function(r,t){return 2<arguments.length&&void 0!==arguments[2]&&arguments[2]||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(r,t)},t.prototype.toLocal=function(a,o,e,r){return o&&(a=o.toGlobal(a,e,r)),r||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(a,e)},t.prototype.renderWebGL=function(){},t.prototype.renderCanvas=function(){},t.prototype.setParent=function(e){if(!e||!e.addChild)throw new Error("setParent: Argument must be a Container");return e.addChild(this),e},t.prototype.setTransform=function(){var l=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,n=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,i=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0,o=6<arguments.length&&void 0!==arguments[6]?arguments[6]:0,s=7<arguments.length&&void 0!==arguments[7]?arguments[7]:0,a=8<arguments.length&&void 0!==arguments[8]?arguments[8]:0;return this.position.x=l,this.position.y=t,this.scale.x=e||1,this.scale.y=r||1,this.rotation=n,this.skew.x=i,this.skew.y=o,this.pivot.x=s,this.pivot.y=a,this},t.prototype.destroy=function(){this.removeAllListeners(),this.parent&&this.parent.removeChild(this),this.transform=null,this.parent=null,this._bounds=null,this._currentBounds=null,this._mask=null,this.filterArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},o(t,[{key:"_tempDisplayObjectParent",get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new t),this.tempDisplayObjectParent}},{key:"x",get:function(){return this.position.x},set:function(e){this.transform.position.x=e}},{key:"y",get:function(){return this.position.y},set:function(e){this.transform.position.y=e}},{key:"worldTransform",get:function(){return this.transform.worldTransform}},{key:"localTransform",get:function(){return this.transform.localTransform}},{key:"position",get:function(){return this.transform.position},set:function(e){this.transform.position.copy(e)}},{key:"scale",get:function(){return this.transform.scale},set:function(e){this.transform.scale.copy(e)}},{key:"pivot",get:function(){return this.transform.pivot},set:function(e){this.transform.pivot.copy(e)}},{key:"skew",get:function(){return this.transform.skew},set:function(e){this.transform.skew.copy(e)}},{key:"rotation",get:function(){return this.transform.rotation},set:function(e){this.transform.rotation=e}},{key:"worldVisible",get:function(){var e=this;do{if(!e.visible)return!1;e=e.parent}while(e);return!0}},{key:"mask",get:function(){return this._mask},set:function(e){this._mask&&(this._mask.renderable=!0,this._mask.isMask=!1),this._mask=e,this._mask&&(this._mask.renderable=!1,this._mask.isMask=!0)}},{key:"filters",get:function(){return this._filters&&this._filters.slice()},set:function(e){this._filters=e&&e.slice()}}]),t}(s.default);e.default=_,_.prototype.displayObjectUpdateTransform=_.prototype.updateTransform},{"../const":46,"../math":70,"../settings":101,"./Bounds":47,"./Transform":50,"./TransformStatic":52,eventemitter3:3}],50:[function(d,t,e){"use strict";function p(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function n(r,t){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:r}function r(r,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(r,t):r.__proto__=t)}e.__esModule=!0;var o=function(){function a(a,t){for(var e=0,o;e<t.length;e++)o=t[e],o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(a,o.key,o)}return function(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t}}(),i=d("../math"),a=d("./TransformBase"),s=function(e){return e&&e.__esModule?e:{default:e}}(a),u=function(a){function t(){p(this,t);var e=n(this,a.call(this));return e.position=new i.Point(0,0),e.scale=new i.Point(1,1),e.skew=new i.ObservablePoint(e.updateSkew,e,0,0),e.pivot=new i.Point(0,0),e._rotation=0,e._cx=1,e._sx=0,e._cy=0,e._sy=1,e}return r(t,a),t.prototype.updateSkew=function(){this._cx=K(this._rotation+this.skew._y),this._sx=q(this._rotation+this.skew._y),this._cy=-q(this._rotation-this.skew._x),this._sy=K(this._rotation-this.skew._x)},t.prototype.updateLocalTransform=function(){var e=this.localTransform;e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d)},t.prototype.updateTransform=function(a){var t=this.localTransform;t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d);var e=a.worldTransform,r=this.worldTransform;r.a=t.a*e.a+t.b*e.c,r.b=t.a*e.b+t.b*e.d,r.c=t.c*e.a+t.d*e.c,r.d=t.c*e.b+t.d*e.d,r.tx=t.tx*e.a+t.ty*e.c+e.tx,r.ty=t.tx*e.b+t.ty*e.d+e.ty,this._worldID++},t.prototype.setFromMatrix=function(e){e.decompose(this)},o(t,[{key:"rotation",get:function(){return this._rotation},set:function(e){this._rotation=e,this.updateSkew()}}]),t}(s.default);e.default=u},{"../math":70,"./TransformBase":51}],51:[function(a,t,e){"use strict";function r(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var n=a("../math"),i=function(){function e(){r(this,e),this.worldTransform=new n.Matrix,this.localTransform=new n.Matrix,this._worldID=0,this._parentID=0}return e.prototype.updateLocalTransform=function(){},e.prototype.updateTransform=function(a){var t=a.worldTransform,e=this.worldTransform,r=this.localTransform;e.a=r.a*t.a+r.b*t.c,e.b=r.a*t.b+r.b*t.d,e.c=r.c*t.a+r.d*t.c,e.d=r.c*t.b+r.d*t.d,e.tx=r.tx*t.a+r.ty*t.c+t.tx,e.ty=r.tx*t.b+r.ty*t.d+t.ty,this._worldID++},e}();e.default=i,i.prototype.updateWorldTransform=i.prototype.updateTransform,i.IDENTITY=new i},{"../math":70}],52:[function(d,t,e){"use strict";function p(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function n(r,t){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:r}function r(r,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(r,t):r.__proto__=t)}e.__esModule=!0;var o=function(){function a(a,t){for(var e=0,o;e<t.length;e++)o=t[e],o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(a,o.key,o)}return function(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t}}(),i=d("../math"),a=d("./TransformBase"),s=function(e){return e&&e.__esModule?e:{default:e}}(a),u=function(a){function t(){p(this,t);var e=n(this,a.call(this));return e.position=new i.ObservablePoint(e.onChange,e,0,0),e.scale=new i.ObservablePoint(e.onChange,e,1,1),e.pivot=new i.ObservablePoint(e.onChange,e,0,0),e.skew=new i.ObservablePoint(e.updateSkew,e,0,0),e._rotation=0,e._cx=1,e._sx=0,e._cy=0,e._sy=1,e._localID=0,e._currentLocalID=0,e}return r(t,a),t.prototype.onChange=function(){this._localID++},t.prototype.updateSkew=function(){this._cx=K(this._rotation+this.skew._y),this._sx=q(this._rotation+this.skew._y),this._cy=-q(this._rotation-this.skew._x),this._sy=K(this._rotation-this.skew._x),this._localID++},t.prototype.updateLocalTransform=function(){var e=this.localTransform;this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale._x,e.b=this._sx*this.scale._x,e.c=this._cy*this.scale._y,e.d=this._sy*this.scale._y,e.tx=this.position._x-(this.pivot._x*e.a+this.pivot._y*e.c),e.ty=this.position._y-(this.pivot._x*e.b+this.pivot._y*e.d),this._currentLocalID=this._localID,this._parentID=-1)},t.prototype.updateTransform=function(a){var t=this.localTransform;if(this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale._x,t.b=this._sx*this.scale._x,t.c=this._cy*this.scale._y,t.d=this._sy*this.scale._y,t.tx=this.position._x-(this.pivot._x*t.a+this.pivot._y*t.c),t.ty=this.position._y-(this.pivot._x*t.b+this.pivot._y*t.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==a._worldID){var e=a.worldTransform,r=this.worldTransform;r.a=t.a*e.a+t.b*e.c,r.b=t.a*e.b+t.b*e.d,r.c=t.c*e.a+t.d*e.c,r.d=t.c*e.b+t.d*e.d,r.tx=t.tx*e.a+t.ty*e.c+e.tx,r.ty=t.tx*e.b+t.ty*e.d+e.ty,this._parentID=a._worldID,this._worldID++}},t.prototype.setFromMatrix=function(e){e.decompose(this),this._localID++},o(t,[{key:"rotation",get:function(){return this._rotation},set:function(e){this._rotation!==e&&(this._rotation=e,this.updateSkew())}}]),t}(s.default);e.default=u},{"../math":70,"./TransformBase":51}],53:[function(I,t,e){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function D(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function i(r,t){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:r}function n(r,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(r,t):r.__proto__=t)}e.__esModule=!0;var o=I("../display/Container"),a=r(o),s=I("../textures/RenderTexture"),u=r(s),l=I("../textures/Texture"),c=r(l),d=I("./GraphicsData"),f=r(d),p=I("../sprites/Sprite"),v=r(p),g=I("../math"),L=I("../utils"),k=I("../const"),m=I("../display/Bounds"),_=r(m),b=I("./utils/bezierCurveTo"),B=r(b),N=I("../renderers/canvas/CanvasRenderer"),E=r(N),S=new g.Matrix,M=new g.Point,P=new Float32Array(4),F=new Float32Array(4),R=function(a){function b(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];D(this,b);var t=i(this,a.call(this));return t.fillAlpha=1,t.lineWidth=0,t.nativeLines=e,t.lineColor=0,t.lineAlignment=.5,t.graphicsData=[],t.tint=16777215,t._prevTint=16777215,t.blendMode=k.BLEND_MODES.NORMAL,t.currentPath=null,t._webGL={},t.isMask=!1,t.boundsPadding=0,t._localBounds=new _.default,t.dirty=0,t.fastRectDirty=-1,t.clearDirty=0,t.boundsDirty=-1,t.cachedSpriteDirty=!1,t._spriteRect=null,t._fastRect=!1,t._prevRectTint=null,t._prevRectFillColor=null,t}return n(b,a),b.prototype.clone=function(){var e=new b;e.renderable=this.renderable,e.fillAlpha=this.fillAlpha,e.lineWidth=this.lineWidth,e.lineColor=this.lineColor,e.lineAlignment=this.lineAlignment,e.tint=this.tint,e.blendMode=this.blendMode,e.isMask=this.isMask,e.boundsPadding=this.boundsPadding,e.dirty=0,e.cachedSpriteDirty=this.cachedSpriteDirty;for(var t=0;t<this.graphicsData.length;++t)e.graphicsData.push(this.graphicsData[t].clone());return e.currentPath=e.graphicsData[e.graphicsData.length-1],e.updateLocalBounds(),e},b.prototype._quadraticCurveLength=function(m,t,e,r,n,i){var o=m-2*e+n,s=t-2*r+i,a=2*e-2*m,u=2*r-2*t,_=4*(o*o+s*s),l=4*(o*a+s*u),c=a*a+u*u,d=2*z(_+l+c),f=z(_),p=2*_*f,b=2*z(c),g=l/f;return(p*d+f*l*(d-b)+(4*c*_-l*l)*Math.log((2*f+g+d)/(g+b)))/(4*p)},b.prototype._bezierCurveLength=function(T,t,e,r,n,i,o,s){for(var a=0,S=0,E=0,C=0,P=0,A=0,M=0,R=0,O=0,I=0,D=0,L=T,k=t,B=1;10>=B;++B)S=B/10,E=S*S,C=E*S,P=1-S,A=P*P,M=A*P,R=M*T+3*A*S*e+3*P*E*n+C*o,O=M*t+3*A*S*r+3*P*E*i+C*s,I=L-R,D=k-O,L=R,k=O,a+=z(I*I+D*D);return a},b.prototype._segmentsCount=function(e){var t=C(e/b.CURVES.maxLength);return t<b.CURVES.minSegments?t=b.CURVES.minSegments:t>b.CURVES.maxSegments&&(t=b.CURVES.maxSegments),t},b.prototype.lineStyle=function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:.5;if(this.lineWidth=a,this.lineColor=t,this.lineAlpha=e,this.lineAlignment=r,this.currentPath)if(this.currentPath.shape.points.length){var n=new g.Polygon(this.currentPath.shape.points.slice(-2));n.closed=!1,this.drawShape(n)}else this.currentPath.lineWidth=this.lineWidth,this.currentPath.lineColor=this.lineColor,this.currentPath.lineAlpha=this.lineAlpha,this.currentPath.lineAlignment=this.lineAlignment;return this},b.prototype.moveTo=function(n,t){var e=new g.Polygon([n,t]);return e.closed=!1,this.drawShape(e),this},b.prototype.lineTo=function(a,t){var e=this.currentPath.shape.points,r=e[e.length-2],n=e[e.length-1];return r===a&&n===t||(e.push(a,t),this.dirty++),this},b.prototype.quadraticCurveTo=function(e,t,r,n){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var i=this.currentPath.shape.points,o=0,p=0;0===i.length&&this.moveTo(0,0);for(var f=i[i.length-2],u=i[i.length-1],g=b.CURVES.adaptive?this._segmentsCount(this._quadraticCurveLength(f,u,e,t,r,n)):20,l=1,m;l<=g;++l)m=l/g,o=f+(e-f)*m,p=u+(t-u)*m,i.push(o+(e+(r-e)*m-o)*m,p+(t+(n-t)*m-p)*m);return this.dirty++,this},b.prototype.bezierCurveTo=function(e,t,r,n,i,o){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var s=this.currentPath.shape.points,a=s[s.length-2],d=s[s.length-1];s.length-=2;var u=b.CURVES.adaptive?this._segmentsCount(this._bezierCurveLength(a,d,e,t,r,n,i,o)):20;return(0,B.default)(a,d,e,t,r,n,i,o,u,s),this.dirty++,this},b.prototype.arcTo=function(S,t,e,r,n){this.currentPath?0===this.currentPath.shape.points.length&&this.currentPath.shape.points.push(S,t):this.moveTo(S,t);var i=this.currentPath.shape.points,o=i[i.length-2],s=i[i.length-1],a=s-t,u=o-S,E=r-t,l=e-S,c=ee(a*l-u*E);if(1e-8>c||0===n)i[i.length-2]===S&&i[i.length-1]===t||i.push(S,t);else{var d=a*a+u*u,f=E*E+l*l,p=a*E+u*l,v=n*z(d)/c,g=n*z(f)/c,C=v*p/d,m=g*p/f,_=v*l+g*u,b=v*E+g*a,P=T(a*(g+C)-b,u*(g+C)-_),A=T(E*(v+m)-b,l*(v+m)-_);this.arc(_+S,b+t,n,P,A,u*E>l*a)}return this.dirty++,this},b.prototype.arc=function(e,t,r,n,_){var v=5<arguments.length&&void 0!==arguments[5]&&arguments[5];if(n===_)return this;!v&&_<=n?_+=k.PI_2:v&&n<=_&&(n+=k.PI_2);var s=_-n,a=b.CURVES.adaptive?this._segmentsCount(ee(s)*r):40*C(ee(s)/k.PI_2);if(0==s)return this;var u=e+K(n)*r,P=t+q(n)*r,l=this.currentPath?this.currentPath.shape.points:null;if(l){var A=ee(l[l.length-2]-u),d=ee(l[l.length-1]-P);.001>A&&.001>d||l.push(u,P)}else this.moveTo(u,P),l=this.currentPath.shape.points;for(var f=s/(2*a),p=K(f),g=q(f),M=a-1,m=0;m<=M;++m){var R=m+M%1/M*m,T=f+n+2*f*R,O=K(T),E=-q(T);l.push((p*O+g*E)*r+e,(p*-E+g*O)*r+t)}return this.dirty++,this},b.prototype.beginFill=function(){var r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;return this.filling=!0,this.fillColor=r,this.fillAlpha=t,this.currentPath&&2>=this.currentPath.shape.points.length&&(this.currentPath.fill=this.filling,this.currentPath.fillColor=this.fillColor,this.currentPath.fillAlpha=this.fillAlpha),this},b.prototype.endFill=function(){return this.filling=!1,this.fillColor=null,this.fillAlpha=1,this},b.prototype.drawRect=function(a,t,e,r){return this.drawShape(new g.Rectangle(a,t,e,r)),this},b.prototype.drawRoundedRect=function(a,t,e,r,n){return this.drawShape(new g.RoundedRectangle(a,t,e,r,n)),this},b.prototype.drawCircle=function(n,t,e){return this.drawShape(new g.Circle(n,t,e)),this},b.prototype.drawEllipse=function(a,t,e,r){return this.drawShape(new g.Ellipse(a,t,e,r)),this},b.prototype.drawPolygon=function(a){var t=a,o=!0;if(t instanceof g.Polygon&&(o=t.closed,t=t.points),!Array.isArray(t)){t=Array(arguments.length);for(var s=0;s<t.length;++s)t[s]=arguments[s]}var l=new g.Polygon(t);return l.closed=o,this.drawShape(l),this},b.prototype.drawStar=function(s,t,e,r,n){var p=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0;n=n||r/2;for(var o=2*e,a=k.PI_2/o,u=[],f=0;f<o;f++){var g=f%2?n:r,c=f*a+(-1*Z/2+p);u.push(s+g*K(c),t+g*q(c))}return this.drawPolygon(u)},b.prototype.clear=function(){return(this.lineWidth||this.filling||0<this.graphicsData.length)&&(this.lineWidth=0,this.lineAlignment=.5,this.filling=!1,this.boundsDirty=-1,this.canvasTintDirty=-1,this.dirty++,this.clearDirty++,this.graphicsData.length=0),this.currentPath=null,this._spriteRect=null,this},b.prototype.isFastRect=function(){return 1===this.graphicsData.length&&this.graphicsData[0].shape.type===k.SHAPES.RECT&&!this.graphicsData[0].lineWidth},b.prototype._renderWebGL=function(e){this.dirty!==this.fastRectDirty&&(this.fastRectDirty=this.dirty,this._fastRect=this.isFastRect()),this._fastRect?this._renderSpriteRect(e):(e.setObjectRenderer(e.plugins.graphics),e.plugins.graphics.render(this))},b.prototype._renderSpriteRect=function(a){var t=this.graphicsData[0].shape;this._spriteRect||(this._spriteRect=new v.default(new c.default(c.default.WHITE)));var e=this._spriteRect,r=this.graphicsData[0].fillColor;if(16777215===this.tint)e.tint=r;else if(this.tint!==this._prevRectTint||r!==this._prevRectFillColor){var n=P,i=F;(0,L.hex2rgb)(r,n),(0,L.hex2rgb)(this.tint,i),n[0]*=i[0],n[1]*=i[1],n[2]*=i[2],e.tint=(0,L.rgb2hex)(n),this._prevRectTint=this.tint,this._prevRectFillColor=r}e.alpha=this.graphicsData[0].fillAlpha,e.worldAlpha=this.worldAlpha*e.alpha,e.blendMode=this.blendMode,e._texture._frame.width=t.width,e._texture._frame.height=t.height,e.transform.worldTransform=this.transform.worldTransform,e.anchor.set(-t.x/t.width,-t.y/t.height),e._onAnchorUpdate(),e._renderWebGL(a)},b.prototype._renderCanvas=function(e){!0!==this.isMask&&e.plugins.graphics.render(this)},b.prototype._calculateBounds=function(){this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.updateLocalBounds(),this.cachedSpriteDirty=!0);var e=this._localBounds;this._bounds.addFrame(this.transform,e.minX,e.minY,e.maxX,e.maxY)},b.prototype.containsPoint=function(a){this.worldTransform.applyInverse(a,M);for(var t=this.graphicsData,e=0,l;e<t.length;++e)if(l=t[e],l.fill&&l.shape&&l.shape.contains(M.x,M.y)){var d=!1;if(l.holes)for(var u=0,p;u<l.holes.length;u++)if(p=l.holes[u],p.contains(M.x,M.y)){d=!0;break}if(!d)return!0}return!1},b.prototype.updateLocalBounds=function(){var _=1/0,C=-1/0,P=1/0,A=-1/0;if(this.graphicsData.length)for(var M=0,R=0,I=0,D=0,L=0,B=0;B<this.graphicsData.length;B++){var N=this.graphicsData[B],l=N.type,c=N.lineWidth,d=N.lineAlignment,f=c*d;if(M=N.shape,l===k.SHAPES.RECT||l===k.SHAPES.RREC)R=M.x-f,I=M.y-f,D=M.width+2*f,L=M.height+2*f,_=R<_?R:_,C=R+D>C?R+D:C,P=I<P?I:P,A=I+L>A?I+L:A;else if(l===k.SHAPES.CIRC)R=M.x,I=M.y,D=M.radius+f,L=M.radius+f,_=R-D<_?R-D:_,C=R+D>C?R+D:C,P=I-L<P?I-L:P,A=I+L>A?I+L:A;else if(l===k.SHAPES.ELIP)R=M.x,I=M.y,D=M.width+f,L=M.height+f,_=R-D<_?R-D:_,C=R+D>C?R+D:C,P=I-L<P?I-L:P,A=I+L>A?I+L:A;else for(var p=M.points,v=0,F=0,U=0,X=0,W=0,G=0,Y=0,V=0,H=0;H+2<p.length;H+=2)R=p[H],I=p[H+1],v=p[H+2],F=p[H+3],U=ee(v-R),X=ee(F-I),L=2*f,1e-9>(D=z(U*U+X*X))||(W=(L/D*X+U)/2,G=(L/D*U+X)/2,Y=(v+R)/2,V=(F+I)/2,_=Y-W<_?Y-W:_,C=Y+W>C?Y+W:C,P=V-G<P?V-G:P,A=V+G>A?V+G:A)}else _=0,C=0,P=0,A=0;var j=this.boundsPadding;this._localBounds.minX=_-j,this._localBounds.maxX=C+j,this._localBounds.minY=P-j,this._localBounds.maxY=A+j},b.prototype.drawShape=function(r){this.currentPath&&2>=this.currentPath.shape.points.length&&this.graphicsData.pop(),this.currentPath=null;var t=new f.default(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,this.nativeLines,r,this.lineAlignment);return this.graphicsData.push(t),t.type===k.SHAPES.POLY&&(t.shape.closed=t.shape.closed,this.currentPath=t),this.dirty++,t},b.prototype.generateCanvasTexture=function(a){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,e=this.getLocalBounds(),r=u.default.create(e.width,e.height,a,t);A||(A=new E.default),this.transform.updateLocalTransform(),this.transform.localTransform.copy(S),S.invert(),S.tx-=e.x,S.ty-=e.y,A.render(this,r,!0,S);var n=c.default.fromCanvas(r.baseTexture._canvasRenderTarget.canvas,a,"graphics");return n.baseTexture.resolution=t,n.baseTexture.update(),n},b.prototype.closePath=function(){var e=this.currentPath;return e&&e.shape&&e.shape.close(),this},b.prototype.addHole=function(){var e=this.graphicsData.pop();return this.currentPath=this.graphicsData[this.graphicsData.length-1],this.currentPath.addHole(e.shape),this.currentPath=null,this},b.prototype.destroy=function(t){a.prototype.destroy.call(this,t);for(var e=0;e<this.graphicsData.length;++e)this.graphicsData[e].destroy();for(var o in this._webGL)for(var n=0;n<this._webGL[o].data.length;++n)this._webGL[o].data[n].destroy();this._spriteRect&&this._spriteRect.destroy(),this.graphicsData=null,this.currentPath=null,this._webGL=null,this._localBounds=null},b}(a.default),A;e.default=R,R._SPRITE_TEXTURE=null,R.CURVES={adaptive:!1,maxLength:10,minSegments:8,maxSegments:2048}},{"../const":46,"../display/Bounds":47,"../display/Container":48,"../math":70,"../renderers/canvas/CanvasRenderer":77,"../sprites/Sprite":102,"../textures/RenderTexture":113,"../textures/Texture":115,"../utils":125,"./GraphicsData":54,"./utils/bezierCurveTo":56}],54:[function(a,t,e){"use strict";function d(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function n(t,e,r,i,o,s,a,u,p){d(this,n),this.lineWidth=t,this.lineAlignment=p,this.nativeLines=a,this.lineColor=e,this.lineAlpha=r,this._lineTint=e,this.fillColor=i,this.fillAlpha=o,this._fillTint=i,this.fill=s,this.holes=[],this.shape=u,this.type=u.type}return n.prototype.clone=function(){return new n(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.nativeLines,this.shape,this.lineAlignment)},n.prototype.addHole=function(e){this.holes.push(e)},n.prototype.destroy=function(){this.shape=null,this.holes=null},n}();e.default=r},{}],55:[function(l,t,e){"use strict";function r(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var n=l("../../renderers/canvas/CanvasRenderer"),i=function(e){return e&&e.__esModule?e:{default:e}}(n),o=l("../../const"),s=function(){function n(t){r(this,n),this.renderer=t}return n.prototype.render=function(s){var t=this.renderer,e=t.context,r=s.worldAlpha,n=s.transform.worldTransform,i=t.resolution;e.setTransform(n.a*i,n.b*i,n.c*i,n.d*i,n.tx*i,n.ty*i),s.canvasTintDirty===s.dirty&&s._prevTint===s.tint||this.updateGraphicsTint(s),t.setBlendMode(s.blendMode);for(var U=0;U<s.graphicsData.length;U++){var X=s.graphicsData[U],u=X.shape,W=X._fillTint,l=X._lineTint;if(e.lineWidth=X.lineWidth,X.type===o.SHAPES.POLY){e.beginPath();var c=u.points,G=X.holes,f=void 0,Y=void 0,V=void 0,H=void 0;e.moveTo(c[0],c[1]);for(var z=2;z<c.length;z+=2)e.lineTo(c[z],c[z+1]);if(u.closed&&e.closePath(),0<G.length){f=0,V=c[0],H=c[1];for(var q=2;q+2<c.length;q+=2)f+=(c[q]-V)*(c[q+3]-H)-(c[q+2]-V)*(c[q+1]-H);for(var K=0;K<G.length;K++)if(c=G[K].points){Y=0,V=c[0],H=c[1];for(var J=2;J+2<c.length;J+=2)Y+=(c[J]-V)*(c[J+3]-H)-(c[J+2]-V)*(c[J+1]-H);if(0>Y*f){e.moveTo(c[0],c[1]);for(var $=2;$<c.length;$+=2)e.lineTo(c[$],c[$+1])}else{e.moveTo(c[c.length-2],c[c.length-1]);for(var ee=c.length-4;0<=ee;ee-=2)e.lineTo(c[ee],c[ee+1])}G[K].close&&e.closePath()}}X.fill&&(e.globalAlpha=X.fillAlpha*r,e.fillStyle="#"+("00000"+(0|W).toString(16)).substr(-6),e.fill()),X.lineWidth&&(e.globalAlpha=X.lineAlpha*r,e.strokeStyle="#"+("00000"+(0|l).toString(16)).substr(-6),e.stroke())}else if(X.type===o.SHAPES.RECT)(X.fillColor||0===X.fillColor)&&(e.globalAlpha=X.fillAlpha*r,e.fillStyle="#"+("00000"+(0|W).toString(16)).substr(-6),e.fillRect(u.x,u.y,u.width,u.height)),X.lineWidth&&(e.globalAlpha=X.lineAlpha*r,e.strokeStyle="#"+("00000"+(0|l).toString(16)).substr(-6),e.strokeRect(u.x,u.y,u.width,u.height));else if(X.type===o.SHAPES.CIRC)e.beginPath(),e.arc(u.x,u.y,u.radius,0,2*Z),e.closePath(),X.fill&&(e.globalAlpha=X.fillAlpha*r,e.fillStyle="#"+("00000"+(0|W).toString(16)).substr(-6),e.fill()),X.lineWidth&&(e.globalAlpha=X.lineAlpha*r,e.strokeStyle="#"+("00000"+(0|l).toString(16)).substr(-6),e.stroke());else if(X.type===o.SHAPES.ELIP){var te=2*u.width,E=2*u.height,S=u.x-te/2,O=u.y-E/2;e.beginPath();var M=.5522848*(te/2),P=.5522848*(E/2),C=S+te,R=O+E,A=S+te/2,I=O+E/2;e.moveTo(S,I),e.bezierCurveTo(S,I-P,A-M,O,A,O),e.bezierCurveTo(A+M,O,C,I-P,C,I),e.bezierCurveTo(C,I+P,A+M,R,A,R),e.bezierCurveTo(A-M,R,S,I+P,S,I),e.closePath(),X.fill&&(e.globalAlpha=X.fillAlpha*r,e.fillStyle="#"+("00000"+(0|W).toString(16)).substr(-6),e.fill()),X.lineWidth&&(e.globalAlpha=X.lineAlpha*r,e.strokeStyle="#"+("00000"+(0|l).toString(16)).substr(-6),e.stroke())}else if(X.type===o.SHAPES.RREC){var D=u.x,L=u.y,N=u.width,B=u.height,k=u.radius,re=0|Q(N,B)/2;k=k>re?re:k,e.beginPath(),e.moveTo(D,L+k),e.lineTo(D,L+B-k),e.quadraticCurveTo(D,L+B,D+k,L+B),e.lineTo(D+N-k,L+B),e.quadraticCurveTo(D+N,L+B,D+N,L+B-k),e.lineTo(D+N,L+k),e.quadraticCurveTo(D+N,L,D+N-k,L),e.lineTo(D+k,L),e.quadraticCurveTo(D,L,D,L+k),e.closePath(),(X.fillColor||0===X.fillColor)&&(e.globalAlpha=X.fillAlpha*r,e.fillStyle="#"+("00000"+(0|W).toString(16)).substr(-6),e.fill()),X.lineWidth&&(e.globalAlpha=X.lineAlpha*r,e.strokeStyle="#"+("00000"+(0|l).toString(16)).substr(-6),e.stroke())}}},n.prototype.updateGraphicsTint=function(l){l._prevTint=l.tint,l.canvasTintDirty=l.dirty;for(var t=(255&l.tint>>16)/255,e=(255&l.tint>>8)/255,r=(255&l.tint)/255,n=0;n<l.graphicsData.length;++n){var d=l.graphicsData[n],o=0|d.fillColor,s=0|d.lineColor;d._fillTint=(255*((255&o>>16)/255*t)<<16)+(255*((255&o>>8)/255*e)<<8)+255*((255&o)/255*r),d._lineTint=(255*((255&s>>16)/255*t)<<16)+(255*((255&s>>8)/255*e)<<8)+255*((255&s)/255*r)}},n.prototype.renderPolygon=function(a,t,e){e.moveTo(a[0],a[1]);for(var r=1;r<a.length/2;++r)e.lineTo(a[2*r],a[2*r+1]);t&&e.closePath()},n.prototype.destroy=function(){this.renderer=null},n}();e.default=s,i.default.registerPlugin("graphics",s)},{"../../const":46,"../../renderers/canvas/CanvasRenderer":77}],56:[function(a,t,e){"use strict";function r(m,t,e,r,n,i,o,s,a){var u=9<arguments.length&&void 0!==arguments[9]?arguments[9]:[],_=0,b=0,T=0,S=0,E=0;u.push(m,t);for(var C=1,P=0;C<=a;++C)P=C/a,_=1-P,b=_*_,T=b*_,S=P*P,E=S*P,u.push(T*m+3*b*P*e+3*_*S*n+E*o,T*t+3*b*P*r+3*_*S*i+E*s);return u}e.__esModule=!0,e.default=r},{}],57:[function(C,t,e){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function P(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function i(r,t){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:r}function n(r,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(r,t):r.__proto__=t)}e.__esModule=!0;var o=C("../../utils"),A=C("../../const"),a=C("../../renderers/webgl/utils/ObjectRenderer"),s=r(a),l=C("../../renderers/webgl/WebGLRenderer"),u=r(l),d=C("./WebGLGraphicsData"),c=r(d),p=C("./shaders/PrimitiveShader"),f=r(p),g=C("./utils/buildPoly"),v=r(g),m=C("./utils/buildRectangle"),_=r(m),b=C("./utils/buildRoundedRectangle"),M=r(b),T=C("./utils/buildCircle"),R=r(T),E=function(a){function t(e){P(this,t);var r=i(this,a.call(this,e));return r.graphicsDataPool=[],r.primitiveShader=null,r.gl=e.gl,r.CONTEXT_UID=0,r}return n(t,a),t.prototype.onContextChange=function(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.primitiveShader=new f.default(this.gl)},t.prototype.destroy=function(){s.default.prototype.destroy.call(this);for(var e=0;e<this.graphicsDataPool.length;++e)this.graphicsDataPool[e].destroy();this.graphicsDataPool=null},t.prototype.render=function(a){var t=this.renderer,e=t.gl,r=a._webGL[this.CONTEXT_UID],l;r&&a.dirty===r.dirty||(this.updateGraphics(a),r=a._webGL[this.CONTEXT_UID]);var d=this.primitiveShader;t.bindShader(d),t.state.setBlendMode(a.blendMode);for(var p=0,c=r.data.length;p<c;p++){l=r.data[p];var u=l.shader;t.bindShader(u),u.uniforms.translationMatrix=a.transform.worldTransform.toArray(!0),u.uniforms.tint=(0,o.hex2rgb)(a.tint),u.uniforms.alpha=a.worldAlpha,t.bindVao(l.vao),l.nativeLines?e.drawArrays(e.LINES,0,l.points.length/6):l.vao.draw(e.TRIANGLE_STRIP,l.indices.length)}},t.prototype.updateGraphics=function(l){var t=this.renderer.gl,e=l._webGL[this.CONTEXT_UID];if(e||(e=l._webGL[this.CONTEXT_UID]={lastIndex:0,data:[],gl:t,clearDirty:-1,dirty:-1}),e.dirty=l.dirty,l.clearDirty!==e.clearDirty){e.clearDirty=l.clearDirty;for(var d=0;d<e.data.length;d++)this.graphicsDataPool.push(e.data[d]);e.data.length=0,e.lastIndex=0}for(var u=void 0,p=void 0,c=e.lastIndex,f;c<l.graphicsData.length;c++)f=l.graphicsData[c],u=this.getWebGLData(e,0),f.nativeLines&&f.lineWidth&&(p=this.getWebGLData(e,0,!0),e.lastIndex++),f.type===A.SHAPES.POLY&&(0,v.default)(f,u,p),f.type===A.SHAPES.RECT?(0,_.default)(f,u,p):f.type===A.SHAPES.CIRC||f.type===A.SHAPES.ELIP?(0,R.default)(f,u,p):f.type===A.SHAPES.RREC&&(0,M.default)(f,u,p),e.lastIndex++;this.renderer.bindVao(null);for(var g=0;g<e.data.length;g++)u=e.data[g],u.dirty&&u.upload()},t.prototype.getWebGLData=function(a,t,e){var r=a.data[a.data.length-1];return(!r||r.nativeLines!==e||32e4<r.points.length)&&(r=this.graphicsDataPool.pop()||new c.default(this.renderer.gl,this.primitiveShader,this.renderer.state.attribsState),r.nativeLines=e,r.reset(t),a.data.push(r)),r.dirty=!0,r},t}(s.default);e.default=E,u.default.registerPlugin("graphics",E)},{"../../const":46,"../../renderers/webgl/WebGLRenderer":84,"../../renderers/webgl/utils/ObjectRenderer":94,"../../utils":125,"./WebGLGraphicsData":58,"./shaders/PrimitiveShader":59,"./utils/buildCircle":60,"./utils/buildPoly":62,"./utils/buildRectangle":63,"./utils/buildRoundedRectangle":64}],58:[function(a,t,e){"use strict";function l(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=a("pixi-gl-core"),n=function(e){return e&&e.__esModule?e:{default:e}}(r),o=function(){function a(t,e,r){l(this,a),this.gl=t,this.color=[0,0,0],this.points=[],this.indices=[],this.buffer=n.default.GLBuffer.createVertexBuffer(t),this.indexBuffer=n.default.GLBuffer.createIndexBuffer(t),this.dirty=!0,this.nativeLines=!1,this.glPoints=null,this.glIndices=null,this.shader=e,this.vao=new n.default.VertexArrayObject(t,r).addIndex(this.indexBuffer).addAttribute(this.buffer,e.attributes.aVertexPosition,t.FLOAT,!1,24,0).addAttribute(this.buffer,e.attributes.aColor,t.FLOAT,!1,24,8)}return a.prototype.reset=function(){this.points.length=0,this.indices.length=0},a.prototype.upload=function(){this.glPoints=new Float32Array(this.points),this.buffer.upload(this.glPoints),this.glIndices=new Uint16Array(this.indices),this.indexBuffer.upload(this.glIndices),this.dirty=!1},a.prototype.destroy=function(){this.color=null,this.points=null,this.indices=null,this.vao.destroy(),this.buffer.destroy(),this.indexBuffer.destroy(),this.gl=null,this.buffer=null,this.indexBuffer=null,this.glPoints=null,this.glIndices=null},a}();e.default=o},{"pixi-gl-core":15}],59:[function(l,t,e){"use strict";function d(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function n(r,t){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:r}function r(r,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(r,t):r.__proto__=t)}e.__esModule=!0;var o=l("../../../Shader"),i=function(e){return e&&e.__esModule?e:{default:e}}(o),a=function(a){function t(e){return d(this,t),n(this,a.call(this,e,"attribute vec2 aVertexPosition;\nattribute vec4 aColor;\nuniform mat3 translationMatrix;\nuniform mat3 projectionMatrix;\nuniform float alpha;\nuniform vec3 tint;\nvarying vec4 vColor;\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vColor = aColor * vec4(tint * alpha, alpha);\n}","varying vec4 vColor;\nvoid main(void){\n   gl_FragColor = vColor;\n}"))}return r(t,a),t}(i.default);e.default=a},{"../../../Shader":44}],60:[function(l,t,e){"use strict";function r(a,t,e){var r=a.shape,n=r.x,i=r.y,u,S;if(a.type===o.SHAPES.CIRC?(u=r.radius,S=r.radius):(u=r.width,S=r.height),0!==u&&0!==S){var E=J(30*z(r.radius))||J(15*z(r.width+r.height)),c=2*Z/E;if(a.fill){var d=(0,s.hex2rgb)(a.fillColor),f=a.fillAlpha,C=d[0]*f,v=d[1]*f,g=d[2]*f,P=t.points,m=t.indices,_=P.length/6;m.push(_);for(var A=0;A<E+1;A++)P.push(n,i,C,v,g,f),P.push(n+q(c*A)*u,i+K(c*A)*S,C,v,g,f),m.push(_++,_++);m.push(_-1)}if(a.lineWidth){var M=a.points;a.points=[];for(var T=0;T<E;T++)a.points.push(n+q(c*-T)*u,i+K(c*-T)*S);a.points.push(a.points[0],a.points[1]),(0,p.default)(a,t,e),a.points=M}}}e.__esModule=!0,e.default=r;var n=l("./buildLine"),p=function(e){return e&&e.__esModule?e:{default:e}}(n),o=l("../../../const"),s=l("../../../utils")},{"../../../const":46,"../../../utils":125,"./buildLine":61}],61:[function(a,t,e){"use strict";function l(o,t){var e=o.points;if(0!==e.length){var s=new q.Point(e[0],e[1]),n=new q.Point(e[e.length-2],e[e.length-1]);if(s.x===n.x&&s.y===n.y){e=e.slice(),e.pop(),e.pop(),n=new q.Point(e[e.length-2],e[e.length-1]);var Z=n.x+.5*(s.x-n.x),a=n.y+.5*(s.y-n.y);e.unshift(Z,a),e.push(Z,a)}var u=t.points,J=t.indices,l=e.length/2,c=e.length,Q=u.length/6,$=o.lineWidth/2,p=(0,K.hex2rgb)(o.lineColor),v=o.lineAlpha,g=p[0]*v,te=p[1]*v,m=p[2]*v,_=e[0],re=e[1],ne=e[2],ae=e[3],oe=0,ie=0,se=-(re-ae),le=_-ne,de=0,ue=0,pe=0,ce=0,he=z(se*se+le*le);se/=he,le/=he,se*=$,le*=$;var fe=o.lineAlignment,D=2*(1-fe),L=2*fe;u.push(_-se*D,re-le*D,g,te,m,v),u.push(_+se*L,re+le*L,g,te,m,v);for(var N=1;N<l-1;++N){_=e[2*(N-1)],re=e[2*(N-1)+1],ne=e[2*N],ae=e[2*N+1],oe=e[2*(N+1)],ie=e[2*(N+1)+1],se=-(re-ae),le=_-ne,he=z(se*se+le*le),se/=he,le/=he,se*=$,le*=$,de=-(ae-ie),ue=ne-oe,he=z(de*de+ue*ue),de/=he,ue/=he,de*=$,ue*=$;var ge=-le+re-(-le+ae),k=-se+ne-(-se+_),F=(-se+_)*(-le+ae)-(-se+ne)*(-le+re),j=-ue+ie-(-ue+ae),U=-de+ne-(-de+oe),X=(-de+oe)*(-ue+ae)-(-de+ne)*(-ue+ie),G=ge*U-j*k;if(.1>ee(G))G+=10.1,u.push(ne-se*D,ae-le*D,g,te,m,v),u.push(ne+se*L,ae+le*L,g,te,m,v);else{var me=(k*X-U*F)/G,H=(j*F-ge*X)/G;(me-ne)*(me-ne)+(H-ae)*(H-ae)>196*$*$?(pe=se-de,ce=le-ue,he=z(pe*pe+ce*ce),pe/=he,ce/=he,pe*=$,ce*=$,u.push(ne-pe*D,ae-ce*D),u.push(g,te,m,v),u.push(ne+pe*L,ae+ce*L),u.push(g,te,m,v),u.push(ne-pe*L*D,ae-ce*D),u.push(g,te,m,v),c++):(u.push(ne+(me-ne)*D,ae+(H-ae)*D),u.push(g,te,m,v),u.push(ne-(me-ne)*L,ae-(H-ae)*L),u.push(g,te,m,v))}}_=e[2*(l-2)],re=e[2*(l-2)+1],ne=e[2*(l-1)],ae=e[2*(l-1)+1],se=-(re-ae),le=_-ne,he=z(se*se+le*le),se/=he,le/=he,se*=$,le*=$,u.push(ne-se*D,ae-le*D),u.push(g,te,m,v),u.push(ne+se*L,ae+le*L),u.push(g,te,m,v),J.push(Q);for(var Y=0;Y<c;++Y)J.push(Q++);J.push(Q-1)}}function n(s,t){var e=0,g=s.points;if(0!==g.length){var n=t.points,i=g.length/2,o=(0,K.hex2rgb)(s.lineColor),a=s.lineAlpha,u=o[0]*a,m=o[1]*a,l=o[2]*a;for(e=1;e<i;e++){var c=g[2*(e-1)],d=g[2*(e-1)+1],f=g[2*e],p=g[2*e+1];n.push(c,d),n.push(u,m,l,a),n.push(f,p),n.push(u,m,l,a)}}}e.__esModule=!0,e.default=function(a,t,e){a.nativeLines?n(a,e):l(a,t)};var q=a("../../../math"),K=a("../../../utils")},{"../../../math":70,"../../../utils":125}],62:[function(l,t,e){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(a,t,e){a.points=a.shape.points.slice();var r=a.points;if(a.fill&&6<=r.length){for(var C=[],i=a.holes,o=0,P;o<i.length;o++)P=i[o],C.push(r.length/2),r=r.concat(P.points);var A=t.points,c=t.indices,d=r.length/2,f=(0,s.hex2rgb)(a.fillColor),p=a.fillAlpha,v=f[0]*p,g=f[1]*p,M=f[2]*p,m=(0,E.default)(r,C,2);if(!m)return;for(var _=A.length/6,b=0;b<m.length;b+=3)c.push(m[b]+_),c.push(m[b]+_),c.push(m[b+1]+_),c.push(m[b+2]+_),c.push(m[b+2]+_);for(var R=0;R<d;R++)A.push(r[2*R],r[2*R+1],v,g,M,p)}0<a.lineWidth&&(0,S.default)(a,t,e)}e.__esModule=!0,e.default=n;var i=l("./buildLine"),S=r(i),s=l("../../../utils"),a=l("earcut"),E=r(a)},{"../../../utils":125,"./buildLine":61,earcut:2}],63:[function(a,t,e){"use strict";function r(s,t,e){var r=s.shape,n=r.x,i=r.y,a=r.width,u=r.height;if(s.fill){var _=(0,o.hex2rgb)(s.fillColor),b=s.fillAlpha,c=_[0]*b,d=_[1]*b,f=_[2]*b,p=t.points,T=t.indices,g=p.length/6;p.push(n,i),p.push(c,d,f,b),p.push(n+a,i),p.push(c,d,f,b),p.push(n,i+u),p.push(c,d,f,b),p.push(n+a,i+u),p.push(c,d,f,b),T.push(g,g,g+1,g+2,g+3,g+3)}if(s.lineWidth){var v=s.points;s.points=[n,i,n+a,i,n+a,i+u,n,i+u,n,i],(0,l.default)(s,t,e),s.points=v}}e.__esModule=!0,e.default=r;var n=a("./buildLine"),l=function(e){return e&&e.__esModule?e:{default:e}}(n),o=a("../../../utils")},{"../../../utils":125,"./buildLine":61}],64:[function(d,t,e){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(u,t,e){var r=u.shape,n=r.x,i=r.y,o=r.width,c=r.height,P=r.radius,d=[];if(d.push(n+P,i),C(n+o-P,i,n+o,i,n+o,i+P,d),C(n+o,i+c-P,n+o,i+c,n+o-P,i+c,d),C(n+P,i+c,n,i+c,n,i+c-P,d),C(n,i+P,n,i,n+P+1e-10,i,d),u.fill){for(var f=(0,l.hex2rgb)(u.fillColor),p=u.fillAlpha,v=f[0]*p,g=f[1]*p,A=f[2]*p,m=t.points,_=t.indices,b=m.length/6,R=(0,a.default)(d,null,2),T=0,I=R.length;T<I;T+=3)_.push(R[T]+b),_.push(R[T]+b),_.push(R[T+1]+b),_.push(R[T+2]+b),_.push(R[T+2]+b);for(var E=0,D=d.length;E<D;E++)m.push(d[E],d[++E],v,g,A,p)}if(u.lineWidth){var O=u.points;u.points=d,(0,s.default)(u,t,e),u.points=O}}function m(n,t,e){return n+(t-n)*e}function C(o,t,e,r,n,i){for(var s=6<arguments.length&&void 0!==arguments[6]?arguments[6]:[],a=s,u=0,_=0,b=0,T=0,S=0,E=0,C=0,P=0;20>=C;++C)P=C/20,u=m(o,e,P),_=m(t,r,P),b=m(e,n,P),T=m(r,i,P),S=m(u,b,P),E=m(_,T,P),a.push(S,E);return a}e.__esModule=!0,e.default=n;var o=d("earcut"),a=r(o),i=d("./buildLine"),s=r(i),l=d("../../../utils")},{"../../../utils":125,"./buildLine":61,earcut:2}],65:[function($,t,e){"use strict";function r(n){if(n&&n.__esModule)return n;var t={};if(null!=n)for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t.default=n,t}function n(e){return e&&e.__esModule?e:{default:e}}e.__esModule=!0,e.autoDetectRenderer=e.Application=e.Filter=e.SpriteMaskFilter=e.Quad=e.RenderTarget=e.ObjectRenderer=e.WebGLManager=e.Shader=e.CanvasRenderTarget=e.TextureUvs=e.VideoBaseTexture=e.BaseRenderTexture=e.RenderTexture=e.BaseTexture=e.TextureMatrix=e.Texture=e.Spritesheet=e.CanvasGraphicsRenderer=e.GraphicsRenderer=e.GraphicsData=e.Graphics=e.TextMetrics=e.TextStyle=e.Text=e.SpriteRenderer=e.CanvasTinter=e.CanvasSpriteRenderer=e.Sprite=e.TransformBase=e.TransformStatic=e.Transform=e.Container=e.DisplayObject=e.Bounds=e.glCore=e.WebGLRenderer=e.CanvasRenderer=e.ticker=e.utils=e.settings=void 0;var i=$("./const");Object.keys(i).forEach(function(r){"default"!==r&&"__esModule"!==r&&Object.defineProperty(e,r,{enumerable:!0,get:function(){return i[r]}})});var o=$("./math");Object.keys(o).forEach(function(r){"default"!==r&&"__esModule"!==r&&Object.defineProperty(e,r,{enumerable:!0,get:function(){return o[r]}})});var s=$("pixi-gl-core");Object.defineProperty(e,"glCore",{enumerable:!0,get:function(){return n(s).default}});var a=$("./display/Bounds");Object.defineProperty(e,"Bounds",{enumerable:!0,get:function(){return n(a).default}});var u=$("./display/DisplayObject");Object.defineProperty(e,"DisplayObject",{enumerable:!0,get:function(){return n(u).default}});var ee=$("./display/Container");Object.defineProperty(e,"Container",{enumerable:!0,get:function(){return n(ee).default}});var l=$("./display/Transform");Object.defineProperty(e,"Transform",{enumerable:!0,get:function(){return n(l).default}});var c=$("./display/TransformStatic");Object.defineProperty(e,"TransformStatic",{enumerable:!0,get:function(){return n(c).default}});var d=$("./display/TransformBase");Object.defineProperty(e,"TransformBase",{enumerable:!0,get:function(){return n(d).default}});var f=$("./sprites/Sprite");Object.defineProperty(e,"Sprite",{enumerable:!0,get:function(){return n(f).default}});var p=$("./sprites/canvas/CanvasSpriteRenderer");Object.defineProperty(e,"CanvasSpriteRenderer",{enumerable:!0,get:function(){return n(p).default}});var v=$("./sprites/canvas/CanvasTinter");Object.defineProperty(e,"CanvasTinter",{enumerable:!0,get:function(){return n(v).default}});var g=$("./sprites/webgl/SpriteRenderer");Object.defineProperty(e,"SpriteRenderer",{enumerable:!0,get:function(){return n(g).default}});var te=$("./text/Text");Object.defineProperty(e,"Text",{enumerable:!0,get:function(){return n(te).default}});var m=$("./text/TextStyle");Object.defineProperty(e,"TextStyle",{enumerable:!0,get:function(){return n(m).default}});var _=$("./text/TextMetrics");Object.defineProperty(e,"TextMetrics",{enumerable:!0,get:function(){return n(_).default}});var b=$("./graphics/Graphics");Object.defineProperty(e,"Graphics",{enumerable:!0,get:function(){return n(b).default}});var re=$("./graphics/GraphicsData");Object.defineProperty(e,"GraphicsData",{enumerable:!0,get:function(){return n(re).default}});var T=$("./graphics/webgl/GraphicsRenderer");Object.defineProperty(e,"GraphicsRenderer",{enumerable:!0,get:function(){return n(T).default}});var ne=$("./graphics/canvas/CanvasGraphicsRenderer");Object.defineProperty(e,"CanvasGraphicsRenderer",{enumerable:!0,get:function(){return n(ne).default}});var E=$("./textures/Spritesheet");Object.defineProperty(e,"Spritesheet",{enumerable:!0,get:function(){return n(E).default}});var S=$("./textures/Texture");Object.defineProperty(e,"Texture",{enumerable:!0,get:function(){return n(S).default}});var O=$("./textures/TextureMatrix");Object.defineProperty(e,"TextureMatrix",{enumerable:!0,get:function(){return n(O).default}});var M=$("./textures/BaseTexture");Object.defineProperty(e,"BaseTexture",{enumerable:!0,get:function(){return n(M).default}});var P=$("./textures/RenderTexture");Object.defineProperty(e,"RenderTexture",{enumerable:!0,get:function(){return n(P).default}});var C=$("./textures/BaseRenderTexture");Object.defineProperty(e,"BaseRenderTexture",{enumerable:!0,get:function(){return n(C).default}});var R=$("./textures/VideoBaseTexture");Object.defineProperty(e,"VideoBaseTexture",{enumerable:!0,get:function(){return n(R).default}});var A=$("./textures/TextureUvs");Object.defineProperty(e,"TextureUvs",{enumerable:!0,get:function(){return n(A).default}});var I=$("./renderers/canvas/utils/CanvasRenderTarget");Object.defineProperty(e,"CanvasRenderTarget",{enumerable:!0,get:function(){return n(I).default}});var D=$("./Shader");Object.defineProperty(e,"Shader",{enumerable:!0,get:function(){return n(D).default}});var L=$("./renderers/webgl/managers/WebGLManager");Object.defineProperty(e,"WebGLManager",{enumerable:!0,get:function(){return n(L).default}});var N=$("./renderers/webgl/utils/ObjectRenderer");Object.defineProperty(e,"ObjectRenderer",{enumerable:!0,get:function(){return n(N).default}});var B=$("./renderers/webgl/utils/RenderTarget");Object.defineProperty(e,"RenderTarget",{enumerable:!0,get:function(){return n(B).default}});var k=$("./renderers/webgl/utils/Quad");Object.defineProperty(e,"Quad",{enumerable:!0,get:function(){return n(k).default}});var F=$("./renderers/webgl/filters/spriteMask/SpriteMaskFilter");Object.defineProperty(e,"SpriteMaskFilter",{enumerable:!0,get:function(){return n(F).default}});var j=$("./renderers/webgl/filters/Filter");Object.defineProperty(e,"Filter",{enumerable:!0,get:function(){return n(j).default}});var U=$("./Application");Object.defineProperty(e,"Application",{enumerable:!0,get:function(){return n(U).default}});var X=$("./autoDetectRenderer");Object.defineProperty(e,"autoDetectRenderer",{enumerable:!0,get:function(){return X.autoDetectRenderer}});var G=$("./utils"),W=r(G),H=$("./ticker"),Y=r(H),V=$("./settings"),z=n(V),q=$("./renderers/canvas/CanvasRenderer"),K=n(q),Z=$("./renderers/webgl/WebGLRenderer"),J=n(Z);e.settings=z.default,e.utils=W,e.ticker=Y,e.CanvasRenderer=K.default,e.WebGLRenderer=J.default},{"./Application":43,"./Shader":44,"./autoDetectRenderer":45,"./const":46,"./display/Bounds":47,"./display/Container":48,"./display/DisplayObject":49,"./display/Transform":50,"./display/TransformBase":51,"./display/TransformStatic":52,"./graphics/Graphics":53,"./graphics/GraphicsData":54,"./graphics/canvas/CanvasGraphicsRenderer":55,"./graphics/webgl/GraphicsRenderer":57,"./math":70,"./renderers/canvas/CanvasRenderer":77,"./renderers/canvas/utils/CanvasRenderTarget":79,"./renderers/webgl/WebGLRenderer":84,"./renderers/webgl/filters/Filter":86,"./renderers/webgl/filters/spriteMask/SpriteMaskFilter":89,"./renderers/webgl/managers/WebGLManager":93,"./renderers/webgl/utils/ObjectRenderer":94,"./renderers/webgl/utils/Quad":95,"./renderers/webgl/utils/RenderTarget":96,"./settings":101,"./sprites/Sprite":102,"./sprites/canvas/CanvasSpriteRenderer":103,"./sprites/canvas/CanvasTinter":104,"./sprites/webgl/SpriteRenderer":106,"./text/Text":108,"./text/TextMetrics":109,"./text/TextStyle":110,"./textures/BaseRenderTexture":111,"./textures/BaseTexture":112,"./textures/RenderTexture":113,"./textures/Spritesheet":114,"./textures/Texture":115,"./textures/TextureMatrix":116,"./textures/TextureUvs":117,"./textures/VideoBaseTexture":118,"./ticker":121,"./utils":125,"pixi-gl-core":15}],66:[function(p,t,e){"use strict";function g(e){return 0>e?-1:0<e?1:0}e.__esModule=!0;var r=p("./Matrix"),n=function(e){return e&&e.__esModule?e:{default:e}}(r),o=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],s=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],a=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],u=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],f=[],l=[];!function(){for(var c=0,m;16>c;c++){m=[],l.push(m);for(var _=0;16>_;_++)for(var b=g(o[c]*o[_]+a[c]*s[_]),i=g(s[c]*o[_]+u[c]*s[_]),d=g(o[c]*a[_]+a[c]*u[_]),T=g(s[c]*a[_]+u[c]*u[_]),p=0;16>p;p++)if(o[p]===b&&s[p]===i&&a[p]===d&&u[p]===T){m.push(p);break}}for(var S=0,E;16>S;S++)E=new n.default,E.set(o[S],s[S],a[S],u[S],0,0),f.push(E)}();var c={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MIRROR_HORIZONTAL:12,uX:function(e){return o[e]},uY:function(e){return s[e]},vX:function(e){return a[e]},vY:function(e){return u[e]},inv:function(e){return 8&e?15&e:7&-e},add:function(r,t){return l[r][t]},sub:function(r,t){return l[r][c.inv(t)]},rotate180:function(e){return 4^e},isVertical:function(e){return 2==(3&e)},byDirection:function(r,t){return 2*ee(r)<=ee(t)?0<=t?c.S:c.N:2*ee(t)<=ee(r)?0<r?c.E:c.W:0<t?0<r?c.SE:c.SW:0<r?c.NE:c.NW},matrixAppendRotationInv:function(a,t){var e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,n=f[c.inv(t)];n.tx=e,n.ty=r,a.append(n)}};e.default=c},{"./Matrix":67}],67:[function(l,t,e){"use strict";function d(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function a(a,t){for(var e=0,o;e<t.length;e++)o=t[e],o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(a,o.key,o)}return function(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t}}(),n=l("./Point"),o=function(e){return e&&e.__esModule?e:{default:e}}(n),p=l("../const"),a=function(){function n(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,s=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0;d(this,n),this.a=t,this.b=e,this.c=r,this.d=i,this.tx=o,this.ty=s,this.array=null}return n.prototype.fromArray=function(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]},n.prototype.set=function(a,t,e,r,n,i){return this.a=a,this.b=t,this.c=e,this.d=r,this.tx=n,this.ty=i,this},n.prototype.toArray=function(n,t){this.array||(this.array=new Float32Array(9));var e=t||this.array;return n?(e[0]=this.a,e[1]=this.b,e[2]=0,e[3]=this.c,e[4]=this.d,e[5]=0,e[6]=this.tx,e[7]=this.ty,e[8]=1):(e[0]=this.a,e[1]=this.c,e[2]=this.tx,e[3]=this.b,e[4]=this.d,e[5]=this.ty,e[6]=0,e[7]=0,e[8]=1),e},n.prototype.apply=function(a,t){t=t||new o.default;var i=a.x,r=a.y;return t.x=this.a*i+this.c*r+this.tx,t.y=this.b*i+this.d*r+this.ty,t},n.prototype.applyInverse=function(a,t){t=t||new o.default;var s=1/(this.a*this.d+this.c*-this.b),r=a.x,n=a.y;return t.x=this.d*s*r+-this.c*s*n+(this.ty*this.c-this.tx*this.d)*s,t.y=this.a*s*n+-this.b*s*r+(-this.ty*this.a+this.tx*this.b)*s,t},n.prototype.translate=function(r,t){return this.tx+=r,this.ty+=t,this},n.prototype.scale=function(r,t){return this.a*=r,this.d*=t,this.c*=r,this.b*=t,this.tx*=r,this.ty*=t,this},n.prototype.rotate=function(a){var t=K(a),e=q(a),r=this.a,n=this.c,i=this.tx;return this.a=r*t-this.b*e,this.b=r*e+this.b*t,this.c=n*t-this.d*e,this.d=n*e+this.d*t,this.tx=i*t-this.ty*e,this.ty=i*e+this.ty*t,this},n.prototype.append=function(a){var t=this.a,e=this.b,r=this.c,n=this.d;return this.a=a.a*t+a.b*r,this.b=a.a*e+a.b*n,this.c=a.c*t+a.d*r,this.d=a.c*e+a.d*n,this.tx=a.tx*t+a.ty*r+this.tx,this.ty=a.tx*e+a.ty*n+this.ty,this},n.prototype.setTransform=function(l,t,e,r,n,i,o,s,a){return this.a=K(o+a)*n,this.b=q(o+a)*n,this.c=-q(o-s)*i,this.d=K(o-s)*i,this.tx=l-(e*this.a+r*this.c),this.ty=t-(e*this.b+r*this.d),this},n.prototype.prepend=function(a){var t=this.tx;if(1!==a.a||0!==a.b||0!==a.c||1!==a.d){var e=this.a,r=this.c;this.a=e*a.a+this.b*a.c,this.b=e*a.b+this.b*a.d,this.c=r*a.a+this.d*a.c,this.d=r*a.b+this.d*a.d}return this.tx=t*a.a+this.ty*a.c+a.tx,this.ty=t*a.b+this.ty*a.d+a.ty,this},n.prototype.decompose=function(a){var t=this.a,e=this.b,r=this.c,n=this.d,i=-T(-r,n),o=T(e,t),s=ee(i+o);return 1e-5>s||1e-5>ee(p.PI_2-s)?(a.rotation=o,a.skew.x=a.skew.y=0):(a.rotation=0,a.skew.x=i,a.skew.y=o),a.scale.x=z(t*t+e*e),a.scale.y=z(r*r+n*n),a.position.x=this.tx,a.position.y=this.ty,a},n.prototype.invert=function(){var a=this.a,t=this.b,e=this.c,r=this.d,n=this.tx,i=a*r-t*e;return this.a=r/i,this.b=-t/i,this.c=-e/i,this.d=a/i,this.tx=(e*this.ty-r*n)/i,this.ty=-(a*this.ty-t*n)/i,this},n.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},n.prototype.clone=function(){var t=new n;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},n.prototype.copy=function(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},r(n,null,[{key:"IDENTITY",get:function(){return new n}},{key:"TEMP_MATRIX",get:function(){return new n}}]),n}();e.default=a},{"../const":46,"./Point":69}],68:[function(a,t,e){"use strict";function s(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function a(a,t){for(var e=0,o;e<t.length;e++)o=t[e],o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(a,o.key,o)}return function(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t}}(),n=function(){function n(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;s(this,n),this._x=r,this._y=a,this.cb=t,this.scope=e}return n.prototype.clone=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;return new n(t||this.cb,e||this.scope,this._x,this._y)},n.prototype.set=function(a,t){var e=a||0,r=t||(0===t?0:e);this._x===e&&this._y===r||(this._x=e,this._y=r,this.cb.call(this.scope))},n.prototype.copy=function(e){this._x===e.x&&this._y===e.y||(this._x=e.x,this._y=e.y,this.cb.call(this.scope))},n.prototype.equals=function(e){return e.x===this._x&&e.y===this._y},r(n,[{key:"x",get:function(){return this._x},set:function(e){this._x!==e&&(this._x=e,this.cb.call(this.scope))}},{key:"y",get:function(){return this._y},set:function(e){this._y!==e&&(this._y=e,this.cb.call(this.scope))}}]),n}();e.default=n},{}],69:[function(a,t,e){"use strict";function o(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function n(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;o(this,n),this.x=t,this.y=e}return n.prototype.clone=function(){return new n(this.x,this.y)},n.prototype.copy=function(e){this.set(e.x,e.y)},n.prototype.equals=function(e){return e.x===this.x&&e.y===this.y},n.prototype.set=function(r,t){this.x=r||0,this.y=t||(0===t?0:this.x)},n}();e.default=r},{}],70:[function(p,t,e){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}e.__esModule=!0;var n=p("./Point");Object.defineProperty(e,"Point",{enumerable:!0,get:function(){return r(n).default}});var i=p("./ObservablePoint");Object.defineProperty(e,"ObservablePoint",{enumerable:!0,get:function(){return r(i).default}});var o=p("./Matrix");Object.defineProperty(e,"Matrix",{enumerable:!0,get:function(){return r(o).default}});var s=p("./GroupD8");Object.defineProperty(e,"GroupD8",{enumerable:!0,get:function(){return r(s).default}});var a=p("./shapes/Circle");Object.defineProperty(e,"Circle",{enumerable:!0,get:function(){return r(a).default}});var u=p("./shapes/Ellipse");Object.defineProperty(e,"Ellipse",{enumerable:!0,get:function(){return r(u).default}});var f=p("./shapes/Polygon");Object.defineProperty(e,"Polygon",{enumerable:!0,get:function(){return r(f).default}});var l=p("./shapes/Rectangle");Object.defineProperty(e,"Rectangle",{enumerable:!0,get:function(){return r(l).default}});var c=p("./shapes/RoundedRectangle");Object.defineProperty(e,"RoundedRectangle",{enumerable:!0,get:function(){return r(c).default}})},{"./GroupD8":66,"./Matrix":67,"./ObservablePoint":68,"./Point":69,"./shapes/Circle":71,"./shapes/Ellipse":72,"./shapes/Polygon":73,"./shapes/Rectangle":74,"./shapes/RoundedRectangle":75}],71:[function(l,t,e){"use strict";function d(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=l("./Rectangle"),n=function(e){return e&&e.__esModule?e:{default:e}}(r),o=l("../../const"),i=function(){function a(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;d(this,a),this.x=t,this.y=e,this.radius=r,this.type=o.SHAPES.CIRC}return a.prototype.clone=function(){return new a(this.x,this.y,this.radius)},a.prototype.contains=function(a,t){if(0>=this.radius)return!1;var e=this.radius*this.radius,r=this.x-a,o=this.y-t;return r*=r,o*=o,r+o<=e},a.prototype.getBounds=function(){return new n.default(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},a}();e.default=i},{"../../const":46,"./Rectangle":74}],72:[function(l,t,e){"use strict";function d(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=l("./Rectangle"),n=function(e){return e&&e.__esModule?e:{default:e}}(r),u=l("../../const"),o=function(){function a(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;d(this,a),this.x=t,this.y=e,this.width=r,this.height=n,this.type=u.SHAPES.ELIP}return a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height)},a.prototype.contains=function(a,t){if(0>=this.width||0>=this.height)return!1;var e=(a-this.x)/this.width,o=(t-this.y)/this.height;return e*=e,o*=o,1>=e+o},a.prototype.getBounds=function(){return new n.default(this.x-this.width,this.y-this.height,this.width,this.height)},a}();e.default=o},{"../../const":46,"./Rectangle":74}],73:[function(l,t,e){"use strict";function d(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=l("../Point"),n=function(e){return e&&e.__esModule?e:{default:e}}(r),o=l("../../const"),i=function(){function s(){for(var t=arguments.length,e=Array(t),l=0;l<t;l++)e[l]=arguments[l];if(d(this,s),Array.isArray(e[0])&&(e=e[0]),e[0]instanceof n.default){for(var p=[],a=0,c=e.length;a<c;a++)p.push(e[a].x,e[a].y);e=p}this.closed=!0,this.points=e,this.type=o.SHAPES.POLY}return s.prototype.clone=function(){return new s(this.points.slice())},s.prototype.close=function(){var e=this.points;e[0]===e[e.length-2]&&e[1]===e[e.length-1]||e.push(e[0],e[1])},s.prototype.contains=function(l,t){for(var e=!1,d=this.points.length/2,n=0,p=d-1;n<d;p=n++){var c=this.points[2*n],s=this.points[2*n+1],a=this.points[2*p],u=this.points[2*p+1];s>t!=u>t&&l<(t-s)/(u-s)*(a-c)+c&&(e=!e)}return e},s}();e.default=i},{"../../const":46,"../Point":69}],74:[function(a,t,e){"use strict";function l(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function a(a,t){for(var e=0,o;e<t.length;e++)o=t[e],o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(a,o.key,o)}return function(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t}}(),n=a("../../const"),o=function(){function a(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;l(this,a),this.x=+t,this.y=+e,this.width=+r,this.height=+o,this.type=n.SHAPES.RECT}return a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height)},a.prototype.copy=function(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this},a.prototype.contains=function(r,t){return!(0>=this.width||0>=this.height)&&r>=this.x&&r<this.x+this.width&&t>=this.y&&t<this.y+this.height},a.prototype.pad=function(r,n){r=r||0,n=n||(0===n?0:r),this.x-=r,this.y-=n,this.width+=2*r,this.height+=2*n},a.prototype.fit=function(a){var t=te(this.x,a.x),e=Q(this.x+this.width,a.x+a.width),r=te(this.y,a.y),n=Q(this.y+this.height,a.y+a.height);this.x=t,this.width=te(e-t,0),this.y=r,this.height=te(n-r,0)},a.prototype.enlarge=function(a){var t=Q(this.x,a.x),e=te(this.x+this.width,a.x+a.width),r=Q(this.y,a.y),n=te(this.y+this.height,a.y+a.height);this.x=t,this.width=e-t,this.y=r,this.height=n-r},a.prototype.ceil=function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:.001,e=C((this.x+this.width-t)*a)/a,r=C((this.y+this.height-t)*a)/a;this.x=J((this.x+t)*a)/a,this.y=J((this.y+t)*a)/a,this.width=e-this.x,this.height=r-this.y},r(a,[{key:"left",get:function(){return this.x}},{key:"right",get:function(){return this.x+this.width}},{key:"top",get:function(){return this.y}},{key:"bottom",get:function(){return this.y+this.height}}],[{key:"EMPTY",get:function(){return new a(0,0,0,0)}}]),a}();e.default=o},{"../../const":46}],75:[function(a,t,e){"use strict";function l(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var n=a("../../const"),r=function(){function i(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,s=4<arguments.length&&void 0!==arguments[4]?arguments[4]:20;l(this,i),this.x=t,this.y=e,this.width=r,this.height=o,this.radius=s,this.type=n.SHAPES.RREC}return i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.radius)},i.prototype.contains=function(a,t){if(0>=this.width||0>=this.height)return!1;if(a>=this.x&&a<=this.x+this.width&&t>=this.y&&t<=this.y+this.height){if(t>=this.y+this.radius&&t<=this.y+this.height-this.radius||a>=this.x+this.radius&&a<=this.x+this.width-this.radius)return!0;var e=a-(this.x+this.radius),o=t-(this.y+this.radius),s=this.radius*this.radius;if(e*e+o*o<=s)return!0;if((e=a-(this.x+this.width-this.radius))*e+o*o<=s)return!0;if(o=t-(this.y+this.height-this.radius),e*e+o*o<=s)return!0;if((e=a-(this.x+this.radius))*e+o*o<=s)return!0}return!1},i}();e.default=r},{"../../const":46}],76:[function(T,t,e){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function S(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function i(r,t){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:r}function n(r,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(r,t):r.__proto__=t)}e.__esModule=!0;var o=function(){function a(a,t){for(var e=0,o;e<t.length;e++)o=t[e],o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(a,o.key,o)}return function(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t}}(),E=T("../utils"),u=T("../math"),C=T("../const"),a=T("../settings"),l=r(a),s=T("../display/Container"),d=r(s),p=T("../textures/RenderTexture"),c=r(p),f=T("eventemitter3"),g=r(f),m=new u.Matrix,_=function(p){function t(e,r,o,s){S(this,t);var a=i(this,p.call(this));return(0,E.sayHello)(e),"number"==typeof r&&(r=Object.assign({width:r,height:o||l.default.RENDER_OPTIONS.height},s)),r=Object.assign({},l.default.RENDER_OPTIONS,r),a.options=r,a.type=C.RENDERER_TYPE.UNKNOWN,a.screen=new u.Rectangle(0,0,r.width,r.height),a.view=r.view||document.createElement("canvas"),a.resolution=r.resolution||l.default.RESOLUTION,a.transparent=r.transparent,a.autoResize=r.autoResize||!1,a.blendModes=null,a.preserveDrawingBuffer=r.preserveDrawingBuffer,a.clearBeforeRender=r.clearBeforeRender,a.roundPixels=r.roundPixels,a._backgroundColor=0,a._backgroundColorRgba=[0,0,0,0],a._backgroundColorString="#000000",a.backgroundColor=r.backgroundColor||a._backgroundColor,a._tempDisplayObjectParent=new d.default,a._lastObjectRendered=a._tempDisplayObjectParent,a}return n(t,p),t.prototype.resize=function(r,t){this.screen.width=r,this.screen.height=t,this.view.width=r*this.resolution,this.view.height=t*this.resolution,this.autoResize&&(this.view.style.width=r+"px",this.view.style.height=t+"px")},t.prototype.generateTexture=function(a,t,e,r){r=r||a.getLocalBounds();var o=c.default.create(0|r.width,0|r.height,t,e);return m.tx=-r.x,m.ty=-r.y,this.render(a,o,!1,m,!!a.parent),o},t.prototype.destroy=function(e){e&&this.view.parentNode&&this.view.parentNode.removeChild(this.view),this.type=C.RENDERER_TYPE.UNKNOWN,this.view=null,this.screen=null,this.resolution=0,this.transparent=!1,this.autoResize=!1,this.blendModes=null,this.options=null,this.preserveDrawingBuffer=!1,this.clearBeforeRender=!1,this.roundPixels=!1,this._backgroundColor=0,this._backgroundColorRgba=null,this._backgroundColorString=null,this._tempDisplayObjectParent=null,this._lastObjectRendered=null},o(t,[{key:"width",get:function(){return this.view.width}},{key:"height",get:function(){return this.view.height}},{key:"backgroundColor",get:function(){return this._backgroundColor},set:function(e){this._backgroundColor=e,this._backgroundColorString=(0,E.hex2string)(e),(0,E.hex2rgb)(e,this._backgroundColorRgba)}}]),t}(g.default);e.default=_},{"../const":46,"../display/Container":48,"../math":70,"../settings":101,"../textures/RenderTexture":113,"../utils":125,eventemitter3:3}],77:[function(b,t,e){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function T(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function i(r,t){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:r}function n(r,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(r,t):r.__proto__=t)}e.__esModule=!0;var o=b("../SystemRenderer"),a=r(o),s=b("./utils/CanvasMaskManager"),u=r(s),l=b("./utils/CanvasRenderTarget"),c=r(l),d=b("./utils/mapCanvasBlendModesToPixi"),f=r(d),p=b("../../utils"),v=b("../../const"),g=b("../../settings"),S=r(g),m=function(o){function t(e,r,n){T(this,t);var s=i(this,o.call(this,"Canvas",e,r,n));return s.type=v.RENDERER_TYPE.CANVAS,s.rootContext=s.view.getContext("2d",{alpha:s.transparent}),s.context=s.rootContext,s.refresh=!0,s.maskManager=new u.default(s),s.smoothProperty="imageSmoothingEnabled",s.rootContext.imageSmoothingEnabled||(s.rootContext.webkitImageSmoothingEnabled?s.smoothProperty="webkitImageSmoothingEnabled":s.rootContext.mozImageSmoothingEnabled?s.smoothProperty="mozImageSmoothingEnabled":s.rootContext.oImageSmoothingEnabled?s.smoothProperty="oImageSmoothingEnabled":s.rootContext.msImageSmoothingEnabled&&(s.smoothProperty="msImageSmoothingEnabled")),s.initPlugins(),s.blendModes=(0,f.default)(),s._activeBlendMode=null,s.renderingToScreen=!1,s.resize(s.options.width,s.options.height),s}return n(t,o),t.prototype.render=function(l,t,d,r,n){if(this.view){this.renderingToScreen=!t,this.emit("prerender");var i=this.resolution;t?(t=t.baseTexture||t,t._canvasRenderTarget||(t._canvasRenderTarget=new c.default(t.width,t.height,t.resolution),t.source=t._canvasRenderTarget.canvas,t.valid=!0),this.context=t._canvasRenderTarget.context,this.resolution=t._canvasRenderTarget.resolution):this.context=this.rootContext;var o=this.context;if(t||(this._lastObjectRendered=l),!n){var s=l.parent,a=this._tempDisplayObjectParent.transform.worldTransform;r?(r.copy(a),this._tempDisplayObjectParent.transform._worldID=-1):a.identity(),l.parent=this._tempDisplayObjectParent,l.updateTransform(),l.parent=s}o.save(),o.setTransform(1,0,0,1,0,0),o.globalAlpha=1,this._activeBlendMode=v.BLEND_MODES.NORMAL,o.globalCompositeOperation=this.blendModes[v.BLEND_MODES.NORMAL],navigator.isCocoonJS&&this.view.screencanvas&&(o.fillStyle="black",o.clear()),(void 0===d?this.clearBeforeRender:d)&&this.renderingToScreen&&(this.transparent?o.clearRect(0,0,this.width,this.height):(o.fillStyle=this._backgroundColorString,o.fillRect(0,0,this.width,this.height)));var u=this.context;this.context=o,l.renderCanvas(this),this.context=u,o.restore(),this.resolution=i,this.emit("postrender")}},t.prototype.clear=function(r){var n=this.context;r=r||this._backgroundColorString,!this.transparent&&r?(n.fillStyle=r,n.fillRect(0,0,this.width,this.height)):n.clearRect(0,0,this.width,this.height)},t.prototype.setBlendMode=function(e){this._activeBlendMode!==e&&(this._activeBlendMode=e,this.context.globalCompositeOperation=this.blendModes[e])},t.prototype.destroy=function(t){this.destroyPlugins(),o.prototype.destroy.call(this,t),this.context=null,this.refresh=!0,this.maskManager.destroy(),this.maskManager=null,this.smoothProperty=null},t.prototype.resize=function(t,e){o.prototype.resize.call(this,t,e),this.smoothProperty&&(this.rootContext[this.smoothProperty]=S.default.SCALE_MODE===v.SCALE_MODES.LINEAR)},t.prototype.invalidateBlendMode=function(){this._activeBlendMode=this.blendModes.indexOf(this.context.globalCompositeOperation)},t}(a.default);e.default=m,p.pluginTarget.mixin(m)},{"../../const":46,"../../settings":101,"../../utils":125,"../SystemRenderer":76,"./utils/CanvasMaskManager":78,"./utils/CanvasRenderTarget":79,"./utils/mapCanvasBlendModesToPixi":81}],78:[function(a,t,e){"use strict";function r(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var D=a("../../../const"),n=function(){function n(t){r(this,n),this.renderer=t}return n.prototype.pushMask=function(a){var t=this.renderer;t.context.save();var e=a.alpha,r=a.transform.worldTransform,n=t.resolution;t.context.setTransform(r.a*n,r.b*n,r.c*n,r.d*n,r.tx*n,r.ty*n),a._texture||(this.renderGraphicsShape(a),t.context.clip()),a.worldAlpha=e},n.prototype.renderGraphicsShape=function(i){var t=this.renderer.context,e=i.graphicsData.length;if(0!==e){t.beginPath();for(var r=0;r<e;r++){var L=i.graphicsData[r],o=L.shape;if(L.type===D.SHAPES.POLY){var s=o.points,k=L.holes,u=void 0,B=void 0;t.moveTo(s[0],s[1]);for(var N=2;N<s.length;N+=2)t.lineTo(s[N],s[N+1]);if(s[0]===s[s.length-2]&&s[1]===s[s.length-1]&&t.closePath(),0<k.length){u=0;for(var F=0;F<s.length;F+=2)u+=s[F]*s[F+3]-s[F+1]*s[F+2];for(var U=0;U<k.length;U++){s=k[U].points,B=0;for(var X=0;X<s.length;X+=2)B+=s[X]*s[X+3]-s[X+1]*s[X+2];if(t.moveTo(s[0],s[1]),0>B*u)for(var W=2;W<s.length;W+=2)t.lineTo(s[W],s[W+1]);else for(var G=s.length-2;2<=G;G-=2)t.lineTo(s[G],s[G+1])}}}else if(L.type===D.SHAPES.RECT)t.rect(o.x,o.y,o.width,o.height),t.closePath();else if(L.type===D.SHAPES.CIRC)t.arc(o.x,o.y,o.radius,0,2*Z),t.closePath();else if(L.type===D.SHAPES.ELIP){var Y=2*o.width,V=2*o.height,m=o.x-Y/2,_=o.y-V/2,b=.5522848*(Y/2),H=.5522848*(V/2),T=m+Y,j=_+V,E=m+Y/2,S=_+V/2;t.moveTo(m,S),t.bezierCurveTo(m,S-H,E-b,_,E,_),t.bezierCurveTo(E+b,_,T,S-H,T,S),t.bezierCurveTo(T,S+H,E+b,j,E,j),t.bezierCurveTo(E-b,j,m,S+H,m,S),t.closePath()}else if(L.type===D.SHAPES.RREC){var O=o.x,M=o.y,P=o.width,C=o.height,R=o.radius,z=0|Q(P,C)/2;R=R>z?z:R,t.moveTo(O,M+R),t.lineTo(O,M+C-R),t.quadraticCurveTo(O,M+C,O+R,M+C),t.lineTo(O+P-R,M+C),t.quadraticCurveTo(O+P,M+C,O+P,M+C-R),t.lineTo(O+P,M+R),t.quadraticCurveTo(O+P,M,O+P-R,M),t.lineTo(O+R,M),t.quadraticCurveTo(O,M,O,M+R),t.closePath()}}}},n.prototype.popMask=function(e){e.context.restore(),e.invalidateBlendMode()},n.prototype.destroy=function(){},n}();e.default=n},{"../../../const":46}],79:[function(l,t,e){"use strict";function d(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function a(a,t){for(var e=0,o;e<t.length;e++)o=t[e],o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(a,o.key,o)}return function(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t}}(),n=l("../../../settings"),o=function(e){return e&&e.__esModule?e:{default:e}}(n),i=function(){function n(t,e,r){d(this,n),this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=r||o.default.RESOLUTION,this.resize(t,e)}return n.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},n.prototype.resize=function(r,t){this.canvas.width=r*this.resolution,this.canvas.height=t*this.resolution},n.prototype.destroy=function(){this.context=null,this.canvas=null},r(n,[{key:"width",get:function(){return this.canvas.width},set:function(e){this.canvas.width=e}},{key:"height",get:function(){return this.canvas.height},set:function(e){this.canvas.height=e}}]),n}();e.default=i},{"../../../settings":101}],80:[function(a,t,e){"use strict";function l(n){var t=document.createElement("canvas");t.width=6,t.height=1;var e=t.getContext("2d");return e.fillStyle=n,e.fillRect(0,0,6,1),t}function r(){if("undefined"==typeof document)return!1;var n=l("#ff00ff"),t=l("#ffff00"),e=document.createElement("canvas");e.width=6,e.height=1;var r=e.getContext("2d");r.globalCompositeOperation="multiply",r.drawImage(n,0,0),r.drawImage(t,2,0);var a=r.getImageData(2,0,1,1);if(!a)return!1;var o=a.data;return 255===o[0]&&0===o[1]&&0===o[2]}e.__esModule=!0,e.default=r},{}],81:[function(n,t,e){"use strict";e.__esModule=!0,e.default=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];return(0,o.default)()?(e[r.BLEND_MODES.NORMAL]="source-over",e[r.BLEND_MODES.ADD]="lighter",e[r.BLEND_MODES.MULTIPLY]="multiply",e[r.BLEND_MODES.SCREEN]="screen",e[r.BLEND_MODES.OVERLAY]="overlay",e[r.BLEND_MODES.DARKEN]="darken",e[r.BLEND_MODES.LIGHTEN]="lighten",e[r.BLEND_MODES.COLOR_DODGE]="color-dodge",e[r.BLEND_MODES.COLOR_BURN]="color-burn",e[r.BLEND_MODES.HARD_LIGHT]="hard-light",e[r.BLEND_MODES.SOFT_LIGHT]="soft-light",e[r.BLEND_MODES.DIFFERENCE]="difference",e[r.BLEND_MODES.EXCLUSION]="exclusion",e[r.BLEND_MODES.HUE]="hue",e[r.BLEND_MODES.SATURATION]="saturate",e[r.BLEND_MODES.COLOR]="color",e[r.BLEND_MODES.LUMINOSITY]="luminosity"):(e[r.BLEND_MODES.NORMAL]="source-over",e[r.BLEND_MODES.ADD]="lighter",e[r.BLEND_MODES.MULTIPLY]="source-over",e[r.BLEND_MODES.SCREEN]="source-over",e[r.BLEND_MODES.OVERLAY]="source-over",e[r.BLEND_MODES.DARKEN]="source-over",e[r.BLEND_MODES.LIGHTEN]="source-over",e[r.BLEND_MODES.COLOR_DODGE]="source-over",e[r.BLEND_MODES.COLOR_BURN]="source-over",e[r.BLEND_MODES.HARD_LIGHT]="source-over",e[r.BLEND_MODES.SOFT_LIGHT]="source-over",e[r.BLEND_MODES.DIFFERENCE]="source-over",e[r.BLEND_MODES.EXCLUSION]="source-over",e[r.BLEND_MODES.HUE]="source-over",e[r.BLEND_MODES.SATURATION]="source-over",e[r.BLEND_MODES.COLOR]="source-over",e[r.BLEND_MODES.LUMINOSITY]="source-over"),e[r.BLEND_MODES.NORMAL_NPM]=e[r.BLEND_MODES.NORMAL],e[r.BLEND_MODES.ADD_NPM]=e[r.BLEND_MODES.ADD],e[r.BLEND_MODES.SCREEN_NPM]=e[r.BLEND_MODES.SCREEN],e};var r=n("../../../const"),a=n("./canUseNewCanvasBlendModes"),o=function(e){return e&&e.__esModule?e:{default:e}}(a)},{"../../../const":46,"./canUseNewCanvasBlendModes":80}],82:[function(l,t,e){"use strict";function r(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var n=l("../../const"),i=l("../../settings"),o=function(e){return e&&e.__esModule?e:{default:e}}(i),s=function(){function a(t){r(this,a),this.renderer=t,this.count=0,this.checkCount=0,this.maxIdle=o.default.GC_MAX_IDLE,this.checkCountMax=o.default.GC_MAX_CHECK_COUNT,this.mode=o.default.GC_MODE}return a.prototype.update=function(){this.count++,this.mode!==n.GC_MODES.MANUAL&&++this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())},a.prototype.run=function(){for(var a=this.renderer.textureManager,t=a._managedTextures,e=!1,l=0,d;l<t.length;l++)d=t[l],!d._glRenderTargets&&this.count-d.touched>this.maxIdle&&(a.destroyTexture(d,!0),t[l]=null,e=!0);if(e){for(var u=0,p=0;p<t.length;p++)null!==t[p]&&(t[u++]=t[p]);t.length=u}},a.prototype.unload=function(n){var t=this.renderer.textureManager;n._texture&&n._texture._glRenderTargets&&t.destroyTexture(n._texture,!0);for(var e=n.children.length-1;0<=e;e--)this.unload(n.children[e])},a}();e.default=s},{"../../const":46,"../../settings":101}],83:[function(l,t,e){"use strict";function r(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var d=l("pixi-gl-core"),i=l("../../const"),n=l("./utils/RenderTarget"),o=function(e){return e&&e.__esModule?e:{default:e}}(n),a=l("../../utils"),s=function(){function n(t){r(this,n),this.renderer=t,this.gl=t.gl,this._managedTextures=[]}return n.prototype.bindTexture=function(){},n.prototype.getTexture=function(){},n.prototype.updateTexture=function(a,t){var p=this.gl,r=!!a._glRenderTargets;if(!a.hasLoaded)return null;var n=this.renderer.boundTextures;if(void 0===t){t=0;for(var s=0;s<n.length;++s)if(n[s]===a){t=s;break}}n[t]=a,p.activeTexture(p.TEXTURE0+t);var c=a._glTextures[this.renderer.CONTEXT_UID];if(c)r?a._glRenderTargets[this.renderer.CONTEXT_UID].resize(a.width,a.height):c.upload(a.source);else{if(r){var f=new o.default(this.gl,a.width,a.height,a.scaleMode,a.resolution);f.resize(a.width,a.height),a._glRenderTargets[this.renderer.CONTEXT_UID]=f,c=f.texture,this.renderer._activeRenderTarget.root||this.renderer._activeRenderTarget.frameBuffer.bind()}else c=new d.GLTexture(this.gl,null,null,null,null),c.bind(t),c.premultiplyAlpha=!0,c.upload(a.source);a._glTextures[this.renderer.CONTEXT_UID]=c,a.on("update",this.updateTexture,this),a.on("dispose",this.destroyTexture,this),this._managedTextures.push(a),a.isPowerOfTwo?(a.mipmap&&c.enableMipmap(),a.wrapMode===i.WRAP_MODES.CLAMP?c.enableWrapClamp():a.wrapMode===i.WRAP_MODES.REPEAT?c.enableWrapRepeat():c.enableWrapMirrorRepeat()):c.enableWrapClamp(),a.scaleMode===i.SCALE_MODES.NEAREST?c.enableNearestScaling():c.enableLinearScaling()}return c},n.prototype.destroyTexture=function(l,d){if(l=l.baseTexture||l,l.hasLoaded){var e=this.renderer,r=e.CONTEXT_UID,n=l._glTextures,i=l._glRenderTargets;if(n[r]&&(e.unbindTexture(l),n[r].destroy(),l.off("update",this.updateTexture,this),l.off("dispose",this.destroyTexture,this),delete n[r],!d)){var o=this._managedTextures.indexOf(l);-1!==o&&(0,a.removeItems)(this._managedTextures,o,1)}i&&i[r]&&(e._activeRenderTarget===i[r]&&e.bindRenderTarget(e.rootRenderTarget),i[r].destroy(),delete i[r])}},n.prototype.removeAll=function(){for(var r=0,n;r<this._managedTextures.length;++r)n=this._managedTextures[r],n._glTextures[this.renderer.CONTEXT_UID]&&delete n._glTextures[this.renderer.CONTEXT_UID]},n.prototype.destroy=function(){for(var r=0,n;r<this._managedTextures.length;++r)n=this._managedTextures[r],this.destroyTexture(n,!0),n.off("update",this.updateTexture,this),n.off("dispose",this.destroyTexture,this);this._managedTextures=null},n}();e.default=s},{"../../const":46,"../../utils":125,"./utils/RenderTarget":96,"pixi-gl-core":15}],84:[function(k,t,e){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function F(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function i(r,t){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:r}function n(r,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(r,t):r.__proto__=t)}e.__esModule=!0;var o=k("../SystemRenderer"),a=r(o),s=k("./managers/MaskManager"),u=r(s),l=k("./managers/StencilManager"),c=r(l),d=k("./managers/FilterManager"),f=r(d),p=k("./utils/RenderTarget"),v=r(p),g=k("./utils/ObjectRenderer"),U=r(g),m=k("./TextureManager"),_=r(m),b=k("../../textures/BaseTexture"),X=r(b),T=k("./TextureGarbageCollector"),W=r(T),E=k("./WebGLState"),S=r(E),O=k("./utils/mapWebGLDrawModesToPixi"),M=r(O),P=k("./utils/validateContext"),C=r(P),R=k("../../utils"),A=k("pixi-gl-core"),I=r(A),D=k("../../const"),L=0,G=function(o){function t(e,r,n){F(this,t);var s=i(this,o.call(this,"WebGL",e,r,n));return s.legacy=s.options.legacy,s.legacy&&(I.default.VertexArrayObject.FORCE_NATIVE=!0),s.type=D.RENDERER_TYPE.WEBGL,s.handleContextLost=s.handleContextLost.bind(s),s.handleContextRestored=s.handleContextRestored.bind(s),s.view.addEventListener("webglcontextlost",s.handleContextLost,!1),s.view.addEventListener("webglcontextrestored",s.handleContextRestored,!1),s._contextOptions={alpha:s.transparent,antialias:s.options.antialias,premultipliedAlpha:s.transparent&&"notMultiplied"!==s.transparent,stencil:!0,preserveDrawingBuffer:s.options.preserveDrawingBuffer,powerPreference:s.options.powerPreference},s._backgroundColorRgba[3]=s.transparent?0:1,s.maskManager=new u.default(s),s.stencilManager=new c.default(s),s.emptyRenderer=new U.default(s),s.currentRenderer=s.emptyRenderer,s.textureManager=null,s.filterManager=null,s.initPlugins(),s.options.context&&(0,C.default)(s.options.context),s.gl=s.options.context||I.default.createContext(s.view,s._contextOptions),s.CONTEXT_UID=L++,s.state=new S.default(s.gl),s.renderingToScreen=!0,s.boundTextures=null,s._activeShader=null,s._activeVao=null,s._activeRenderTarget=null,s._initContext(),s.drawModes=(0,M.default)(s.gl),s._nextTextureLocation=0,s.setBlendMode(0),s}return n(t,o),t.prototype._initContext=function(){var a=this.gl;a.isContextLost()&&a.getExtension("WEBGL_lose_context")&&a.getExtension("WEBGL_lose_context").restoreContext();var t=a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS);this._activeShader=null,this._activeVao=null,this.boundTextures=Array(t),this.emptyTextures=Array(t),this._unknownBoundTextures=!1,this.textureManager=new _.default(this),this.filterManager=new f.default(this),this.textureGC=new W.default(this),this.state.resetToDefault(),this.rootRenderTarget=new v.default(a,this.width,this.height,null,this.resolution,!0),this.rootRenderTarget.clearColor=this._backgroundColorRgba,this.bindRenderTarget(this.rootRenderTarget);var e=new I.default.GLTexture.fromData(a,null,1,1),r={_glTextures:{}};r._glTextures[this.CONTEXT_UID]={};for(var n=0,s;n<t;n++)s=new X.default,s._glTextures[this.CONTEXT_UID]=e,this.boundTextures[n]=r,this.emptyTextures[n]=s,this.bindTexture(null,n);this.emit("context",a),this.resize(this.screen.width,this.screen.height)},t.prototype.render=function(a,t,e,r,n){if(this.renderingToScreen=!t,this.emit("prerender"),this.gl&&!this.gl.isContextLost()){if(this._nextTextureLocation=0,t||(this._lastObjectRendered=a),!n){var i=a.parent;a.parent=this._tempDisplayObjectParent,a.updateTransform(),a.parent=i}this.bindRenderTexture(t,r),this.currentRenderer.start(),(void 0===e?this.clearBeforeRender:e)&&this._activeRenderTarget.clear(),a.renderWebGL(this),this.currentRenderer.flush(),this.textureGC.update(),this.emit("postrender")}},t.prototype.setObjectRenderer=function(e){this.currentRenderer!==e&&(this.currentRenderer.stop(),this.currentRenderer=e,this.currentRenderer.start())},t.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},t.prototype.resize=function(r,t){a.default.prototype.resize.call(this,r,t),this.rootRenderTarget.resize(r,t),this._activeRenderTarget===this.rootRenderTarget&&(this.rootRenderTarget.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=this.rootRenderTarget.projectionMatrix.toArray(!0)))},t.prototype.setBlendMode=function(e){this.state.setBlendMode(e)},t.prototype.clear=function(e){this._activeRenderTarget.clear(e)},t.prototype.setTransform=function(e){this._activeRenderTarget.transform=e},t.prototype.clearRenderTexture=function(a,t){var e=a.baseTexture,r=e._glRenderTargets[this.CONTEXT_UID];return r&&r.clear(t),this},t.prototype.bindRenderTexture=function(a,t){var e;if(a){var o=a.baseTexture;o._glRenderTargets[this.CONTEXT_UID]||this.textureManager.updateTexture(o,0),this.unbindTexture(o),e=o._glRenderTargets[this.CONTEXT_UID],e.setFrame(a.frame)}else e=this.rootRenderTarget;return e.transform=t,this.bindRenderTarget(e),this},t.prototype.bindRenderTarget=function(e){return e!==this._activeRenderTarget&&(this._activeRenderTarget=e,e.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=e.projectionMatrix.toArray(!0)),this.stencilManager.setMaskStack(e.stencilMaskStack)),this},t.prototype.bindShader=function(r,t){return this._activeShader!==r&&(this._activeShader=r,r.bind(),!1!==t&&(r.uniforms.projectionMatrix=this._activeRenderTarget.projectionMatrix.toArray(!0))),this},t.prototype.bindTexture=function(a,s,l){if(a=a||this.emptyTextures[s],a=a.baseTexture||a,a.touched=this.textureGC.count,l)s=s||0;else{for(var r=0;r<this.boundTextures.length;r++)if(this.boundTextures[r]===a)return r;void 0===s&&(this._nextTextureLocation++,this._nextTextureLocation%=this.boundTextures.length,s=this.boundTextures.length-this._nextTextureLocation-1)}var d=this.gl,i=a._glTextures[this.CONTEXT_UID];return i?(this.boundTextures[s]=a,d.activeTexture(d.TEXTURE0+s),d.bindTexture(d.TEXTURE_2D,i.texture)):this.textureManager.updateTexture(a,s),s},t.prototype.unbindTexture=function(a){var o=this.gl;if(a=a.baseTexture||a,this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var e=0;e<this.boundTextures.length;e++)this.boundTextures[e]===this.emptyTextures[e]&&(o.activeTexture(o.TEXTURE0+e),o.bindTexture(o.TEXTURE_2D,this.emptyTextures[e]._glTextures[this.CONTEXT_UID].texture))}for(var i=0;i<this.boundTextures.length;i++)this.boundTextures[i]===a&&(this.boundTextures[i]=this.emptyTextures[i],o.activeTexture(o.TEXTURE0+i),o.bindTexture(o.TEXTURE_2D,this.emptyTextures[i]._glTextures[this.CONTEXT_UID].texture));return this},t.prototype.createVao=function(){return new I.default.VertexArrayObject(this.gl,this.state.attribState)},t.prototype.bindVao=function(e){return this._activeVao===e?this:(e?e.bind():this._activeVao&&this._activeVao.unbind(),this._activeVao=e,this)},t.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer),this.bindVao(null),this._activeShader=null,this._activeRenderTarget=this.rootRenderTarget,this._unknownBoundTextures=!0;for(var e=0;e<this.boundTextures.length;e++)this.boundTextures[e]=this.emptyTextures[e];return this.rootRenderTarget.activate(),this.state.resetToDefault(),this},t.prototype.handleContextLost=function(e){e.preventDefault()},t.prototype.handleContextRestored=function(){this.textureManager.removeAll(),this.filterManager.destroy(!0),this._initContext()},t.prototype.destroy=function(t){this.destroyPlugins(),this.view.removeEventListener("webglcontextlost",this.handleContextLost),this.view.removeEventListener("webglcontextrestored",this.handleContextRestored),this.textureManager.destroy(),o.prototype.destroy.call(this,t),this.uid=0,this.maskManager.destroy(),this.stencilManager.destroy(),this.filterManager.destroy(),this.maskManager=null,this.filterManager=null,this.textureManager=null,this.currentRenderer=null,this.handleContextLost=null,this.handleContextRestored=null,this._contextOptions=null,this.gl.useProgram(null),this.gl.getExtension("WEBGL_lose_context")&&this.gl.getExtension("WEBGL_lose_context").loseContext(),this.gl=null},t}(a.default);e.default=G,R.pluginTarget.mixin(G)},{"../../const":46,"../../textures/BaseTexture":112,"../../utils":125,"../SystemRenderer":76,"./TextureGarbageCollector":82,"./TextureManager":83,"./WebGLState":85,"./managers/FilterManager":90,"./managers/MaskManager":91,"./managers/StencilManager":92,"./utils/ObjectRenderer":94,"./utils/RenderTarget":96,"./utils/mapWebGLDrawModesToPixi":99,"./utils/validateContext":100,"pixi-gl-core":15}],85:[function(a,t,e){"use strict";function r(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var n=a("./utils/mapWebGLBlendModesToPixi"),i=function(e){return e&&e.__esModule?e:{default:e}}(n),o=function(){function n(t){r(this,n),this.activeState=new Uint8Array(16),this.defaultState=new Uint8Array(16),this.defaultState[0]=1,this.stackIndex=0,this.stack=[],this.gl=t,this.maxAttribs=t.getParameter(t.MAX_VERTEX_ATTRIBS),this.attribState={tempAttribState:Array(this.maxAttribs),attribState:Array(this.maxAttribs)},this.blendModes=(0,i.default)(t),this.nativeVaoExtension=t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object")}return n.prototype.push=function(){var r=this.stack[this.stackIndex];r||(r=this.stack[this.stackIndex]=new Uint8Array(16)),++this.stackIndex;for(var n=0;n<this.activeState.length;n++)r[n]=this.activeState[n]},n.prototype.pop=function(){var e=this.stack[--this.stackIndex];this.setState(e)},n.prototype.setState=function(e){this.setBlend(e[0]),this.setDepthTest(e[1]),this.setFrontFace(e[2]),this.setCullFace(e[3]),this.setBlendMode(e[4])},n.prototype.setBlend=function(e){e=e?1:0,this.activeState[0]!==e&&(this.activeState[0]=e,this.gl[e?"enable":"disable"](this.gl.BLEND))},n.prototype.setBlendMode=function(r){if(r!==this.activeState[4]){this.activeState[4]=r;var t=this.blendModes[r];2===t.length?this.gl.blendFunc(t[0],t[1]):this.gl.blendFuncSeparate(t[0],t[1],t[2],t[3])}},n.prototype.setDepthTest=function(e){e=e?1:0,this.activeState[1]!==e&&(this.activeState[1]=e,this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST))},n.prototype.setCullFace=function(e){e=e?1:0,this.activeState[3]!==e&&(this.activeState[3]=e,this.gl[e?"enable":"disable"](this.gl.CULL_FACE))},n.prototype.setFrontFace=function(e){e=e?1:0,this.activeState[2]!==e&&(this.activeState[2]=e,this.gl.frontFace(this.gl[e?"CW":"CCW"]))},n.prototype.resetAttributes=function(){for(var n=0;n<this.attribState.tempAttribState.length;n++)this.attribState.tempAttribState[n]=0;for(var a=0;a<this.attribState.attribState.length;a++)this.attribState.attribState[a]=0;for(var o=1;o<this.maxAttribs;o++)this.gl.disableVertexAttribArray(o)},n.prototype.resetToDefault=function(){this.nativeVaoExtension&&this.nativeVaoExtension.bindVertexArrayOES(null),this.resetAttributes();for(var e=0;e<this.activeState.length;++e)this.activeState[e]=32;this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.setState(this.defaultState)},n}();e.default=o},{"./utils/mapWebGLBlendModesToPixi":98}],86:[function(p,t,e){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function g(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var n=function(){function a(a,t){for(var e=0,o;e<t.length;e++)o=t[e],o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(a,o.key,o)}return function(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t}}(),o=p("./extractUniformsFromSrc"),i=r(o),a=p("../../../utils"),s=p("../../../const"),u=p("../../../settings"),l=r(u),c={},d=function(){function d(t,e,r){for(var n in g(this,d),this.vertexSrc=t||d.defaultVertexSrc,this.fragmentSrc=e||d.defaultFragmentSrc,this._blendMode=s.BLEND_MODES.NORMAL,this.uniformData=r||(0,i.default)(this.vertexSrc,this.fragmentSrc,"projectionMatrix|uSampler"),this.uniforms={},this.uniformData)this.uniforms[n]=this.uniformData[n].value,this.uniformData[n].type&&(this.uniformData[n].type=this.uniformData[n].type.toLowerCase());this.glShaders={},c[this.vertexSrc+this.fragmentSrc]||(c[this.vertexSrc+this.fragmentSrc]=(0,a.uid)()),this.glShaderKey=c[this.vertexSrc+this.fragmentSrc],this.padding=4,this.resolution=l.default.FILTER_RESOLUTION,this.enabled=!0,this.autoFit=!0}return d.prototype.apply=function(a,t,e,r){a.applyFilter(this,t,e,r)},n(d,[{key:"blendMode",get:function(){return this._blendMode},set:function(e){this._blendMode=e}}],[{key:"defaultVertexSrc",get:function(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n   vTextureCoord = aTextureCoord ;\n}"}},{key:"defaultFragmentSrc",get:function(){return"varying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\nuniform sampler2D uSampler;\nuniform sampler2D filterSampler;\nvoid main(void){\n   vec4 masky = texture2D(filterSampler, vFilterCoord);\n   vec4 sample = texture2D(uSampler, vTextureCoord);\n   vec4 color;\n   if(mod(vFilterCoord.x, 1.0) > 0.5)\n   {\n     color = vec4(1.0, 0.0, 0.0, 1.0);\n   }\n   else\n   {\n     color = vec4(0.0, 1.0, 0.0, 1.0);\n   }\n   gl_FragColor = mix(sample, masky, 0.5);\n   gl_FragColor *= sample.a;\n}"}}]),d}();e.default=d},{"../../../const":46,"../../../settings":101,"../../../utils":125,"./extractUniformsFromSrc":87}],87:[function(l,t,e){"use strict";function r(r,t){var e=d(r),n=d(t);return Object.assign(e,n)}function d(e){for(var t={},r=void 0,a=e.replace(/\s+/g," ").split(/\s*;\s*/),d=0,p;d<a.length;d++)if(p=a[d].trim(),-1<p.indexOf("uniform")){var f=p.split(" "),u=f[1],g=f[2],m=1;-1<g.indexOf("[")&&(r=g.split(/\[|]/),g=r[0],m*=+r[1]),g.match(/^(projectionMatrix|uSampler|filterArea|filterClamp)$/)||(t[g]={value:i(u,m),name:g,type:u})}return t}e.__esModule=!0,e.default=r;var n=l("pixi-gl-core"),o=function(e){return e&&e.__esModule?e:{default:e}}(n),i=o.default.shader.defaultValue},{"pixi-gl-core":15}],88:[function(a,t,e){"use strict";function r(a,t,e){var r=a.identity();return r.translate(t.x/e.width,t.y/e.height),r.scale(e.width,e.height),r}function n(a,t,e){var r=a.identity();r.translate(t.x/e.width,t.y/e.height);var n=e.width/t.width,i=e.height/t.height;return r.scale(n,i),r}function i(s,t,e,r){var n=r._texture.orig,i=s.set(e.width,0,0,e.height,t.x,t.y),o=r.worldTransform.copy(l.Matrix.TEMP_MATRIX);return o.invert(),i.prepend(o),i.scale(1/n.width,1/n.height),i.translate(r.anchor.x,r.anchor.y),i}e.__esModule=!0,e.calculateScreenSpaceMatrix=r,e.calculateNormalizedScreenSpaceMatrix=n,e.calculateSpriteMatrix=i;var l=a("../../../math")},{"../../../math":70}],89:[function(p,t,e){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function f(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function i(r,t){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:r}function n(r,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(r,t):r.__proto__=t)}e.__esModule=!0;var o=p("../Filter"),a=r(o),u=p("../../../../math"),s=(p("path"),p("../../../../textures/TextureMatrix")),l=r(s),c=function(a){function t(e){f(this,t);var r=new u.Matrix,n=i(this,a.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n\n    original *= (masky.r * masky.a * alpha * clip);\n\n    gl_FragColor = original;\n}\n"));return e.renderable=!1,n.maskSprite=e,n.maskMatrix=r,n}return n(t,a),t.prototype.apply=function(a,t,e,r){var n=this.maskSprite,i=this.maskSprite.texture;i.valid&&(i.transform||(i.transform=new l.default(i,0)),i.transform.update(),this.uniforms.mask=i,this.uniforms.otherMatrix=a.calculateSpriteMatrix(this.maskMatrix,n).prepend(i.transform.mapCoord),this.uniforms.alpha=n.worldAlpha,this.uniforms.maskClamp=i.transform.uClampFrame,a.applyFilter(this,t,e,r))},t}(a.default);e.default=c},{"../../../../math":70,"../../../../textures/TextureMatrix":116,"../Filter":86,path:8}],90:[function(T,t,e){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function S(r,t){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:r}function n(r,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(r,t):r.__proto__=t)}function o(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var i=T("./WebGLManager"),a=r(i),s=T("../utils/RenderTarget"),u=r(s),l=T("../utils/Quad"),c=r(l),d=T("../../../math"),f=T("../../../Shader"),p=r(f),v=T("../filters/filterTransforms"),g=function(n){if(n&&n.__esModule)return n;var t={};if(null!=n)for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t.default=n,t}(v),E=T("bit-twiddle"),m=r(E),_=function(){function e(){o(this,e),this.renderTarget=null,this.target=null,this.resolution=1,this.sourceFrame=new d.Rectangle,this.destinationFrame=new d.Rectangle,this.filters=[]}return e.prototype.clear=function(){this.filters=null,this.target=null,this.renderTarget=null},e}(),b=function(a){function t(e){o(this,t);var r=S(this,a.call(this,e));return r.gl=r.renderer.gl,r.quad=new c.default(r.gl,e.state.attribState),r.shaderCache={},r.pool={},r.filterData=null,r.managedFilters=[],r.renderer.on("prerender",r.onPrerender,r),r._screenWidth=e.view.width,r._screenHeight=e.view.height,r}return n(t,a),t.prototype.pushFilter=function(p,t){var e=this.renderer,r=this.filterData;if(!r){r=this.renderer._activeRenderTarget.filterStack;var g=new _;g.sourceFrame=g.destinationFrame=this.renderer._activeRenderTarget.size,g.renderTarget=e._activeRenderTarget,this.renderer._activeRenderTarget.filterData=r={index:0,stack:[g]},this.filterData=r}var i=r.stack[++r.index],m=r.stack[0].destinationFrame;i||(i=r.stack[r.index]=new _);var s=p.filterArea&&0===p.filterArea.x&&0===p.filterArea.y&&p.filterArea.width===e.screen.width&&p.filterArea.height===e.screen.height,a=t[0].resolution,u=0|t[0].padding,b=s?e.screen:p.filterArea||p.getBounds(!0),l=i.sourceFrame,c=i.destinationFrame;l.x=(0|b.x*a)/a,l.y=(0|b.y*a)/a,l.width=(0|b.width*a)/a,l.height=(0|b.height*a)/a,s||(r.stack[0].renderTarget.transform||t[0].autoFit&&l.fit(m),l.pad(u)),c.width=l.width,c.height=l.height;var d=this.getPotRenderTarget(e.gl,l.width,l.height,a);i.target=p,i.filters=t,i.resolution=a,i.renderTarget=d,d.setFrame(c,l),e.bindRenderTarget(d),d.clear()},t.prototype.popFilter=function(){var l=this.filterData,t=l.stack[l.index-1],e=l.stack[l.index];this.quad.map(e.renderTarget.size,e.sourceFrame).upload();var r=e.filters;if(1===r.length)r[0].apply(this,e.renderTarget,t.renderTarget,!1,e),this.freePotRenderTarget(e.renderTarget);else{var n=e.renderTarget,d=this.getPotRenderTarget(this.renderer.gl,e.sourceFrame.width,e.sourceFrame.height,e.resolution);d.setFrame(e.destinationFrame,e.sourceFrame),d.clear();var u=0;for(u=0;u<r.length-1;++u){r[u].apply(this,n,d,!0,e);var p=n;n=d,d=p}r[u].apply(this,n,t.renderTarget,!1,e),this.freePotRenderTarget(n),this.freePotRenderTarget(d)}e.clear(),0==--l.index&&(this.filterData=null)},t.prototype.applyFilter=function(l,t,e,r){var n=this.renderer,i=n.gl,o=l.glShaders[n.CONTEXT_UID];o||(l.glShaderKey?(o=this.shaderCache[l.glShaderKey])||(o=new p.default(this.gl,l.vertexSrc,l.fragmentSrc),l.glShaders[n.CONTEXT_UID]=this.shaderCache[l.glShaderKey]=o,this.managedFilters.push(l)):(o=l.glShaders[n.CONTEXT_UID]=new p.default(this.gl,l.vertexSrc,l.fragmentSrc),this.managedFilters.push(l)),n.bindVao(null),this.quad.initVao(o)),n.bindVao(this.quad.vao),n.bindRenderTarget(e),r&&(i.disable(i.SCISSOR_TEST),n.clear(),i.enable(i.SCISSOR_TEST)),e===n.maskManager.scissorRenderTarget&&n.maskManager.pushScissorMask(null,n.maskManager.scissorData),n.bindShader(o);var d=this.renderer.emptyTextures[0];this.renderer.boundTextures[0]=d,this.syncUniforms(o,l),n.state.setBlendMode(l.blendMode),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,t.texture.texture),this.quad.vao.draw(this.renderer.gl.TRIANGLES,6,0),i.bindTexture(i.TEXTURE_2D,d._glTextures[this.renderer.CONTEXT_UID].texture)},t.prototype.syncUniforms=function(d,t){var e=t.uniformData,r=t.uniforms,n=1,p;if(d.uniforms.filterArea){p=this.filterData.stack[this.filterData.index];var f=d.uniforms.filterArea;f[0]=p.renderTarget.size.width,f[1]=p.renderTarget.size.height,f[2]=p.sourceFrame.x,f[3]=p.sourceFrame.y,d.uniforms.filterArea=f}if(d.uniforms.filterClamp){p=p||this.filterData.stack[this.filterData.index];var s=d.uniforms.filterClamp;s[0]=0,s[1]=0,s[2]=(p.sourceFrame.width-1)/p.renderTarget.size.width,s[3]=(p.sourceFrame.height-1)/p.renderTarget.size.height,d.uniforms.filterClamp=s}for(var a in e)if(d.uniforms.data[a]){var u=e[a].type;if("sampler2d"===u&&0!==r[a]){if(r[a].baseTexture)d.uniforms[a]=this.renderer.bindTexture(r[a].baseTexture,n);else{d.uniforms[a]=n;var g=this.renderer.gl;this.renderer.boundTextures[n]=this.renderer.emptyTextures[n],g.activeTexture(g.TEXTURE0+n),r[a].texture.bind()}n++}else if("mat3"===u)d.uniforms[a]=void 0===r[a].a?r[a]:r[a].toArray(!0);else if(!("vec2"===u))"float"===u?d.uniforms.data[a].value!==e[a]&&(d.uniforms[a]=r[a]):d.uniforms[a]=r[a];else if(void 0!==r[a].x){var l=d.uniforms[a]||new Float32Array(2);l[0]=r[a].x,l[1]=r[a].y,d.uniforms[a]=l}else d.uniforms[a]=r[a]}},t.prototype.getRenderTarget=function(a,t){var e=this.filterData.stack[this.filterData.index],r=this.getPotRenderTarget(this.renderer.gl,e.sourceFrame.width,e.sourceFrame.height,t||e.resolution);return r.setFrame(e.destinationFrame,e.sourceFrame),r},t.prototype.returnRenderTarget=function(e){this.freePotRenderTarget(e)},t.prototype.calculateScreenSpaceMatrix=function(r){var t=this.filterData.stack[this.filterData.index];return g.calculateScreenSpaceMatrix(r,t.sourceFrame,t.renderTarget.size)},t.prototype.calculateNormalizedScreenSpaceMatrix=function(r){var t=this.filterData.stack[this.filterData.index];return g.calculateNormalizedScreenSpaceMatrix(r,t.sourceFrame,t.renderTarget.size,t.destinationFrame)},t.prototype.calculateSpriteMatrix=function(n,t){var e=this.filterData.stack[this.filterData.index];return g.calculateSpriteMatrix(n,e.sourceFrame,e.renderTarget.size,t)},t.prototype.destroy=function(){var a=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=this.renderer,e=this.managedFilters;t.off("prerender",this.onPrerender,this);for(var r=0;r<e.length;r++)a||e[r].glShaders[t.CONTEXT_UID].destroy(),delete e[r].glShaders[t.CONTEXT_UID];this.shaderCache={},a?this.pool={}:this.emptyPool()},t.prototype.getPotRenderTarget=function(a,t,l,d){var n="screen";t*=d,l*=d,t===this._screenWidth&&l===this._screenHeight||(t=m.default.nextPow2(t),l=m.default.nextPow2(l),n=(65535&t)<<16|65535&l),this.pool[n]||(this.pool[n]=[]);var p=this.pool[n].pop();if(!p){var c=this.renderer.boundTextures[0];a.activeTexture(a.TEXTURE0),p=new u.default(a,t,l,null,1),a.bindTexture(a.TEXTURE_2D,c._glTextures[this.renderer.CONTEXT_UID].texture)}return p.resolution=d,p.defaultFrame.width=p.size.width=t/d,p.defaultFrame.height=p.size.height=l/d,p.filterPoolKey=n,p},t.prototype.emptyPool=function(){for(var n in this.pool){var t=this.pool[n];if(t)for(var e=0;e<t.length;e++)t[e].destroy(!0)}this.pool={}},t.prototype.freePotRenderTarget=function(e){this.pool[e.filterPoolKey].push(e)},t.prototype.onPrerender=function(){if(this._screenWidth!==this.renderer.view.width||this._screenHeight!==this.renderer.view.height){this._screenWidth=this.renderer.view.width,this._screenHeight=this.renderer.view.height;var r=this.pool.screen;if(r)for(var t=0;t<r.length;t++)r[t].destroy(!0);this.pool.screen=[]}},t}(a.default);e.default=b},{"../../../Shader":44,"../../../math":70,"../filters/filterTransforms":88,"../utils/Quad":95,"../utils/RenderTarget":96,"./WebGLManager":93,"bit-twiddle":1}],91:[function(d,t,e){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function p(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function i(r,t){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:r}function n(r,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(r,t):r.__proto__=t)}e.__esModule=!0;var o=d("./WebGLManager"),a=r(o),s=d("../filters/spriteMask/SpriteMaskFilter"),u=r(s),f=function(a){function t(e){p(this,t);var r=i(this,a.call(this,e));return r.scissor=!1,r.scissorData=null,r.scissorRenderTarget=null,r.enableScissor=!0,r.alphaMaskPool=[],r.alphaMaskIndex=0,r}return n(t,a),t.prototype.pushMask=function(a,t){if(t.texture)this.pushSpriteMask(a,t);else if(this.enableScissor&&!this.scissor&&this.renderer._activeRenderTarget.root&&!this.renderer.stencilManager.stencilMaskStack.length&&t.isFastRect()){var e=t.worldTransform,r=T(e.b,e.a);r=l(r*(180/Z)),r%90?this.pushStencilMask(t):this.pushScissorMask(a,t)}else this.pushStencilMask(t)},t.prototype.popMask=function(r,t){t.texture?this.popSpriteMask(r,t):this.enableScissor&&!this.renderer.stencilManager.stencilMaskStack.length?this.popScissorMask(r,t):this.popStencilMask(r,t)},t.prototype.pushSpriteMask=function(a,t){var e=this.alphaMaskPool[this.alphaMaskIndex];e||(e=this.alphaMaskPool[this.alphaMaskIndex]=[new u.default(t)]),e[0].resolution=this.renderer.resolution,e[0].maskSprite=t;var o=a.filterArea;a.filterArea=t.getBounds(!0),this.renderer.filterManager.pushFilter(a,e),a.filterArea=o,this.alphaMaskIndex++},t.prototype.popSpriteMask=function(){this.renderer.filterManager.popFilter(),this.alphaMaskIndex--},t.prototype.pushStencilMask=function(e){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.pushStencil(e)},t.prototype.popStencilMask=function(){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.popStencil()},t.prototype.pushScissorMask=function(a,t){t.renderable=!0;var e=this.renderer._activeRenderTarget,r=t.getBounds();r.fit(e.size),t.renderable=!1,this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST);var n=this.renderer.resolution;this.renderer.gl.scissor(r.x*n,(e.root?e.size.height-r.y-r.height:r.y)*n,r.width*n,r.height*n),this.scissorRenderTarget=e,this.scissorData=t,this.scissor=!0},t.prototype.popScissorMask=function(){this.scissorRenderTarget=null,this.scissorData=null,this.scissor=!1;var e=this.renderer.gl;e.disable(e.SCISSOR_TEST)},t}(a.default);e.default=f},{"../filters/spriteMask/SpriteMaskFilter":89,"./WebGLManager":93}],92:[function(l,t,e){"use strict";function d(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function n(r,t){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:r}function r(r,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(r,t):r.__proto__=t)}e.__esModule=!0;var o=l("./WebGLManager"),i=function(e){return e&&e.__esModule?e:{default:e}}(o),a=function(a){function t(e){d(this,t);var r=n(this,a.call(this,e));return r.stencilMaskStack=null,r}return r(t,a),t.prototype.setMaskStack=function(r){this.stencilMaskStack=r;var t=this.renderer.gl;0===r.length?t.disable(t.STENCIL_TEST):t.enable(t.STENCIL_TEST)},t.prototype.pushStencil=function(n){this.renderer.setObjectRenderer(this.renderer.plugins.graphics),this.renderer._activeRenderTarget.attachStencilBuffer();var t=this.renderer.gl,e=this.stencilMaskStack.length;0===e&&t.enable(t.STENCIL_TEST),this.stencilMaskStack.push(n),t.colorMask(!1,!1,!1,!1),t.stencilFunc(t.EQUAL,e,this._getBitwiseMask()),t.stencilOp(t.KEEP,t.KEEP,t.INCR),this.renderer.plugins.graphics.render(n),this._useCurrent()},t.prototype.popStencil=function(){this.renderer.setObjectRenderer(this.renderer.plugins.graphics);var r=this.renderer.gl,t=this.stencilMaskStack.pop();0===this.stencilMaskStack.length?(r.disable(r.STENCIL_TEST),r.clear(r.STENCIL_BUFFER_BIT),r.clearStencil(0)):(r.colorMask(!1,!1,!1,!1),r.stencilOp(r.KEEP,r.KEEP,r.DECR),this.renderer.plugins.graphics.render(t),this._useCurrent())},t.prototype._useCurrent=function(){var e=this.renderer.gl;e.colorMask(!0,!0,!0,!0),e.stencilFunc(e.EQUAL,this.stencilMaskStack.length,this._getBitwiseMask()),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)},t.prototype._getBitwiseMask=function(){return(1<<this.stencilMaskStack.length)-1},t.prototype.destroy=function(){i.default.prototype.destroy.call(this),this.stencilMaskStack.stencilStack=null},t}(i.default);e.default=a},{"./WebGLManager":93}],93:[function(a,t,e){"use strict";function r(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var n=function(){function n(t){r(this,n),this.renderer=t,this.renderer.on("context",this.onContextChange,this)}return n.prototype.onContextChange=function(){},n.prototype.destroy=function(){this.renderer.off("context",this.onContextChange,this),this.renderer=null},n}();e.default=n},{}],94:[function(l,t,e){"use strict";function r(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function n(r,t){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:r}function i(r,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(r,t):r.__proto__=t)}e.__esModule=!0;var o=l("../managers/WebGLManager"),s=function(e){return e&&e.__esModule?e:{default:e}}(o),a=function(a){function t(){return r(this,t),n(this,a.apply(this,arguments))}return i(t,a),t.prototype.start=function(){},t.prototype.stop=function(){this.flush()},t.prototype.flush=function(){},t.prototype.render=function(){},t}(s.default);e.default=a},{"../managers/WebGLManager":93}],95:[function(l,t,e){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function d(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var n=l("pixi-gl-core"),o=r(n),i=l("../../../utils/createIndicesForQuads"),a=r(i),s=function(){function i(t,e){d(this,i),this.gl=t,this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.interleaved=new Float32Array(16);for(var r=0;4>r;r++)this.interleaved[4*r]=this.vertices[2*r],this.interleaved[4*r+1]=this.vertices[2*r+1],this.interleaved[4*r+2]=this.uvs[2*r],this.interleaved[4*r+3]=this.uvs[2*r+1];this.indices=(0,a.default)(1),this.vertexBuffer=o.default.GLBuffer.createVertexBuffer(t,this.interleaved,t.STATIC_DRAW),this.indexBuffer=o.default.GLBuffer.createIndexBuffer(t,this.indices,t.STATIC_DRAW),this.vao=new o.default.VertexArrayObject(t,e)}return i.prototype.initVao=function(e){this.vao.clear().addIndex(this.indexBuffer).addAttribute(this.vertexBuffer,e.attributes.aVertexPosition,this.gl.FLOAT,!1,16,0).addAttribute(this.vertexBuffer,e.attributes.aTextureCoord,this.gl.FLOAT,!1,16,8)},i.prototype.map=function(a,t){var e=0,o=0;return this.uvs[0]=e,this.uvs[1]=o,this.uvs[2]=e+t.width/a.width,this.uvs[3]=o,this.uvs[4]=e+t.width/a.width,this.uvs[5]=o+t.height/a.height,this.uvs[6]=e,this.uvs[7]=o+t.height/a.height,e=t.x,o=t.y,this.vertices[0]=e,this.vertices[1]=o,this.vertices[2]=e+t.width,this.vertices[3]=o,this.vertices[4]=e+t.width,this.vertices[5]=o+t.height,this.vertices[6]=e,this.vertices[7]=o+t.height,this},i.prototype.upload=function(){for(var e=0;4>e;e++)this.interleaved[4*e]=this.vertices[2*e],this.interleaved[4*e+1]=this.vertices[2*e+1],this.interleaved[4*e+2]=this.uvs[2*e],this.interleaved[4*e+3]=this.uvs[2*e+1];return this.vertexBuffer.upload(this.interleaved),this},i.prototype.destroy=function(){var e=this.gl;e.deleteBuffer(this.vertexBuffer),e.deleteBuffer(this.indexBuffer)},i}();e.default=s},{"../../../utils/createIndicesForQuads":123,"pixi-gl-core":15}],96:[function(l,t,e){"use strict";function d(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var n=l("../../../math"),i=l("../../../const"),r=l("../../../settings"),o=function(e){return e&&e.__esModule?e:{default:e}}(r),a=l("pixi-gl-core"),s=function(){function u(t,e,r,s,p,l){d(this,u),this.gl=t,this.frameBuffer=null,this.texture=null,this.clearColor=[0,0,0,0],this.size=new n.Rectangle(0,0,1,1),this.resolution=p||o.default.RESOLUTION,this.projectionMatrix=new n.Matrix,this.transform=null,this.frame=null,this.defaultFrame=new n.Rectangle,this.destinationFrame=null,this.sourceFrame=null,this.stencilBuffer=null,this.stencilMaskStack=[],this.filterData=null,this.filterPoolKey="",this.scaleMode=void 0===s?o.default.SCALE_MODE:s,this.root=l||!1,this.root?(this.frameBuffer=new a.GLFramebuffer(t,100,100),this.frameBuffer.framebuffer=null):(this.frameBuffer=a.GLFramebuffer.createRGBA(t,100,100),this.scaleMode===i.SCALE_MODES.NEAREST?this.frameBuffer.texture.enableNearestScaling():this.frameBuffer.texture.enableLinearScaling(),this.texture=this.frameBuffer.texture),this.setFrame(),this.resize(e,r)}return u.prototype.clear=function(r){var t=r||this.clearColor;this.frameBuffer.clear(t[0],t[1],t[2],t[3])},u.prototype.attachStencilBuffer=function(){this.root||this.frameBuffer.enableStencil()},u.prototype.setFrame=function(r,t){this.destinationFrame=r||this.destinationFrame||this.defaultFrame,this.sourceFrame=t||this.sourceFrame||this.destinationFrame},u.prototype.activate=function(){var e=this.gl;this.frameBuffer.bind(),this.calculateProjection(this.destinationFrame,this.sourceFrame),this.transform&&this.projectionMatrix.append(this.transform),this.destinationFrame===this.sourceFrame?e.disable(e.SCISSOR_TEST):(e.enable(e.SCISSOR_TEST),e.scissor(0|this.destinationFrame.x,0|this.destinationFrame.y,0|this.destinationFrame.width*this.resolution,0|this.destinationFrame.height*this.resolution)),e.viewport(0|this.destinationFrame.x,0|this.destinationFrame.y,0|this.destinationFrame.width*this.resolution,0|this.destinationFrame.height*this.resolution)},u.prototype.calculateProjection=function(n,t){var a=this.projectionMatrix;t=t||n,a.identity(),this.root?(a.a=2*(1/n.width),a.d=2*(-1/n.height),a.tx=-1-t.x*a.a,a.ty=1-t.y*a.d):(a.a=2*(1/n.width),a.d=2*(1/n.height),a.tx=-1-t.x*a.a,a.ty=-1-t.y*a.d)},u.prototype.resize=function(n,a){if(n|=0,a|=0,this.size.width!==n||this.size.height!==a){this.size.width=n,this.size.height=a,this.defaultFrame.width=n,this.defaultFrame.height=a,this.frameBuffer.resize(n*this.resolution,a*this.resolution);var o=this.frame||this.size;this.calculateProjection(o)}},u.prototype.destroy=function(){this.frameBuffer.stencil&&this.gl.deleteRenderbuffer(this.frameBuffer.stencil),this.frameBuffer.destroy(),this.frameBuffer=null,this.texture=null},u}();e.default=s},{"../../../const":46,"../../../math":70,"../../../settings":101,"pixi-gl-core":15}],97:[function(l,t,e){"use strict";function r(a,i){var l=!i;if(l){var r=document.createElement("canvas");r.width=1,r.height=1,i=o.default.createContext(r)}for(var d=i.createShader(i.FRAGMENT_SHADER),p;;){if(p=s.replace(/%forloop%/gi,n(a)),i.shaderSource(d,p),i.compileShader(d),i.getShaderParameter(d,i.COMPILE_STATUS))break;a=0|a/2}return l&&i.getExtension("WEBGL_lose_context")&&i.getExtension("WEBGL_lose_context").loseContext(),a}function n(n){for(var t="",a=0;a<n;++a)0<a&&(t+="\nelse "),a<n-1&&(t+="if(test == "+a+".0){}");return t}e.__esModule=!0,e.default=r;var i=l("pixi-gl-core"),o=function(e){return e&&e.__esModule?e:{default:e}}(i),s="precision mediump float;\nvoid main(void){\nfloat test = 0.1;\n%forloop%\ngl_FragColor = vec4(0.0);\n}"},{"pixi-gl-core":15}],98:[function(n,t,e){"use strict";e.__esModule=!0,e.default=function(n){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];return t[r.BLEND_MODES.NORMAL]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],t[r.BLEND_MODES.ADD]=[n.ONE,n.ONE],t[r.BLEND_MODES.MULTIPLY]=[n.DST_COLOR,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA],t[r.BLEND_MODES.SCREEN]=[n.ONE,n.ONE_MINUS_SRC_COLOR,n.ONE,n.ONE_MINUS_SRC_ALPHA],t[r.BLEND_MODES.OVERLAY]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],t[r.BLEND_MODES.DARKEN]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],t[r.BLEND_MODES.LIGHTEN]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],t[r.BLEND_MODES.COLOR_DODGE]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],t[r.BLEND_MODES.COLOR_BURN]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],t[r.BLEND_MODES.HARD_LIGHT]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],t[r.BLEND_MODES.SOFT_LIGHT]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],t[r.BLEND_MODES.DIFFERENCE]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],t[r.BLEND_MODES.EXCLUSION]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],t[r.BLEND_MODES.HUE]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],t[r.BLEND_MODES.SATURATION]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],t[r.BLEND_MODES.COLOR]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],t[r.BLEND_MODES.LUMINOSITY]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],t[r.BLEND_MODES.NORMAL_NPM]=[n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA],t[r.BLEND_MODES.ADD_NPM]=[n.SRC_ALPHA,n.ONE,n.ONE,n.ONE],t[r.BLEND_MODES.SCREEN_NPM]=[n.SRC_ALPHA,n.ONE_MINUS_SRC_COLOR,n.ONE,n.ONE_MINUS_SRC_ALPHA],t};var r=n("../../../const")},{"../../../const":46}],99:[function(n,t,e){"use strict";e.__esModule=!0,e.default=function(n){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return t[r.DRAW_MODES.POINTS]=n.POINTS,t[r.DRAW_MODES.LINES]=n.LINES,t[r.DRAW_MODES.LINE_LOOP]=n.LINE_LOOP,t[r.DRAW_MODES.LINE_STRIP]=n.LINE_STRIP,t[r.DRAW_MODES.TRIANGLES]=n.TRIANGLES,t[r.DRAW_MODES.TRIANGLE_STRIP]=n.TRIANGLE_STRIP,t[r.DRAW_MODES.TRIANGLE_FAN]=n.TRIANGLE_FAN,t};var r=n("../../../const")},{"../../../const":46}],100:[function(n,t,e){"use strict";e.__esModule=!0,e.default=function(e){e.getContextAttributes().stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly")}},{}],101:[function(l,t,e){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}e.__esModule=!0;var n=l("./utils/maxRecommendedTextures"),i=r(n),o=l("./utils/canUploadSameBuffer"),s=r(o);e.default={TARGET_FPMS:.06,MIPMAP_TEXTURES:!0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:(0,i.default)(32),SPRITE_BATCH_SIZE:4096,RETINA_PREFIX:/@([0-9\.]+)x/,RENDER_OPTIONS:{view:null,antialias:!1,forceFXAA:!1,autoResize:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,roundPixels:!1,width:800,height:600,legacy:!1},TRANSFORM_MODE:0,GC_MODE:0,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:0,SCALE_MODE:0,PRECISION_VERTEX:"highp",PRECISION_FRAGMENT:"mediump",CAN_UPLOAD_SAME_BUFFER:(0,s.default)(),MESH_CANVAS_PADDING:0}},{"./utils/canUploadSameBuffer":122,"./utils/maxRecommendedTextures":127}],102:[function(m,t,e){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function _(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function i(r,t){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:r}function n(r,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(r,t):r.__proto__=t)}e.__esModule=!0;var o=function(){function a(a,t){for(var e=0,o;e<t.length;e++)o=t[e],o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(a,o.key,o)}return function(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t}}(),a=m("../math"),s=m("../utils"),u=m("../const"),l=m("../textures/Texture"),c=r(l),d=m("../display/Container"),f=r(d),p=new a.Point,b=function(l){function d(e){_(this,d);var t=i(this,l.call(this));return t._anchor=new a.ObservablePoint(t._onAnchorUpdate,t,e?e.defaultAnchor.x:0,e?e.defaultAnchor.y:0),t._texture=null,t._width=0,t._height=0,t._tint=null,t._tintRGB=null,t.tint=16777215,t.blendMode=u.BLEND_MODES.NORMAL,t.shader=null,t.cachedTint=16777215,t.texture=e||c.default.EMPTY,t.vertexData=new Float32Array(8),t.vertexTrimmedData=null,t._transformID=-1,t._textureID=-1,t._transformTrimmedID=-1,t._textureTrimmedID=-1,t.pluginName="sprite",t}return n(d,l),d.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this.cachedTint=16777215,this._width&&(this.scale.x=(0,s.sign)(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=(0,s.sign)(this.scale.y)*this._height/this._texture.orig.height)},d.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},d.prototype.calculateVertices=function(){if(this._transformID!==this.transform._worldID||this._textureID!==this._texture._updateID){this._transformID=this.transform._worldID,this._textureID=this._texture._updateID;var g=this._texture,t=this.transform.worldTransform,e=t.a,r=t.b,n=t.c,i=t.d,o=t.tx,s=t.ty,a=this.vertexData,u=g.trim,m=g.orig,l=this._anchor,c=0,_=0,b=0,T=0;u?(_=u.x-l._x*m.width,c=_+u.width,T=u.y-l._y*m.height,b=T+u.height):(_=-l._x*m.width,c=_+m.width,T=-l._y*m.height,b=T+m.height),a[0]=e*_+n*T+o,a[1]=i*T+r*_+s,a[2]=e*c+n*T+o,a[3]=i*T+r*c+s,a[4]=e*c+n*b+o,a[5]=i*b+r*c+s,a[6]=e*_+n*b+o,a[7]=i*b+r*_+s}},d.prototype.calculateTrimmedVertices=function(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var g=this._texture,t=this.vertexTrimmedData,e=g.orig,r=this._anchor,n=this.transform.worldTransform,i=n.a,o=n.b,s=n.c,a=n.d,u=n.tx,m=n.ty,l=-r._x*e.width,c=l+e.width,d=-r._y*e.height,f=d+e.height;t[0]=i*l+s*d+u,t[1]=a*d+o*l+m,t[2]=i*c+s*d+u,t[3]=a*d+o*c+m,t[4]=i*c+s*f+u,t[5]=a*f+o*c+m,t[6]=i*l+s*f+u,t[7]=a*f+o*l+m},d.prototype._renderWebGL=function(e){this.calculateVertices(),e.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this)},d.prototype._renderCanvas=function(e){e.plugins[this.pluginName].render(this)},d.prototype._calculateBounds=function(){var r=this._texture.trim,t=this._texture.orig;r&&(r.width!==t.width||r.height!==t.height)?(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData)):(this.calculateVertices(),this._bounds.addQuad(this.vertexData))},d.prototype.getLocalBounds=function(t){return 0===this.children.length?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new a.Rectangle),t=this._localBoundsRect),this._bounds.getRectangle(t)):l.prototype.getLocalBounds.call(this,t)},d.prototype.containsPoint=function(a){this.worldTransform.applyInverse(a,p);var t=this._texture.orig.width,e=this._texture.orig.height,r=-t*this.anchor.x,n=0;return p.x>=r&&p.x<r+t&&(n=-e*this.anchor.y,p.y>=n&&p.y<n+e)},d.prototype.destroy=function(t){if(l.prototype.destroy.call(this,t),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,"boolean"==typeof t?t:t&&t.texture){var e="boolean"==typeof t?t:t&&t.baseTexture;this._texture.destroy(!!e)}this._texture=null,this.shader=null},d.from=function(e){return new d(c.default.from(e))},d.fromFrame=function(e){var t=s.TextureCache[e];if(!t)throw new Error("The frameId \""+e+"\" does not exist in the texture cache");return new d(t)},d.fromImage=function(e,t,r){return new d(c.default.fromImage(e,t,r))},o(d,[{key:"width",get:function(){return ee(this.scale.x)*this._texture.orig.width},set:function(r){var t=(0,s.sign)(this.scale.x)||1;this.scale.x=t*r/this._texture.orig.width,this._width=r}},{key:"height",get:function(){return ee(this.scale.y)*this._texture.orig.height},set:function(r){var t=(0,s.sign)(this.scale.y)||1;this.scale.y=t*r/this._texture.orig.height,this._height=r}},{key:"anchor",get:function(){return this._anchor},set:function(e){this._anchor.copy(e)}},{key:"tint",get:function(){return this._tint},set:function(e){this._tint=e,this._tintRGB=(e>>16)+(65280&e)+((255&e)<<16)}},{key:"texture",get:function(){return this._texture},set:function(e){this._texture!==e&&(this._texture=e||c.default.EMPTY,this.cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,e&&(e.baseTexture.hasLoaded?this._onTextureUpdate():e.once("update",this._onTextureUpdate,this)))}}]),d}(f.default);e.default=b},{"../const":46,"../display/Container":48,"../math":70,"../textures/Texture":115,"../utils":125}],103:[function(p,t,e){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var i=p("../../renderers/canvas/CanvasRenderer"),o=r(i),g=p("../../const"),a=p("../../math"),s=p("./CanvasTinter"),u=r(s),l=new a.Matrix,c=function(){function r(t){n(this,r),this.renderer=t}return r.prototype.render=function(p){var t=p._texture,e=this.renderer,r=t._frame.width,n=t._frame.height,i=p.transform.worldTransform,c=0,m=0;if(!(0>=t.orig.width||0>=t.orig.height)&&t.baseTexture.source&&(e.setBlendMode(p.blendMode),t.valid)){e.context.globalAlpha=p.worldAlpha;var _=t.baseTexture.scaleMode===g.SCALE_MODES.LINEAR;e.smoothProperty&&e.context[e.smoothProperty]!==_&&(e.context[e.smoothProperty]=_),t.trim?(c=t.trim.width/2+t.trim.x-p.anchor.x*t.orig.width,m=t.trim.height/2+t.trim.y-p.anchor.y*t.orig.height):(c=(.5-p.anchor.x)*t.orig.width,m=(.5-p.anchor.y)*t.orig.height),t.rotate&&(i.copy(l),i=l,a.GroupD8.matrixAppendRotationInv(i,t.rotate,c,m),c=0,m=0),c-=r/2,m-=n/2,e.roundPixels?(e.context.setTransform(i.a,i.b,i.c,i.d,0|i.tx*e.resolution,0|i.ty*e.resolution),c|=0,m|=0):e.context.setTransform(i.a,i.b,i.c,i.d,i.tx*e.resolution,i.ty*e.resolution);var d=t.baseTexture.resolution;16777215===p.tint?e.context.drawImage(t.baseTexture.source,t._frame.x*d,t._frame.y*d,r*d,n*d,c*e.resolution,m*e.resolution,r*e.resolution,n*e.resolution):(p.cachedTint===p.tint&&p.tintedTexture.tintId===p._texture._updateID||(p.cachedTint=p.tint,p.tintedTexture=u.default.getTintedTexture(p,p.tint)),e.context.drawImage(p.tintedTexture,0,0,r*d,n*d,c*e.resolution,m*e.resolution,r*e.resolution,n*e.resolution))}},r.prototype.destroy=function(){this.renderer=null},r}();e.default=c,o.default.registerPlugin("sprite",c)},{"../../const":46,"../../math":70,"../../renderers/canvas/CanvasRenderer":77,"./CanvasTinter":104}],104:[function(a,t,e){"use strict";e.__esModule=!0;var p=a("../../utils"),r=a("../../renderers/canvas/utils/canUseNewCanvasBlendModes"),n=function(e){return e&&e.__esModule?e:{default:e}}(r),l={getTintedTexture:function(s,t){var d=s._texture;t=l.roundColor(t);var r="#"+("00000"+(0|t).toString(16)).substr(-6);d.tintCache=d.tintCache||{};var n=d.tintCache[r],i;if(n){if(n.tintId===d._updateID)return d.tintCache[r];i=d.tintCache[r]}else i=l.canvas||document.createElement("canvas");if(l.tintMethod(d,t,i),i.tintId=d._updateID,l.convertTintToImage){var u=new Image;u.src=i.toDataURL(),d.tintCache[r]=u}else d.tintCache[r]=i,l.canvas=null;return i},tintWithMultiply:function(a,t,e){var r=e.getContext("2d"),n=a._frame.clone(),i=a.baseTexture.resolution;n.x*=i,n.y*=i,n.width*=i,n.height*=i,e.width=C(n.width),e.height=C(n.height),r.save(),r.fillStyle="#"+("00000"+(0|t).toString(16)).substr(-6),r.fillRect(0,0,n.width,n.height),r.globalCompositeOperation="multiply",r.drawImage(a.baseTexture.source,n.x,n.y,n.width,n.height,0,0,n.width,n.height),r.globalCompositeOperation="destination-atop",r.drawImage(a.baseTexture.source,n.x,n.y,n.width,n.height,0,0,n.width,n.height),r.restore()},tintWithOverlay:function(a,t,e){var r=e.getContext("2d"),n=a._frame.clone(),i=a.baseTexture.resolution;n.x*=i,n.y*=i,n.width*=i,n.height*=i,e.width=C(n.width),e.height=C(n.height),r.save(),r.globalCompositeOperation="copy",r.fillStyle="#"+("00000"+(0|t).toString(16)).substr(-6),r.fillRect(0,0,n.width,n.height),r.globalCompositeOperation="destination-atop",r.drawImage(a.baseTexture.source,n.x,n.y,n.width,n.height,0,0,n.width,n.height),r.restore()},tintWithPerPixel:function(n,t,e){var r=e.getContext("2d"),i=n._frame.clone(),o=n.baseTexture.resolution;i.x*=o,i.y*=o,i.width*=o,i.height*=o,e.width=C(i.width),e.height=C(i.height),r.save(),r.globalCompositeOperation="copy",r.drawImage(n.baseTexture.source,i.x,i.y,i.width,i.height,0,0,i.width,i.height),r.restore();for(var s=(0,p.hex2rgb)(t),a=s[0],u=s[1],g=s[2],l=r.getImageData(0,0,i.width,i.height),c=l.data,d=0;d<c.length;d+=4)c[d+0]*=a,c[d+1]*=u,c[d+2]*=g;r.putImageData(l,0,0)},roundColor:function(n){var t=l.cacheStepsPerColorChannel,e=(0,p.hex2rgb)(n);return e[0]=Q(255,e[0]/t*t),e[1]=Q(255,e[1]/t*t),e[2]=Q(255,e[2]/t*t),(0,p.rgb2hex)(e)},cacheStepsPerColorChannel:8,convertTintToImage:!1,canUseMultiply:(0,n.default)(),tintMethod:0};l.tintMethod=l.canUseMultiply?l.tintWithMultiply:l.tintWithPerPixel,e.default=l},{"../../renderers/canvas/utils/canUseNewCanvasBlendModes":80,"../../utils":125}],105:[function(a,t,e){"use strict";function r(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var n=function(){function n(t){r(this,n),this.vertices=new ArrayBuffer(t),this.float32View=new Float32Array(this.vertices),this.uint32View=new Uint32Array(this.vertices)}return n.prototype.destroy=function(){this.vertices=null,this.positions=null,this.uvs=null,this.colors=null},n}();e.default=n},{}],106:[function(C,t,e){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function A(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function i(r,t){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:r}function n(r,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(r,t):r.__proto__=t)}e.__esModule=!0;var o=C("../../renderers/webgl/utils/ObjectRenderer"),a=r(o),s=C("../../renderers/webgl/WebGLRenderer"),u=r(s),l=C("../../utils/createIndicesForQuads"),c=r(l),d=C("./generateMultiTextureShader"),f=r(d),p=C("../../renderers/webgl/utils/checkMaxIfStatmentsInShader"),v=r(p),g=C("./BatchBuffer"),R=r(g),m=C("../../settings"),W=r(m),b=C("../../utils"),_=C("pixi-gl-core"),T=r(_),I=C("bit-twiddle"),Y=r(I),S=0,E=0,D=function(o){function t(e){A(this,t);var r=i(this,o.call(this,e));r.vertSize=5,r.vertByteSize=4*r.vertSize,r.size=W.default.SPRITE_BATCH_SIZE,r.buffers=[];for(var n=1;n<=Y.default.nextPow2(r.size);n*=2)r.buffers.push(new R.default(4*n*r.vertByteSize));r.indices=(0,c.default)(r.size),r.shader=null,r.currentIndex=0,r.groups=[];for(var l=0;l<r.size;l++)r.groups[l]={textures:[],textureCount:0,ids:[],size:0,start:0,blend:0};return r.sprites=[],r.vertexBuffers=[],r.vaos=[],r.vaoMax=2,r.vertexCount=0,r.renderer.on("prerender",r.onPrerender,r),r}return n(t,o),t.prototype.onContextChange=function(){var a=this.renderer.gl;this.renderer.legacy?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Q(a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS),W.default.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=(0,v.default)(this.MAX_TEXTURES,a)),this.shader=(0,f.default)(a,this.MAX_TEXTURES),this.indexBuffer=T.default.GLBuffer.createIndexBuffer(a,this.indices,a.STATIC_DRAW),this.renderer.bindVao(null);for(var t=this.shader.attributes,e=0;e<this.vaoMax;e++){var o=this.vertexBuffers[e]=T.default.GLBuffer.createVertexBuffer(a,null,a.STREAM_DRAW),n=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(o,t.aVertexPosition,a.FLOAT,!1,this.vertByteSize,0).addAttribute(o,t.aTextureCoord,a.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(o,t.aColor,a.UNSIGNED_BYTE,!0,this.vertByteSize,12);t.aTextureId&&n.addAttribute(o,t.aTextureId,a.FLOAT,!1,this.vertByteSize,16),this.vaos[e]=n}this.vao=this.vaos[0],this.currentBlendMode=99999,this.boundTextures=Array(this.MAX_TEXTURES)},t.prototype.onPrerender=function(){this.vertexCount=0},t.prototype.render=function(e){this.currentIndex>=this.size&&this.flush(),e._texture._uvs&&(this.sprites[this.currentIndex++]=e)},t.prototype.flush=function(){if(0!==this.currentIndex){var M=this.renderer.gl,t=this.MAX_TEXTURES,e=Y.default.nextPow2(this.currentIndex),r=Y.default.log2(e),n=this.buffers[r],i=this.sprites,o=this.groups,s=n.float32View,a=n.uint32View,u=this.boundTextures,O=this.renderer.boundTextures,l=this.renderer.textureGC.count,c=0,V=1,H=0,z=o[0],q=b.premultiplyBlendMode[i[0]._texture.baseTexture.premultipliedAlpha?1:0][i[0].blendMode],K,Z,J,$;z.textureCount=0,z.start=0,z.blend=q,S++;var ee;for(ee=0;ee<t;++ee){var te=O[ee];te._enabled===S?u[ee]=this.renderer.emptyTextures[ee]:(u[ee]=te,te._virtalBoundId=ee,te._enabled=S)}for(S++,ee=0;ee<this.currentIndex;++ee){var P=i[ee];i[ee]=null,K=P._texture.baseTexture;var C=b.premultiplyBlendMode[+K.premultipliedAlpha][P.blendMode];if(q!==C&&(q=C,Z=null,H=t,S++),Z!==K&&(Z=K,K._enabled!==S)){if(H===t&&(S++,z.size=ee-z.start,H=0,z=o[V++],z.blend=q,z.textureCount=0,z.start=ee),K.touched=l,-1===K._virtalBoundId)for(var R=0;R<t;++R){var re=(R+E)%t,I=u[re];if(I._enabled!==S){E++,I._virtalBoundId=-1,K._virtalBoundId=re,u[re]=K;break}}K._enabled=S,z.textureCount++,z.ids[H]=K._virtalBoundId,z.textures[H++]=K}if(J=P.vertexData,$=P._texture._uvs.uvsUint32,this.renderer.roundPixels){var D=this.renderer.resolution;s[c]=(0|J[0]*D)/D,s[c+1]=(0|J[1]*D)/D,s[c+5]=(0|J[2]*D)/D,s[c+6]=(0|J[3]*D)/D,s[c+10]=(0|J[4]*D)/D,s[c+11]=(0|J[5]*D)/D,s[c+15]=(0|J[6]*D)/D,s[c+16]=(0|J[7]*D)/D}else s[c]=J[0],s[c+1]=J[1],s[c+5]=J[2],s[c+6]=J[3],s[c+10]=J[4],s[c+11]=J[5],s[c+15]=J[6],s[c+16]=J[7];a[c+2]=$[0],a[c+7]=$[1],a[c+12]=$[2],a[c+17]=$[3];var L=Q(P.worldAlpha,1),N=1>L&&K.premultipliedAlpha?(0,b.premultiplyTint)(P._tintRGB,L):P._tintRGB+(255*L<<24);a[c+3]=a[c+8]=a[c+13]=a[c+18]=N,s[c+4]=s[c+9]=s[c+14]=s[c+19]=K._virtalBoundId,c+=20}if(z.size=ee-z.start,W.default.CAN_UPLOAD_SAME_BUFFER)this.vertexBuffers[this.vertexCount].upload(n.vertices,0,!0);else{if(this.vaoMax<=this.vertexCount){this.vaoMax++;var B=this.shader.attributes,k=this.vertexBuffers[this.vertexCount]=T.default.GLBuffer.createVertexBuffer(M,null,M.STREAM_DRAW),F=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(k,B.aVertexPosition,M.FLOAT,!1,this.vertByteSize,0).addAttribute(k,B.aTextureCoord,M.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(k,B.aColor,M.UNSIGNED_BYTE,!0,this.vertByteSize,12);B.aTextureId&&F.addAttribute(k,B.aTextureId,M.FLOAT,!1,this.vertByteSize,16),this.vaos[this.vertexCount]=F}this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].upload(n.vertices,0,!1),this.vertexCount++}for(ee=0;ee<t;++ee)O[ee]._virtalBoundId=-1;for(ee=0;ee<V;++ee){for(var j=o[ee],U=j.textureCount,X=0;X<U;X++)Z=j.textures[X],O[j.ids[X]]!==Z&&this.renderer.bindTexture(Z,j.ids[X],!0),Z._virtalBoundId=-1;this.renderer.state.setBlendMode(j.blend),M.drawElements(M.TRIANGLES,6*j.size,M.UNSIGNED_SHORT,2*(6*j.start))}this.currentIndex=0}},t.prototype.start=function(){this.renderer.bindShader(this.shader),W.default.CAN_UPLOAD_SAME_BUFFER&&(this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].bind())},t.prototype.stop=function(){this.flush()},t.prototype.destroy=function(){for(var t=0;t<this.vaoMax;t++)this.vertexBuffers[t]&&this.vertexBuffers[t].destroy(),this.vaos[t]&&this.vaos[t].destroy();this.indexBuffer&&this.indexBuffer.destroy(),this.renderer.off("prerender",this.onPrerender,this),o.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.vertexBuffers=null,this.vaos=null,this.indexBuffer=null,this.indices=null,this.sprites=null;for(var n=0;n<this.buffers.length;++n)this.buffers[n].destroy()},t}(a.default);e.default=D,u.default.registerPlugin("sprite",D)},{"../../renderers/webgl/WebGLRenderer":84,"../../renderers/webgl/utils/ObjectRenderer":94,"../../renderers/webgl/utils/checkMaxIfStatmentsInShader":97,"../../settings":101,"../../utils":125,"../../utils/createIndicesForQuads":123,"./BatchBuffer":105,"./generateMultiTextureShader":107,"bit-twiddle":1,"pixi-gl-core":15}],107:[function(l,t,e){"use strict";function r(a,t){var e=s;e=e.replace(/%count%/gi,t),e=e.replace(/%forloop%/gi,d(t));for(var l=new i.default(a,"precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor;\n}\n",e),n=[],o=0;o<t;o++)n[o]=o;return l.bind(),l.uniforms.uSamplers=n,l}function d(n){var t="";t+="\n",t+="\n";for(var a=0;a<n;a++)0<a&&(t+="\nelse "),a<n-1&&(t+="if(vTextureId < "+a+".5)"),t+="\n{",t+="\n\tcolor = texture2D(uSamplers["+a+"], vTextureCoord);",t+="\n}";return t+="\n",t+="\n"}e.__esModule=!0,e.default=r;var n=l("../../Shader"),i=function(e){return e&&e.__esModule?e:{default:e}}(n),s=(l("path"),"varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\nvoid main(void){\nvec4 color;\n%forloop%\ngl_FragColor = color * vColor;\n}")},{"../../Shader":44,path:8}],108:[function(S,t,e){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function P(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function i(r,t){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:r}function n(r,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(r,t):r.__proto__=t)}e.__esModule=!0;var o=function(){function a(a,t){for(var e=0,o;e<t.length;e++)o=t[e],o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(a,o.key,o)}return function(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t}}(),a=S("../sprites/Sprite"),s=r(a),u=S("../textures/Texture"),l=r(u),c=S("../math"),d=S("../utils"),A=S("../const"),p=S("../settings"),f=r(p),g=S("./TextStyle"),v=r(g),m=S("./TextMetrics"),_=r(m),b=S("../utils/trimCanvas"),M=r(b),T={texture:!0,children:!1,baseTexture:!0},R=function(p){function t(e,r,n){P(this,t),n=n||document.createElement("canvas"),n.width=3,n.height=3;var o=l.default.fromCanvas(n,f.default.SCALE_MODE,"text");o.orig=new c.Rectangle,o.trim=new c.Rectangle;var a=i(this,p.call(this,o));return l.default.addToCache(a._texture,a._texture.baseTexture.textureCacheIds[0]),a.canvas=n,a.context=a.canvas.getContext("2d"),a.resolution=f.default.RESOLUTION,a._text=null,a._style=null,a._styleListener=null,a._font="",a.text=e,a.style=r,a.localStyleID=-1,a}return n(t,p),t.prototype.updateText=function(m){var t=this._style;if(this.localStyleID!==t.styleID&&(this.dirty=!0,this.localStyleID=t.styleID),this.dirty||!m){this._font=this._style.toFontString();var e=this.context,r=_.default.measureText(this._text,this._style,this._style.wordWrap,this.canvas),n=r.width,i=r.height,o=r.lines,s=r.lineHeight,a=r.lineWidths,u=r.maxLineWidth,b=r.fontProperties;this.canvas.width=C((te(1,n)+2*t.padding)*this.resolution),this.canvas.height=C((te(1,i)+2*t.padding)*this.resolution),e.scale(this.resolution,this.resolution),e.clearRect(0,0,this.canvas.width,this.canvas.height),e.font=this._font,e.strokeStyle=t.stroke,e.lineWidth=t.strokeThickness,e.textBaseline=t.textBaseline,e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit;var l,T;if(t.dropShadow){e.fillStyle=t.dropShadowColor,e.globalAlpha=t.dropShadowAlpha,e.shadowBlur=t.dropShadowBlur,0<t.dropShadowBlur&&(e.shadowColor=t.dropShadowColor);for(var S=K(t.dropShadowAngle)*t.dropShadowDistance,f=q(t.dropShadowAngle)*t.dropShadowDistance,p=0;p<o.length;p++)l=t.strokeThickness/2,T=t.strokeThickness/2+p*s+b.ascent,"right"===t.align?l+=u-a[p]:"center"===t.align&&(l+=(u-a[p])/2),t.fill&&(this.drawLetterSpacing(o[p],l+S+t.padding,T+f+t.padding),t.stroke&&t.strokeThickness&&(e.strokeStyle=t.dropShadowColor,this.drawLetterSpacing(o[p],l+S+t.padding,T+f+t.padding,!0),e.strokeStyle=t.stroke))}e.shadowBlur=0,e.globalAlpha=1,e.fillStyle=this._generateFillStyle(t,o);for(var E=0;E<o.length;E++)l=t.strokeThickness/2,T=t.strokeThickness/2+E*s+b.ascent,"right"===t.align?l+=u-a[E]:"center"===t.align&&(l+=(u-a[E])/2),t.stroke&&t.strokeThickness&&this.drawLetterSpacing(o[E],l+t.padding,T+t.padding,!0),t.fill&&this.drawLetterSpacing(o[E],l+t.padding,T+t.padding);this.updateTexture()}},t.prototype.drawLetterSpacing=function(d,t,e){var r=3<arguments.length&&void 0!==arguments[3]&&arguments[3],n=this._style,i=n.letterSpacing;if(0===i)return void(r?this.context.strokeText(d,t,e):this.context.fillText(d,t,e));for(var o=String.prototype.split.call(d,""),s=t,p=0,f="",g=this.context.measureText(d).width,m=0;p<d.length;)f=o[p++],r?this.context.strokeText(f,s,e):this.context.fillText(f,s,e),m=this.context.measureText(d.substring(p)).width,s+=g-m+i,g=m},t.prototype.updateTexture=function(){var a=this.canvas;if(this._style.trim){var t=(0,M.default)(a);t.data&&(a.width=t.width,a.height=t.height,this.context.putImageData(t.data,0,0))}var e=this._texture,r=this._style,n=r.trim?0:r.padding,i=e.baseTexture;i.hasLoaded=!0,i.resolution=this.resolution,i.realWidth=a.width,i.realHeight=a.height,i.width=a.width/this.resolution,i.height=a.height/this.resolution,e.trim.width=e._frame.width=a.width/this.resolution,e.trim.height=e._frame.height=a.height/this.resolution,e.trim.x=-n,e.trim.y=-n,e.orig.width=e._frame.width-2*n,e.orig.height=e._frame.height-2*n,this._onTextureUpdate(),i.emit("update",i),this.dirty=!1},t.prototype.renderWebGL=function(t){this.resolution!==t.resolution&&(this.resolution=t.resolution,this.dirty=!0),this.updateText(!0),p.prototype.renderWebGL.call(this,t)},t.prototype._renderCanvas=function(t){this.resolution!==t.resolution&&(this.resolution=t.resolution,this.dirty=!0),this.updateText(!0),p.prototype._renderCanvas.call(this,t)},t.prototype.getLocalBounds=function(t){return this.updateText(!0),p.prototype.getLocalBounds.call(this,t)},t.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)},t.prototype._onStyleChange=function(){this.dirty=!0},t.prototype._generateFillStyle=function(p,t){if(!Array.isArray(p.fill))return p.fill;if(navigator.isCocoonJS)return p.fill[0];var e=this.canvas.width/this.resolution,s=this.canvas.height/this.resolution,a=p.fill.slice(),u=p.fillGradientStops.slice(),g,m,_,b;if(!u.length)for(var T=a.length+1,l=1;l<T;++l)u.push(l/T);if(a.unshift(p.fill[0]),u.unshift(0),a.push(p.fill[p.fill.length-1]),u.push(1),p.fillGradientType===A.TEXT_GRADIENT.LINEAR_VERTICAL){g=this.context.createLinearGradient(e/2,0,e/2,s),m=(a.length+1)*t.length,_=0;for(var S=0;S<t.length;S++){_+=1;for(var E=0;E<a.length;E++)b="number"==typeof u[E]?u[E]/t.length+S/t.length:_/m,g.addColorStop(b,a[E]),_++}}else{g=this.context.createLinearGradient(0,s/2,e,s/2),m=a.length+1,_=1;for(var C=0;C<a.length;C++)b="number"==typeof u[C]?u[C]:_/m,g.addColorStop(b,a[C]),_++}return g},t.prototype.destroy=function(t){"boolean"==typeof t&&(t={children:t}),t=Object.assign({},T,t),p.prototype.destroy.call(this,t),this.context=null,this.canvas=null,this._style=null},o(t,[{key:"width",get:function(){return this.updateText(!0),ee(this.scale.x)*this._texture.orig.width},set:function(r){this.updateText(!0);var t=(0,d.sign)(this.scale.x)||1;this.scale.x=t*r/this._texture.orig.width,this._width=r}},{key:"height",get:function(){return this.updateText(!0),ee(this.scale.y)*this._texture.orig.height},set:function(r){this.updateText(!0);var t=(0,d.sign)(this.scale.y)||1;this.scale.y=t*r/this._texture.orig.height,this._height=r}},{key:"style",get:function(){return this._style},set:function(e){e=e||{},this._style=e instanceof v.default?e:new v.default(e),this.localStyleID=-1,this.dirty=!0}},{key:"text",get:function(){return this._text},set:function(e){e=(""===e||null===e||void 0===e?" ":e)+"",this._text!==e&&(this._text=e,this.dirty=!0)}}]),t}(s.default);e.default=R},{"../const":46,"../math":70,"../settings":101,"../sprites/Sprite":102,"../textures/Texture":115,"../utils":125,"../utils/trimCanvas":130,"./TextMetrics":109,"./TextStyle":110}],109:[function(a,t,e){"use strict";function d(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function A(t,e,r,n,o,i,a,s,u){d(this,A),this.text=t,this.style=e,this.width=r,this.height=n,this.lines=o,this.lineWidths=i,this.lineHeight=a,this.maxLineWidth=s,this.fontProperties=u}return A.measureText=function(t,e,r){var m=3<arguments.length&&void 0!==arguments[3]?arguments[3]:A._canvas;r=void 0===r||null===r?e.wordWrap:r;var i=e.toFontString(),o=A.measureFont(i),s=m.getContext("2d");s.font=i;for(var a=r?A.wordWrap(t,e,m):t,u=a.split(/(?:\r\n|\r|\n)/),_=Array(u.length),l=0,b=0,T;b<u.length;b++)T=s.measureText(u[b]).width+(u[b].length-1)*e.letterSpacing,_[b]=T,l=te(l,T);var S=l+e.strokeThickness;e.dropShadow&&(S+=e.dropShadowDistance);var E=e.lineHeight||o.fontSize+e.strokeThickness,v=te(E,o.fontSize+e.strokeThickness)+(u.length-1)*(E+e.leading);return e.dropShadow&&(v+=e.dropShadowDistance),new A(t,e,S,v,u,_,E+e.leading,l,o)},A.wordWrap=function(t,e){for(var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:A._canvas,n=r.getContext("2d"),i=0,C="",R="",I={},u=e.letterSpacing,D=e.whiteSpace,l=A.collapseSpaces(D),c=A.collapseNewlines(D),d=!l,L=e.wordWrapWidth+u,p=A.tokenize(t),v=0,k;v<p.length;v++){if(k=p[v],A.isNewline(k)){if(!c){R+=A.addLine(C),d=!l,C="",i=0;continue}k=" "}if(l){var B=A.isBreakingSpace(k),m=A.isBreakingSpace(C[C.length-1]);if(B&&m)continue}var _=A.getFromCache(k,u,I,n);if(!(_>L))_+i>L&&(d=!1,R+=A.addLine(C),C="",i=0),(0<C.length||!A.isBreakingSpace(k)||d)&&(C+=k,i+=_);else if(""!==C&&(R+=A.addLine(C),C="",i=0),A.canBreakWords(k,e.breakWords))for(var b=k.split(""),N=0;N<b.length;N++){for(var F=b[N],U=1;b[N+U];){var X=b[N+U],S=F[F.length-1];if(A.canBreakChars(S,X,k,N,e.breakWords))break;F+=X,U++}N+=F.length-1;var O=A.getFromCache(F,u,I,n);O+i>L&&(R+=A.addLine(C),d=!1,C="",i=0),C+=F,i+=O}else{0<C.length&&(R+=A.addLine(C),C="",i=0);var M=v===p.length-1;R+=A.addLine(k,!M),d=!1,C="",i=0}}return R+=A.addLine(C,!1)},A.addLine=function(t){var n=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];return t=A.trimRight(t),t=n?t+"\n":t},A.getFromCache=function(a,t,e,r){var n=e[a];if(void 0===n){var s=a.length*t;n=r.measureText(a).width+s,e[a]=n}return n},A.collapseSpaces=function(e){return"normal"===e||"pre-line"===e},A.collapseNewlines=function(e){return"normal"===e},A.trimRight=function(t){if("string"!=typeof t)return"";for(var a=t.length-1,o;0<=a&&(o=t[a],!!A.isBreakingSpace(o));a--)t=t.slice(0,-1);return t},A.isNewline=function(t){return"string"==typeof t&&0<=A._newlines.indexOf(t.charCodeAt(0))},A.isBreakingSpace=function(t){return"string"==typeof t&&0<=A._breakingSpaces.indexOf(t.charCodeAt(0))},A.tokenize=function(t){var e=[],r="";if("string"!=typeof t)return e;for(var a=0,s;a<t.length;a++)s=t[a],A.isBreakingSpace(s)||A.isNewline(s)?(""!==r&&(e.push(r),r=""),e.push(s)):r+=s;return""!==r&&e.push(r),e},A.canBreakWords=function(r,t){return t},A.canBreakChars=function(){return!0},A.measureFont=function(t){if(A._fonts[t])return A._fonts[t];var e={},r=A._canvas,n=A._context;n.font=t;var i=A.METRICS_STRING+A.BASELINE_SYMBOL,o=C(n.measureText(i).width),s=C(n.measureText(A.BASELINE_SYMBOL).width),m=2*s;s=0|s*A.BASELINE_MULTIPLIER,r.width=o,r.height=m,n.fillStyle="#f00",n.fillRect(0,0,o,m),n.font=t,n.textBaseline="alphabetic",n.fillStyle="#000",n.fillText(i,0,s);var u=n.getImageData(0,0,o,m).data,_=u.length,l=4*o,c=0,b=0,T=!1;for(c=0;c<s;++c){for(var S=0;S<l;S+=4)if(255!==u[b+S]){T=!0;break}if(T)break;b+=l}for(e.ascent=s-c,b=_-l,T=!1,c=m;c>s;--c){for(var E=0;E<l;E+=4)if(255!==u[b+E]){T=!0;break}if(T)break;b-=l}return e.descent=c-s,e.fontSize=e.ascent+e.descent,A._fonts[t]=e,e},A.clearMetrics=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";t?delete A._fonts[t]:A._fonts={}},A}();e.default=r;var n=document.createElement("canvas");n.width=n.height=10,r._canvas=n,r._context=n.getContext("2d"),r._fonts={},r.METRICS_STRING="|\xC3\u2030q",r.BASELINE_SYMBOL="M",r.BASELINE_MULTIPLIER=1.4,r._newlines=[10,13],r._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288]},{}],110:[function(p,t,e){"use strict";function r(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e){return"number"==typeof e?(0,g.hex2string)(e):("string"==typeof e&&0===e.indexOf("0x")&&(e=e.replace("0x","#")),e)}function i(r){if(Array.isArray(r)){for(var t=0;t<r.length;++t)r[t]=n(r[t]);return r}return n(r)}function o(n,t){if(!Array.isArray(n)||!Array.isArray(t))return!1;if(n.length!==t.length)return!1;for(var e=0;e<n.length;++e)if(n[e]!==t[e])return!1;return!0}function s(a,t,e){for(var r in e)a[r]=Array.isArray(t[r])?t[r].slice():t[r]}e.__esModule=!0;var a=function(){function a(a,t){for(var e=0,o;e<t.length;e++)o=t[e],o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(a,o.key,o)}return function(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t}}(),u=p("../const"),g=p("../utils"),l={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Z/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:u.TEXT_GRADIENT.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},c=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],d=function(){function n(t){r(this,n),this.styleID=0,this.reset(),s(this,t,t)}return n.prototype.clone=function(){var t={};return s(t,this,l),new n(t)},n.prototype.reset=function(){s(this,l,l)},n.prototype.toFontString=function(){var a="number"==typeof this.fontSize?this.fontSize+"px":this.fontSize,t=this.fontFamily;Array.isArray(this.fontFamily)||(t=this.fontFamily.split(","));for(var o=t.length-1,i;0<=o;o--)i=t[o].trim(),!/([\"\'])[^\'\"]+\1/.test(i)&&0>c.indexOf(i)&&(i="\""+i+"\""),t[o]=i;return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+a+" "+t.join(",")},a(n,[{key:"align",get:function(){return this._align},set:function(e){this._align!==e&&(this._align=e,this.styleID++)}},{key:"breakWords",get:function(){return this._breakWords},set:function(e){this._breakWords!==e&&(this._breakWords=e,this.styleID++)}},{key:"dropShadow",get:function(){return this._dropShadow},set:function(e){this._dropShadow!==e&&(this._dropShadow=e,this.styleID++)}},{key:"dropShadowAlpha",get:function(){return this._dropShadowAlpha},set:function(e){this._dropShadowAlpha!==e&&(this._dropShadowAlpha=e,this.styleID++)}},{key:"dropShadowAngle",get:function(){return this._dropShadowAngle},set:function(e){this._dropShadowAngle!==e&&(this._dropShadowAngle=e,this.styleID++)}},{key:"dropShadowBlur",get:function(){return this._dropShadowBlur},set:function(e){this._dropShadowBlur!==e&&(this._dropShadowBlur=e,this.styleID++)}},{key:"dropShadowColor",get:function(){return this._dropShadowColor},set:function(r){var t=i(r);this._dropShadowColor!==t&&(this._dropShadowColor=t,this.styleID++)}},{key:"dropShadowDistance",get:function(){return this._dropShadowDistance},set:function(e){this._dropShadowDistance!==e&&(this._dropShadowDistance=e,this.styleID++)}},{key:"fill",get:function(){return this._fill},set:function(r){var t=i(r);this._fill!==t&&(this._fill=t,this.styleID++)}},{key:"fillGradientType",get:function(){return this._fillGradientType},set:function(e){this._fillGradientType!==e&&(this._fillGradientType=e,this.styleID++)}},{key:"fillGradientStops",get:function(){return this._fillGradientStops},set:function(e){o(this._fillGradientStops,e)||(this._fillGradientStops=e,this.styleID++)}},{key:"fontFamily",get:function(){return this._fontFamily},set:function(e){this.fontFamily!==e&&(this._fontFamily=e,this.styleID++)}},{key:"fontSize",get:function(){return this._fontSize},set:function(e){this._fontSize!==e&&(this._fontSize=e,this.styleID++)}},{key:"fontStyle",get:function(){return this._fontStyle},set:function(e){this._fontStyle!==e&&(this._fontStyle=e,this.styleID++)}},{key:"fontVariant",get:function(){return this._fontVariant},set:function(e){this._fontVariant!==e&&(this._fontVariant=e,this.styleID++)}},{key:"fontWeight",get:function(){return this._fontWeight},set:function(e){this._fontWeight!==e&&(this._fontWeight=e,this.styleID++)}},{key:"letterSpacing",get:function(){return this._letterSpacing},set:function(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.styleID++)}},{key:"lineHeight",get:function(){return this._lineHeight},set:function(e){this._lineHeight!==e&&(this._lineHeight=e,this.styleID++)}},{key:"leading",get:function(){return this._leading},set:function(e){this._leading!==e&&(this._leading=e,this.styleID++)}},{key:"lineJoin",get:function(){return this._lineJoin},set:function(e){this._lineJoin!==e&&(this._lineJoin=e,this.styleID++)}},{key:"miterLimit",get:function(){return this._miterLimit},set:function(e){this._miterLimit!==e&&(this._miterLimit=e,this.styleID++)}},{key:"padding",get:function(){return this._padding},set:function(e){this._padding!==e&&(this._padding=e,this.styleID++)}},{key:"stroke",get:function(){return this._stroke},set:function(r){var t=i(r);this._stroke!==t&&(this._stroke=t,this.styleID++)}},{key:"strokeThickness",get:function(){return this._strokeThickness},set:function(e){this._strokeThickness!==e&&(this._strokeThickness=e,this.styleID++)}},{key:"textBaseline",get:function(){return this._textBaseline},set:function(e){this._textBaseline!==e&&(this._textBaseline=e,this.styleID++)}},{key:"trim",get:function(){return this._trim},set:function(e){this._trim!==e&&(this._trim=e,this.styleID++)}},{key:"whiteSpace",get:function(){return this._whiteSpace},set:function(e){this._whiteSpace!==e&&(this._whiteSpace=e,this.styleID++)}},{key:"wordWrap",get:function(){return this._wordWrap},set:function(e){this._wordWrap!==e&&(this._wordWrap=e,this.styleID++)}},{key:"wordWrapWidth",get:function(){return this._wordWrapWidth},set:function(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.styleID++)}}]),n}();e.default=d},{"../const":46,"../utils":125}],111:[function(d,t,e){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function p(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function i(r,t){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:r}function n(r,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(r,t):r.__proto__=t)}e.__esModule=!0;var o=d("./BaseTexture"),a=r(o),s=d("../settings"),f=r(s),l=function(o){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:100,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:100,n=arguments[2],s=arguments[3];p(this,t);var a=i(this,o.call(this,null,n));return a.resolution=s||f.default.RESOLUTION,a.width=C(e),a.height=C(r),a.realWidth=a.width*a.resolution,a.realHeight=a.height*a.resolution,a.scaleMode=void 0===n?f.default.SCALE_MODE:n,a.hasLoaded=!0,a._glRenderTargets={},a._canvasRenderTarget=null,a.valid=!1,a}return n(t,o),t.prototype.resize=function(r,n){r=C(r),n=C(n),r===this.width&&n===this.height||(this.valid=0<r&&0<n,this.width=r,this.height=n,this.realWidth=this.width*this.resolution,this.realHeight=this.height*this.resolution,this.valid&&this.emit("update",this))},t.prototype.destroy=function(){o.prototype.destroy.call(this,!0),this.renderer=null},t}(a.default);e.default=l},{"../settings":101,"./BaseTexture":112}],112:[function(m,t,e){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function _(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function i(r,t){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:r}function n(r,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(r,t):r.__proto__=t)}e.__esModule=!0;var b=m("../utils"),a=m("../settings"),o=r(a),s=m("eventemitter3"),u=r(s),c=m("../utils/determineCrossOrigin"),d=r(c),f=m("bit-twiddle"),p=r(f),T=function(a){function c(e,t,r){_(this,c);var n=i(this,a.call(this));return n.uid=(0,b.uid)(),n.touched=0,n.resolution=r||o.default.RESOLUTION,n.width=100,n.height=100,n.realWidth=100,n.realHeight=100,n.scaleMode=void 0===t?o.default.SCALE_MODE:t,n.hasLoaded=!1,n.isLoading=!1,n.source=null,n.origSource=null,n.imageType=null,n.sourceScale=1,n.premultipliedAlpha=!0,n.imageUrl=null,n.isPowerOfTwo=!1,n.mipmap=o.default.MIPMAP_TEXTURES,n.wrapMode=o.default.WRAP_MODE,n._glTextures={},n._enabled=0,n._virtalBoundId=-1,n._destroyed=!1,n.textureCacheIds=[],e&&n.loadSource(e),n}return n(c,a),c.prototype.update=function(){"svg"!==this.imageType&&(this.realWidth=this.source.naturalWidth||this.source.videoWidth||this.source.width,this.realHeight=this.source.naturalHeight||this.source.videoHeight||this.source.height,this._updateDimensions()),this.emit("update",this)},c.prototype._updateDimensions=function(){this.width=this.realWidth/this.resolution,this.height=this.realHeight/this.resolution,this.isPowerOfTwo=p.default.isPow2(this.realWidth)&&p.default.isPow2(this.realHeight)},c.prototype.loadSource=function(a){var t=this.isLoading;this.hasLoaded=!1,this.isLoading=!1,t&&this.source&&(this.source.onload=null,this.source.onerror=null);var e=!this.source;if(this.source=a,(a.src&&a.complete||a.getContext)&&a.width&&a.height)this._updateImageType(),"svg"===this.imageType?this._loadSvgSource():this._sourceLoaded(),e&&this.emit("loaded",this);else if(!a.getContext){this.isLoading=!0;var r=this;if(a.onload=function(){if(r._updateImageType(),a.onload=null,a.onerror=null,r.isLoading){if(r.isLoading=!1,r._sourceLoaded(),"svg"===r.imageType)return void r._loadSvgSource();r.emit("loaded",r)}},a.onerror=function(){a.onload=null,a.onerror=null,r.isLoading&&(r.isLoading=!1,r.emit("error",r))},a.complete&&a.src){if(a.onload=null,a.onerror=null,"svg"===r.imageType)return void r._loadSvgSource();this.isLoading=!1,a.width&&a.height?(this._sourceLoaded(),t&&this.emit("loaded",this)):t&&this.emit("error",this)}}},c.prototype._updateImageType=function(){if(this.imageUrl){var n=(0,b.decomposeDataUri)(this.imageUrl),t;if(n&&"image"===n.mediaType){var a=n.subType.split("+")[0];if(!(t=(0,b.getUrlFileExtension)("."+a)))throw new Error("Invalid image type in data URI.")}else(t=(0,b.getUrlFileExtension)(this.imageUrl))||(t="png");this.imageType=t}},c.prototype._loadSvgSource=function(){if("svg"===this.imageType){var e=(0,b.decomposeDataUri)(this.imageUrl);e?this._loadSvgSourceUsingDataUri(e):this._loadSvgSourceUsingXhr()}},c.prototype._loadSvgSourceUsingDataUri=function(r){var t;if("base64"===r.encoding){if(!atob)throw new Error("Your browser doesn't support base64 conversions.");t=atob(r.data)}else t=r.data;this._loadSvgSourceUsingString(t)},c.prototype._loadSvgSourceUsingXhr=function(){var r=this,t=new XMLHttpRequest;t.onload=function(){if(t.readyState!==t.DONE||200!==t.status)throw new Error("Failed to load SVG using XHR.");r._loadSvgSourceUsingString(t.response)},t.onerror=function(){return r.emit("error",r)},t.open("GET",this.imageUrl,!0),t.send()},c.prototype._loadSvgSourceUsingString=function(e){var t=(0,b.getSvgSize)(e),r=t.width,n=t.height;if(!r||!n)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");this.realWidth=l(r*this.sourceScale),this.realHeight=l(n*this.sourceScale),this._updateDimensions();var a=document.createElement("canvas");a.width=this.realWidth,a.height=this.realHeight,a._pixiId="canvas_"+(0,b.uid)(),a.getContext("2d").drawImage(this.source,0,0,r,n,0,0,this.realWidth,this.realHeight),this.origSource=this.source,this.source=a,c.addToCache(this,a._pixiId),this.isLoading=!1,this._sourceLoaded(),this.emit("loaded",this)},c.prototype._sourceLoaded=function(){this.hasLoaded=!0,this.update()},c.prototype.destroy=function(){this.imageUrl&&(delete b.TextureCache[this.imageUrl],this.imageUrl=null,navigator.isCocoonJS||(this.source.src="")),this.source=null,this.dispose(),c.removeFromCache(this),this.textureCacheIds=null,this._destroyed=!0},c.prototype.dispose=function(){this.emit("dispose",this)},c.prototype.updateSourceImage=function(e){this.source.src=e,this.loadSource(this.source)},c.fromImage=function(e,t,r,n){var a=b.BaseTextureCache[e];if(!a){var i=new Image;void 0===t&&0!==e.indexOf("data:")?i.crossOrigin=(0,d.default)(e):t&&(i.crossOrigin="string"==typeof t?t:"anonymous"),a=new c(i,r),a.imageUrl=e,n&&(a.sourceScale=n),a.resolution=(0,b.getResolutionOfUrl)(e),i.src=e,c.addToCache(a,e)}return a},c.fromCanvas=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"canvas";e._pixiId||(e._pixiId=r+"_"+(0,b.uid)());var n=b.BaseTextureCache[e._pixiId];return n||(n=new c(e,t),c.addToCache(n,e._pixiId)),n},c.from=function(e,t,r){if("string"==typeof e)return c.fromImage(e,void 0,t,r);if(e instanceof HTMLImageElement){var n=e.src,a=b.BaseTextureCache[n];return a||(a=new c(e,t),a.imageUrl=n,r&&(a.sourceScale=r),a.resolution=(0,b.getResolutionOfUrl)(n),c.addToCache(a,n)),a}return e instanceof HTMLCanvasElement?c.fromCanvas(e,t):e},c.addToCache=function(r,t){t&&(-1===r.textureCacheIds.indexOf(t)&&r.textureCacheIds.push(t),b.BaseTextureCache[t]=r)},c.removeFromCache=function(a){if("string"==typeof a){var t=b.BaseTextureCache[a];if(t){var e=t.textureCacheIds.indexOf(a);return-1<e&&t.textureCacheIds.splice(e,1),delete b.BaseTextureCache[a],t}}else if(a&&a.textureCacheIds){for(var r=0;r<a.textureCacheIds.length;++r)delete b.BaseTextureCache[a.textureCacheIds[r]];return a.textureCacheIds.length=0,a}return null},c}(u.default);e.default=T},{"../settings":101,"../utils":125,"../utils/determineCrossOrigin":124,"bit-twiddle":1,eventemitter3:3}],113:[function(d,t,e){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function p(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function i(r,t){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:r}function n(r,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(r,t):r.__proto__=t)}e.__esModule=!0;var o=d("./BaseRenderTexture"),f=r(o),a=d("./Texture"),s=r(a),l=function(o){function u(e,t){p(this,u);var g=null;if(!(e instanceof f.default)){var m=arguments[1],a=arguments[2],_=arguments[3],l=arguments[4];console.warn("Please use RenderTexture.create("+m+", "+a+") instead of the ctor directly."),g=arguments[0],t=null,e=new f.default(m,a,_,l)}var c=i(this,o.call(this,e,t));return c.legacyRenderer=g,c.valid=!0,c._updateUvs(),c}return n(u,o),u.prototype.resize=function(n,a,o){n=C(n),a=C(a),this.valid=0<n&&0<a,this._frame.width=this.orig.width=n,this._frame.height=this.orig.height=a,o||this.baseTexture.resize(n,a),this._updateUvs()},u.create=function(e,t,r,n){return new u(new f.default(e,t,r,n))},u}(s.default);e.default=l},{"./BaseRenderTexture":111,"./Texture":115}],114:[function(l,t,e){"use strict";function d(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function a(a,t){for(var e=0,o;e<t.length;e++)o=t[e],o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(a,o.key,o)}return function(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t}}(),n=l("../"),o=l("../utils"),i=function(){function p(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;d(this,p),this.baseTexture=t,this.textures={},this.animations={},this.data=e,this.resolution=this._updateResolution(r||this.baseTexture.imageUrl),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return r(p,null,[{key:"BATCH_SIZE",get:function(){return 1e3}}]),p.prototype._updateResolution=function(n){var t=this.data.meta.scale,e=(0,o.getResolutionOfUrl)(n,null);return null===e&&(e=void 0===t?1:parseFloat(t)),1!==e&&(this.baseTexture.resolution=e,this.baseTexture.update()),e},p.prototype.parse=function(t){this._batchIndex=0,this._callback=t,this._frameKeys.length<=p.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()},p.prototype._processFrames=function(t){for(var e=t,o=p.BATCH_SIZE,f=this.baseTexture.sourceScale;e-t<o&&e<this._frameKeys.length;){var i=this._frameKeys[e],s=this._frames[i],a=s.frame;if(a){var u=null,g=null,m=!1!==s.trimmed&&s.sourceSize?s.sourceSize:s.frame,c=new n.Rectangle(0,0,J(m.w*f)/this.resolution,J(m.h*f)/this.resolution);u=s.rotated?new n.Rectangle(J(a.x*f)/this.resolution,J(a.y*f)/this.resolution,J(a.h*f)/this.resolution,J(a.w*f)/this.resolution):new n.Rectangle(J(a.x*f)/this.resolution,J(a.y*f)/this.resolution,J(a.w*f)/this.resolution,J(a.h*f)/this.resolution),!1!==s.trimmed&&s.spriteSourceSize&&(g=new n.Rectangle(J(s.spriteSourceSize.x*f)/this.resolution,J(s.spriteSourceSize.y*f)/this.resolution,J(a.w*f)/this.resolution,J(a.h*f)/this.resolution)),this.textures[i]=new n.Texture(this.baseTexture,u,c,g,s.rotated?2:0,s.anchor),n.Texture.addToCache(this.textures[i],i)}e++}},p.prototype._processAnimations=function(){var a=this.data.animations||{};for(var t in a){this.animations[t]=[];for(var e=a[t],l=Array.isArray(e),n=0,e=l?e:e[Symbol.iterator]();;){var d;if(l){if(n>=e.length)break;d=e[n++]}else{if(n=e.next(),n.done)break;d=n.value}var u=d;this.animations[t].push(this.textures[u])}}},p.prototype._parseComplete=function(){var e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)},p.prototype._nextBatch=function(){var t=this;this._processFrames(this._batchIndex*p.BATCH_SIZE),this._batchIndex++,setTimeout(function(){t._batchIndex*p.BATCH_SIZE<t._frameKeys.length?t._nextBatch():(t._processAnimations(),t._parseComplete())},0)},p.prototype.destroy=function(){var r=0<arguments.length&&void 0!==arguments[0]&&arguments[0];for(var t in this.textures)this.textures[t].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,r&&this.baseTexture.destroy(),this.baseTexture=null},p}();e.default=i},{"../":65,"../utils":125}],115:[function(T,t,e){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function S(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function i(r,t){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:r}function n(r,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(r,t):r.__proto__=t)}function o(e){e.destroy=function(){},e.on=function(){},e.once=function(){},e.emit=function(){}}e.__esModule=!0;var a=function(){function a(a,t){for(var e=0,o;e<t.length;e++)o=t[e],o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(a,o.key,o)}return function(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t}}(),s=T("./BaseTexture"),u=r(s),l=T("./VideoBaseTexture"),c=r(l),d=T("./TextureUvs"),f=r(d),p=T("eventemitter3"),v=r(p),g=T("../math"),E=T("../utils"),m=T("../settings"),_=r(m),b=function(o){function d(e,t,p,s,a,u){S(this,d);var c=i(this,o.call(this));if(c.noFrame=!1,t||(c.noFrame=!0,t=new g.Rectangle(0,0,1,1)),e instanceof d&&(e=e.baseTexture),c.baseTexture=e,c._frame=t,c.trim=s,c.valid=!1,c.requiresUpdate=!1,c._uvs=null,c.orig=p||t,c._rotate=+(a||0),!0===a)c._rotate=2;else if(0!=c._rotate%2)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return e.hasLoaded?(c.noFrame&&(t=new g.Rectangle(0,0,e.width,e.height),e.on("update",c.onBaseTextureUpdated,c)),c.frame=t):e.once("loaded",c.onBaseTextureLoaded,c),c.defaultAnchor=u?new g.Point(u.x,u.y):new g.Point(0,0),c._updateID=0,c.transform=null,c.textureCacheIds=[],c}return n(d,o),d.prototype.update=function(){this.baseTexture.update()},d.prototype.onBaseTextureLoaded=function(e){this._updateID++,this.frame=this.noFrame?new g.Rectangle(0,0,e.width,e.height):this._frame,this.baseTexture.on("update",this.onBaseTextureUpdated,this),this.emit("update",this)},d.prototype.onBaseTextureUpdated=function(e){this._updateID++,this._frame.width=e.width,this._frame.height=e.height,this.emit("update",this)},d.prototype.destroy=function(e){this.baseTexture&&(e&&(E.TextureCache[this.baseTexture.imageUrl]&&d.removeFromCache(this.baseTexture.imageUrl),this.baseTexture.destroy()),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture.off("loaded",this.onBaseTextureLoaded,this),this.baseTexture=null),this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,d.removeFromCache(this),this.textureCacheIds=null},d.prototype.clone=function(){return new d(this.baseTexture,this.frame,this.orig,this.trim,this.rotate,this.defaultAnchor)},d.prototype._updateUvs=function(){this._uvs||(this._uvs=new f.default),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},d.fromImage=function(e,t,r,n){var a=E.TextureCache[e];return a||(a=new d(u.default.fromImage(e,t,r,n)),d.addToCache(a,e)),a},d.fromFrame=function(r){var t=E.TextureCache[r];if(!t)throw new Error("The frameId \""+r+"\" does not exist in the texture cache");return t},d.fromCanvas=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"canvas";return new d(u.default.fromCanvas(e,t,r))},d.fromVideo=function(e,t,r,n){return"string"==typeof e?d.fromVideoUrl(e,t,r,n):new d(c.default.fromVideo(e,t,n))},d.fromVideoUrl=function(e,t,r,n){return new d(c.default.fromUrl(e,t,r,n))},d.from=function(e){if("string"==typeof e){var t=E.TextureCache[e];return t?t:null===e.match(/\.(mp4|webm|ogg|h264|avi|mov)$/)?d.fromImage(e):d.fromVideoUrl(e)}return e instanceof HTMLImageElement?new d(u.default.from(e)):e instanceof HTMLCanvasElement?d.fromCanvas(e,_.default.SCALE_MODE,"HTMLCanvasElement"):e instanceof HTMLVideoElement?d.fromVideo(e):e instanceof u.default?new d(e):e},d.fromLoader=function(e,t,r){var a=new u.default(e,void 0,(0,E.getResolutionOfUrl)(t)),i=new d(a);return a.imageUrl=t,r||(r=t),u.default.addToCache(i.baseTexture,r),d.addToCache(i,r),r!==t&&(u.default.addToCache(i.baseTexture,t),d.addToCache(i,t)),i},d.addToCache=function(r,t){t&&(-1===r.textureCacheIds.indexOf(t)&&r.textureCacheIds.push(t),E.TextureCache[t]=r)},d.removeFromCache=function(a){if("string"==typeof a){var t=E.TextureCache[a];if(t){var e=t.textureCacheIds.indexOf(a);return-1<e&&t.textureCacheIds.splice(e,1),delete E.TextureCache[a],t}}else if(a&&a.textureCacheIds){for(var r=0;r<a.textureCacheIds.length;++r)E.TextureCache[a.textureCacheIds[r]]===a&&delete E.TextureCache[a.textureCacheIds[r]];return a.textureCacheIds.length=0,a}return null},a(d,[{key:"frame",get:function(){return this._frame},set:function(l){this._frame=l,this.noFrame=!1;var t=l.x,e=l.y,r=l.width,n=l.height,i=t+r>this.baseTexture.width,o=e+n>this.baseTexture.height;if(i||o){var s=i&&o?"and":"or",a="X: "+t+" + "+r+" = "+(t+r)+" > "+this.baseTexture.width,d="Y: "+e+" + "+n+" = "+(e+n)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+a+" "+s+" "+d)}this.valid=r&&n&&this.baseTexture.hasLoaded,this.trim||this.rotate||(this.orig=l),this.valid&&this._updateUvs()}},{key:"rotate",get:function(){return this._rotate},set:function(e){this._rotate=e,this.valid&&this._updateUvs()}},{key:"width",get:function(){return this.orig.width}},{key:"height",get:function(){return this.orig.height}}]),d}(v.default);e.default=b,b.EMPTY=new b(new u.default()),o(b.EMPTY),o(b.EMPTY.baseTexture),b.WHITE=function(){var r=document.createElement("canvas");r.width=10,r.height=10;var t=r.getContext("2d");return t.fillStyle="white",t.fillRect(0,0,10,10),new b(new u.default(r))}(),o(b.WHITE),o(b.WHITE.baseTexture)},{"../math":70,"../settings":101,"../utils":125,"./BaseTexture":112,"./TextureUvs":117,"./VideoBaseTexture":118,eventemitter3:3}],116:[function(l,t,e){"use strict";function d(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function a(a,t){for(var e=0,o;e<t.length;e++)o=t[e],o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(a,o.key,o)}return function(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t}}(),n=l("../math/Matrix"),o=function(e){return e&&e.__esModule?e:{default:e}}(n),p=new o.default,a=function(){function n(t,e){d(this,n),this._texture=t,this.mapCoord=new o.default,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._lastTextureID=-1,this.clampOffset=0,this.clampMargin=void 0===e?.5:e}return n.prototype.multiplyUvs=function(a,t){void 0===t&&(t=a);for(var s=this.mapCoord,r=0;r<a.length;r+=2){var l=a[r],i=a[r+1];t[r]=l*s.a+i*s.c+s.tx,t[r+1]=l*s.b+i*s.d+s.ty}return t},n.prototype.update=function(a){var t=this._texture;if(!t||!t.valid)return!1;if(!a&&this._lastTextureID===t._updateID)return!1;this._lastTextureID=t._updateID;var e=t._uvs;this.mapCoord.set(e.x1-e.x0,e.y1-e.y0,e.x3-e.x0,e.y3-e.y0,e.x0,e.y0);var r=t.orig,n=t.trim;n&&(p.set(r.width/n.width,0,0,r.height/n.height,-n.x/n.width,-n.y/n.height),this.mapCoord.append(p));var i=t.baseTexture,o=this.uClampFrame,s=this.clampMargin/i.resolution,l=this.clampOffset;return o[0]=(t._frame.x+s+l)/i.width,o[1]=(t._frame.y+s+l)/i.height,o[2]=(t._frame.x+t._frame.width-s+l)/i.width,o[3]=(t._frame.y+t._frame.height-s+l)/i.height,this.uClampOffset[0]=l/i.realWidth,this.uClampOffset[1]=l/i.realHeight,!0},r(n,[{key:"texture",get:function(){return this._texture},set:function(e){this._texture=e,this._lastTextureID=-1}}]),n}();e.default=a},{"../math/Matrix":67}],117:[function(a,t,e){"use strict";function r(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var n=a("../math/GroupD8"),d=function(e){return e&&e.__esModule?e:{default:e}}(n),o=function(){function e(){r(this,e),this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsUint32=new Uint32Array(4)}return e.prototype.set=function(o,t,e){var p=t.width,n=t.height;if(e){var i=o.width/2/p,s=o.height/2/n,a=o.x/p+i,u=o.y/n+s;e=d.default.add(e,d.default.NW),this.x0=a+i*d.default.uX(e),this.y0=u+s*d.default.uY(e),e=d.default.add(e,2),this.x1=a+i*d.default.uX(e),this.y1=u+s*d.default.uY(e),e=d.default.add(e,2),this.x2=a+i*d.default.uX(e),this.y2=u+s*d.default.uY(e),e=d.default.add(e,2),this.x3=a+i*d.default.uX(e),this.y3=u+s*d.default.uY(e)}else this.x0=o.x/p,this.y0=o.y/n,this.x1=(o.x+o.width)/p,this.y1=o.y/n,this.x2=(o.x+o.width)/p,this.y2=(o.y+o.height)/n,this.x3=o.x/p,this.y3=(o.y+o.height)/n;this.uvsUint32[0]=(65535&l(65535*this.y0))<<16|65535&l(65535*this.x0),this.uvsUint32[1]=(65535&l(65535*this.y1))<<16|65535&l(65535*this.x1),this.uvsUint32[2]=(65535&l(65535*this.y2))<<16|65535&l(65535*this.x2),this.uvsUint32[3]=(65535&l(65535*this.y3))<<16|65535&l(65535*this.x3)},e}();e.default=o},{"../math/GroupD8":66}],118:[function(m,t,e){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function _(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function i(r,t){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:r}function n(r,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(r,t):r.__proto__=t)}function b(a,t){if(!t){var o=a.split("?").shift().toLowerCase();t="video/"+o.substr(o.lastIndexOf(".")+1)}var r=document.createElement("source");return r.src=a,r.type=t,r}e.__esModule=!0;var a=function(){function a(a,t){for(var e=0,o;e<t.length;e++)o=t[e],o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(a,o.key,o)}return function(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t}}(),o=m("./BaseTexture"),s=r(o),l=m("../utils"),u=m("../ticker"),d=m("../const"),c=m("../utils/determineCrossOrigin"),p=r(c),f=function(o){function c(e,t){var r=!(2<arguments.length&&void 0!==arguments[2])||arguments[2];if(_(this,c),!e)throw new Error("No video source element specified.");(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0);var n=i(this,o.call(this,e,t));return n.width=e.videoWidth,n.height=e.videoHeight,n._autoUpdate=!0,n._isAutoUpdating=!1,n.autoPlay=r,n.update=n.update.bind(n),n._onCanPlay=n._onCanPlay.bind(n),e.addEventListener("play",n._onPlayStart.bind(n)),e.addEventListener("pause",n._onPlayStop.bind(n)),n.hasLoaded=!1,n.__loaded=!1,n._isSourceReady()?n._onCanPlay():(e.addEventListener("canplay",n._onCanPlay),e.addEventListener("canplaythrough",n._onCanPlay)),n}return n(c,o),c.prototype._isSourcePlaying=function(){var e=this.source;return 0<e.currentTime&&!1===e.paused&&!1===e.ended&&2<e.readyState},c.prototype._isSourceReady=function(){return 3===this.source.readyState||4===this.source.readyState},c.prototype._onPlayStart=function(){this.hasLoaded||this._onCanPlay(),!this._isAutoUpdating&&this.autoUpdate&&(u.shared.add(this.update,this,d.UPDATE_PRIORITY.HIGH),this._isAutoUpdating=!0)},c.prototype._onPlayStop=function(){this._isAutoUpdating&&(u.shared.remove(this.update,this),this._isAutoUpdating=!1)},c.prototype._onCanPlay=function(){this.hasLoaded=!0,this.source&&(this.source.removeEventListener("canplay",this._onCanPlay),this.source.removeEventListener("canplaythrough",this._onCanPlay),this.width=this.source.videoWidth,this.height=this.source.videoHeight,this.__loaded||(this.__loaded=!0,this.emit("loaded",this)),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.source.play())},c.prototype.destroy=function(){this._isAutoUpdating&&u.shared.remove(this.update,this),this.source&&this.source._pixiId&&(s.default.removeFromCache(this.source._pixiId),delete this.source._pixiId,this.source.pause(),this.source.src="",this.source.load()),o.prototype.destroy.call(this)},c.fromVideo=function(e,t,r){e._pixiId||(e._pixiId="video_"+(0,l.uid)());var n=l.BaseTextureCache[e._pixiId];return n||(n=new c(e,t,r),s.default.addToCache(n,e._pixiId)),n},c.fromUrl=function(e,t,r,n){var a=document.createElement("video");a.setAttribute("webkit-playsinline",""),a.setAttribute("playsinline","");var o=Array.isArray(e)?e[0].src||e[0]:e.src||e;if(void 0===r&&0!==o.indexOf("data:")?a.crossOrigin=(0,p.default)(o):r&&(a.crossOrigin="string"==typeof r?r:"anonymous"),Array.isArray(e))for(var i=0;i<e.length;++i)a.appendChild(b(e[i].src||e[i],e[i].mime));else a.appendChild(b(o,e.mime));return a.load(),c.fromVideo(a,t,n)},a(c,[{key:"autoUpdate",get:function(){return this._autoUpdate},set:function(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isAutoUpdating?(u.shared.remove(this.update,this),this._isAutoUpdating=!1):this._autoUpdate&&!this._isAutoUpdating&&(u.shared.add(this.update,this,d.UPDATE_PRIORITY.HIGH),this._isAutoUpdating=!0))}}]),c}(s.default);e.default=f,f.fromUrls=f.fromUrl},{"../const":46,"../ticker":121,"../utils":125,"../utils/determineCrossOrigin":124,"./BaseTexture":112}],119:[function(d,t,e){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var i=function(){function a(a,t){for(var e=0,o;e<t.length;e++)o=t[e],o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(a,o.key,o)}return function(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t}}(),o=d("../settings"),s=r(o),a=d("../const"),u=d("./TickerListener"),p=r(u),l=function(){function r(){var a=this;n(this,r),this._head=new p.default(null,null,1/0),this._requestId=null,this._maxElapsedMS=100,this.autoStart=!1,this.deltaTime=1,this.elapsedMS=1/s.default.TARGET_FPMS,this.lastTime=-1,this.speed=1,this.started=!1,this._tick=function(e){a._requestId=null,a.started&&(a.update(e),a.started&&null===a._requestId&&a._head.next&&(a._requestId=requestAnimationFrame(a._tick)))}}return r.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._requestId=requestAnimationFrame(this._tick))},r.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},r.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},r.prototype.add=function(n,t){var e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:a.UPDATE_PRIORITY.NORMAL;return this._addListener(new p.default(n,t,e))},r.prototype.addOnce=function(n,t){var e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:a.UPDATE_PRIORITY.NORMAL;return this._addListener(new p.default(n,t,e,!0))},r.prototype._addListener=function(n){var t=this._head.next,a=this._head;if(t){for(;t;){if(n.priority>t.priority){n.connect(a);break}a=t,t=t.next}n.previous||n.connect(a)}else n.connect(a);return this._startIfPossible(),this},r.prototype.remove=function(n,t){for(var e=this._head.next;e;)e=e.match(n,t)?e.destroy():e.next;return this._head.next||this._cancelIfNeeded(),this},r.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},r.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},r.prototype.destroy=function(){this.stop();for(var e=this._head.next;e;)e=e.destroy(!0);this._head.destroy(),this._head=null},r.prototype.update=function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:performance.now(),t;if(a>this.lastTime){t=this.elapsedMS=a-this.lastTime,t>this._maxElapsedMS&&(t=this._maxElapsedMS),this.deltaTime=t*s.default.TARGET_FPMS*this.speed;for(var o=this._head,r=o.next;r;)r=r.emit(this.deltaTime);o.next||this._cancelIfNeeded()}else this.deltaTime=this.elapsedMS=0;this.lastTime=a},i(r,[{key:"FPS",get:function(){return 1e3/this.elapsedMS}},{key:"minFPS",get:function(){return 1e3/this._maxElapsedMS},set:function(r){var t=Q(te(0,r)/1e3,s.default.TARGET_FPMS);this._maxElapsedMS=1/t}}]),r}();e.default=l},{"../const":46,"../settings":101,"./TickerListener":120}],120:[function(a,t,e){"use strict";function s(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function n(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,a=3<arguments.length&&void 0!==arguments[3]&&arguments[3];s(this,n),this.fn=t,this.context=e,this.priority=r,this.once=a,this.next=null,this.previous=null,this._destroyed=!1}return n.prototype.match=function(r,t){return t=t||null,this.fn===r&&this.context===t},n.prototype.emit=function(r){this.fn&&(this.context?this.fn.call(this.context,r):this.fn(r));var t=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),t},n.prototype.connect=function(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this},n.prototype.destroy=function(){var r=0<arguments.length&&void 0!==arguments[0]&&arguments[0];this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var t=this.next;return this.next=r?null:t,this.previous=null,t},n}();e.default=r},{}],121:[function(a,t,e){"use strict";e.__esModule=!0,e.Ticker=e.shared=void 0;var r=a("./Ticker"),n=function(e){return e&&e.__esModule?e:{default:e}}(r),i=new n.default;i.autoStart=!0,i.destroy=function(){},e.shared=i,e.Ticker=n.default},{"./Ticker":119}],122:[function(n,t,e){"use strict";e.__esModule=!0,e.default=function(){return!navigator.platform||!/iPad|iPhone|iPod/.test(navigator.platform)}},{}],123:[function(a,t,e){"use strict";function r(a){for(var t=6*a,e=new Uint16Array(t),r=0,o=0;r<t;r+=6,o+=4)e[r+0]=o+0,e[r+1]=o+1,e[r+2]=o+2,e[r+3]=o+0,e[r+4]=o+2,e[r+5]=o+3;return e}e.__esModule=!0,e.default=r},{}],124:[function(a,t,e){"use strict";function r(n){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:window.location;if(0===n.indexOf("data:"))return"";a=a||window.location,o||(o=document.createElement("a")),o.href=n,n=i.default.parse(o.href);var s=!n.port&&""===a.port||n.port===a.port;return n.hostname===a.hostname&&s&&n.protocol===a.protocol?"":"anonymous"}e.__esModule=!0,e.default=r;var n=a("url"),i=function(e){return e&&e.__esModule?e:{default:e}}(n),o=void 0},{url:38}],125:[function(a,t,e){"use strict";function r(n){if(n&&n.__esModule)return n;var t={};if(null!=n)for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t.default=n,t}function n(e){return e&&e.__esModule?e:{default:e}}function i(){return++M}function o(r){if(!R){if(-1<navigator.userAgent.toLowerCase().indexOf("chrome")){var t=["\n %c %c %c PixiJS "+s.VERSION+" - \u2730 "+r+" \u2730  %c  %c  http://www.pixijs.com/  %c %c \u2665%c\u2665%c\u2665 \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];window.console.log.apply(console,t)}else window.console&&window.console.log("PixiJS "+s.VERSION+" - "+r+" - http://www.pixijs.com/");R=!0}}e.__esModule=!0,e.premultiplyBlendMode=e.BaseTextureCache=e.TextureCache=e.earcut=e.mixins=e.pluginTarget=e.EventEmitter=e.removeItems=e.isMobile=void 0,e.uid=i,e.hex2rgb=function(r,t){return t=t||[],t[0]=(255&r>>16)/255,t[1]=(255&r>>8)/255,t[2]=(255&r)/255,t},e.hex2string=function(e){return e=e.toString(16),"#"+(e="000000".substr(0,6-e.length)+e)},e.rgb2hex=function(e){return(255*e[0]<<16)+(255*e[1]<<8)+(0|255*e[2])},e.getResolutionOfUrl=function(n,t){var e=u.default.RETINA_PREFIX.exec(n);return e?parseFloat(e[1]):void 0===t?1:t},e.decomposeDataUri=function(r){var t=s.DATA_URI.exec(r);if(t)return{mediaType:t[1]?t[1].toLowerCase():void 0,subType:t[2]?t[2].toLowerCase():void 0,charset:t[3]?t[3].toLowerCase():void 0,encoding:t[4]?t[4].toLowerCase():void 0,data:t[5]}},e.getUrlFileExtension=function(r){var t=s.URL_FILE_EXTENSION.exec(r);if(t)return t[1].toLowerCase()},e.getSvgSize=function(n){var t=s.SVG_SIZE.exec(n),e={};return t&&(e[t[1]]=l(parseFloat(t[3])),e[t[5]]=l(parseFloat(t[7]))),e},e.skipHello=function(){R=!0},e.sayHello=o,e.isWebGLSupported=function(){var a={stencil:!0,failIfMajorPerformanceCaveat:!0};try{if(!window.WebGLRenderingContext)return!1;var t=document.createElement("canvas"),e=t.getContext("webgl",a)||t.getContext("experimental-webgl",a),o=e&&e.getContextAttributes().stencil;if(e){var n=e.getExtension("WEBGL_lose_context");n&&n.loseContext()}return e=null,o}catch(e){return!1}},e.sign=function(e){return 0===e?0:0>e?-1:1},e.destroyTextureCache=function(){for(var e in O)O[e].destroy();for(e in I)I[e].destroy()},e.clearTextureCache=function(){for(var e in O)delete O[e];for(e in I)delete I[e]},e.correctBlendMode=function(r,t){return D[t?1:0][r]},e.premultiplyTint=function(a,t){if(1===t)return(255*t<<24)+a;if(0===t)return 0;var e=255&a>>16,o=255&a>>8,s=255&a;return e=0|e*t+.5,o=0|o*t+.5,s=0|s*t+.5,(255*t<<24)+(e<<16)+(o<<8)+s},e.premultiplyRgba=function(a,t,e,o){return e=e||new Float32Array(4),o||void 0===o?(e[0]=a[0]*t,e[1]=a[1]*t,e[2]=a[2]*t):(e[0]=a[0],e[1]=a[1],e[2]=a[2]),e[3]=t,e},e.premultiplyTintToRgba=function(a,t,e,o){return e=e||new Float32Array(4),e[0]=(255&a>>16)/255,e[1]=(255&a>>8)/255,e[2]=(255&a)/255,(o||void 0===o)&&(e[0]*=t,e[1]*=t,e[2]*=t),e[3]=t,e};var s=a("../const"),d=a("../settings"),u=n(d),p=a("eventemitter3"),c=n(p),f=a("./pluginTarget"),g=n(f),m=a("./mixin"),_=r(m),b=a("ismobilejs"),T=r(b),v=a("remove-array-items"),S=n(v),E=a("./mapPremultipliedBlendModes"),C=n(E),P=a("earcut"),A=n(P),M=0,R=!1;e.isMobile=T,e.removeItems=S.default,e.EventEmitter=c.default,e.pluginTarget=g.default,e.mixins=_,e.earcut=A.default;var O=e.TextureCache=Object.create(null),I=e.BaseTextureCache=Object.create(null),D=e.premultiplyBlendMode=(0,C.default)()},{"../const":46,"../settings":101,"./mapPremultipliedBlendModes":126,"./mixin":128,"./pluginTarget":129,earcut:2,eventemitter3:3,ismobilejs:4,"remove-array-items":31}],126:[function(a,t,e){"use strict";function r(){for(var a=[],t=[],e=0;32>e;e++)a[e]=e,t[e]=e;a[o.BLEND_MODES.NORMAL_NPM]=o.BLEND_MODES.NORMAL,a[o.BLEND_MODES.ADD_NPM]=o.BLEND_MODES.ADD,a[o.BLEND_MODES.SCREEN_NPM]=o.BLEND_MODES.SCREEN,t[o.BLEND_MODES.NORMAL]=o.BLEND_MODES.NORMAL_NPM,t[o.BLEND_MODES.ADD]=o.BLEND_MODES.ADD_NPM,t[o.BLEND_MODES.SCREEN]=o.BLEND_MODES.SCREEN_NPM;var i=[];return i.push(t),i.push(a),i}e.__esModule=!0,e.default=r;var o=a("../const")},{"../const":46}],127:[function(n,t,e){"use strict";e.__esModule=!0,e.default=function(e){return a.default.tablet||a.default.phone?4:e};var r=n("ismobilejs"),a=function(e){return e&&e.__esModule?e:{default:e}}(r)},{ismobilejs:4}],128:[function(a,t,e){"use strict";function r(a,t){if(a&&t)for(var e=Object.keys(t),r=0,o;r<e.length;++r)o=e[r],Object.defineProperty(a,o,Object.getOwnPropertyDescriptor(t,o))}e.__esModule=!0,e.mixin=r,e.delayMixin=function(r,t){n.push(r,t)},e.performMixins=function(){for(var e=0;e<n.length;e+=2)r(n[e],n[e+1]);n.length=0};var n=[]},{}],129:[function(a,t,e){"use strict";function r(n){n.__plugins={},n.registerPlugin=function(t,e){n.__plugins[t]=e},n.prototype.initPlugins=function(){for(var t in this.plugins=this.plugins||{},n.__plugins)this.plugins[t]=new n.__plugins[t](this)},n.prototype.destroyPlugins=function(){for(var e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null;this.plugins=null}}e.__esModule=!0,e.default={mixin:function(e){r(e)}}},{}],130:[function(a,t,e){"use strict";function r(d){var t=d.width,p=d.height,f=d.getContext("2d"),n=f.getImageData(0,0,t,p),i=n.data,o=i.length,s={top:null,left:null,right:null,bottom:null},a=null,g,m,_;for(g=0;g<o;g+=4)0!==i[g+3]&&(m=g/4%t,_=~~(g/4/t),null===s.top&&(s.top=_),null===s.left?s.left=m:m<s.left&&(s.left=m),null===s.right?s.right=m+1:s.right<m&&(s.right=m+1),null===s.bottom?s.bottom=_:s.bottom<_&&(s.bottom=_));return null!==s.top&&(t=s.right-s.left,p=s.bottom-s.top+1,a=f.getImageData(s.left,s.top,t,p)),{height:p,width:t,data:a}}e.__esModule=!0,e.default=r},{}],131:[function(a,t,e){"use strict";function l(r){if(!n[r]){var t=new Error().stack;void 0===t?console.warn("Deprecation Warning: ",r):(t=t.split("\n").splice(3).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cDeprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",r),console.warn(t),console.groupEnd()):(console.warn("Deprecation Warning: ",r),console.warn(t))),n[r]=!0}}function r(n){var t=n.mesh,e=n.particles,r=n.extras,i=n.filters,o=n.prepare,s=n.loaders,a=n.interaction;Object.defineProperties(n,{SpriteBatch:{get:function(){throw new ReferenceError("SpriteBatch does not exist any more, please use the new ParticleContainer instead.")}},AssetLoader:{get:function(){throw new ReferenceError("The loader system was overhauled in PixiJS v3, please see the new PIXI.loaders.Loader class.")}},Stage:{get:function(){return l("You do not need to use a PIXI Stage any more, you can simply render any container."),n.Container}},DisplayObjectContainer:{get:function(){return l("DisplayObjectContainer has been shortened to Container, please use Container from now on."),n.Container}},Strip:{get:function(){return l("The Strip class has been renamed to Mesh and moved to mesh.Mesh, please use mesh.Mesh from now on."),t.Mesh}},Rope:{get:function(){return l("The Rope class has been moved to mesh.Rope, please use mesh.Rope from now on."),t.Rope}},ParticleContainer:{get:function(){return l("The ParticleContainer class has been moved to particles.ParticleContainer, please use particles.ParticleContainer from now on."),e.ParticleContainer}},MovieClip:{get:function(){return l("The MovieClip class has been moved to extras.AnimatedSprite, please use extras.AnimatedSprite."),r.AnimatedSprite}},TilingSprite:{get:function(){return l("The TilingSprite class has been moved to extras.TilingSprite, please use extras.TilingSprite from now on."),r.TilingSprite}},BitmapText:{get:function(){return l("The BitmapText class has been moved to extras.BitmapText, please use extras.BitmapText from now on."),r.BitmapText}},blendModes:{get:function(){return l("The blendModes has been moved to BLEND_MODES, please use BLEND_MODES from now on."),n.BLEND_MODES}},scaleModes:{get:function(){return l("The scaleModes has been moved to SCALE_MODES, please use SCALE_MODES from now on."),n.SCALE_MODES}},BaseTextureCache:{get:function(){return l("The BaseTextureCache class has been moved to utils.BaseTextureCache, please use utils.BaseTextureCache from now on."),n.utils.BaseTextureCache}},TextureCache:{get:function(){return l("The TextureCache class has been moved to utils.TextureCache, please use utils.TextureCache from now on."),n.utils.TextureCache}},math:{get:function(){return l("The math namespace is deprecated, please access members already accessible on PIXI."),n}},AbstractFilter:{get:function(){return l("AstractFilter has been renamed to Filter, please use PIXI.Filter"),n.Filter}},TransformManual:{get:function(){return l("TransformManual has been renamed to TransformBase, please update your pixi-spine"),n.TransformBase}},TARGET_FPMS:{get:function(){return l("PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS"),n.settings.TARGET_FPMS},set:function(t){l("PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS"),n.settings.TARGET_FPMS=t}},FILTER_RESOLUTION:{get:function(){return l("PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION"),n.settings.FILTER_RESOLUTION},set:function(t){l("PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION"),n.settings.FILTER_RESOLUTION=t}},RESOLUTION:{get:function(){return l("PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION"),n.settings.RESOLUTION},set:function(t){l("PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION"),n.settings.RESOLUTION=t}},MIPMAP_TEXTURES:{get:function(){return l("PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES"),n.settings.MIPMAP_TEXTURES},set:function(t){l("PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES"),n.settings.MIPMAP_TEXTURES=t}},SPRITE_BATCH_SIZE:{get:function(){return l("PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE"),n.settings.SPRITE_BATCH_SIZE},set:function(t){l("PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE"),n.settings.SPRITE_BATCH_SIZE=t}},SPRITE_MAX_TEXTURES:{get:function(){return l("PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES"),n.settings.SPRITE_MAX_TEXTURES},set:function(t){l("PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES"),n.settings.SPRITE_MAX_TEXTURES=t}},RETINA_PREFIX:{get:function(){return l("PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX"),n.settings.RETINA_PREFIX},set:function(t){l("PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX"),n.settings.RETINA_PREFIX=t}},DEFAULT_RENDER_OPTIONS:{get:function(){return l("PIXI.DEFAULT_RENDER_OPTIONS has been deprecated, please use PIXI.settings.DEFAULT_RENDER_OPTIONS"),n.settings.RENDER_OPTIONS}}});for(var u=[{parent:"TRANSFORM_MODE",target:"TRANSFORM_MODE"},{parent:"GC_MODES",target:"GC_MODE"},{parent:"WRAP_MODES",target:"WRAP_MODE"},{parent:"SCALE_MODES",target:"SCALE_MODE"},{parent:"PRECISION",target:"PRECISION_FRAGMENT"}],p=0;p<u.length;p++)!function(t){var a=u[t];Object.defineProperty(n[a.parent],"DEFAULT",{get:function(){return l("PIXI."+a.parent+".DEFAULT has been deprecated, please use PIXI.settings."+a.target),n.settings[a.target]},set:function(t){l("PIXI."+a.parent+".DEFAULT has been deprecated, please use PIXI.settings."+a.target),n.settings[a.target]=t}})}(p);Object.defineProperties(n.settings,{PRECISION:{get:function(){return l("PIXI.settings.PRECISION has been deprecated, please use PIXI.settings.PRECISION_FRAGMENT"),n.settings.PRECISION_FRAGMENT},set:function(t){l("PIXI.settings.PRECISION has been deprecated, please use PIXI.settings.PRECISION_FRAGMENT"),n.settings.PRECISION_FRAGMENT=t}}}),r.AnimatedSprite&&Object.defineProperties(r,{MovieClip:{get:function(){return l("The MovieClip class has been renamed to AnimatedSprite, please use AnimatedSprite from now on."),r.AnimatedSprite}}}),r&&Object.defineProperties(r,{TextureTransform:{get:function(){return l("The TextureTransform class has been renamed to TextureMatrix, please use PIXI.TextureMatrix from now on."),n.TextureMatrix}}}),n.DisplayObject.prototype.generateTexture=function(n,t,e){return l("generateTexture has moved to the renderer, please use renderer.generateTexture(displayObject)"),n.generateTexture(this,t,e)},n.Graphics.prototype.generateTexture=function(r,t){return l("graphics generate texture has moved to the renderer. Or to render a graphics to a texture using canvas please use generateCanvasTexture"),this.generateCanvasTexture(r,t)},n.GroupD8.isSwapWidthHeight=function(t){return l("GroupD8.isSwapWidthHeight was renamed to GroupD8.isVertical"),n.GroupD8.isVertical(t)},n.RenderTexture.prototype.render=function(n,t,e,r){this.legacyRenderer.render(n,this,e,t,!r),l("RenderTexture.render is now deprecated, please use renderer.render(displayObject, renderTexture)")},n.RenderTexture.prototype.getImage=function(e){return l("RenderTexture.getImage is now deprecated, please use renderer.extract.image(target)"),this.legacyRenderer.extract.image(e)},n.RenderTexture.prototype.getBase64=function(e){return l("RenderTexture.getBase64 is now deprecated, please use renderer.extract.base64(target)"),this.legacyRenderer.extract.base64(e)},n.RenderTexture.prototype.getCanvas=function(e){return l("RenderTexture.getCanvas is now deprecated, please use renderer.extract.canvas(target)"),this.legacyRenderer.extract.canvas(e)},n.RenderTexture.prototype.getPixels=function(e){return l("RenderTexture.getPixels is now deprecated, please use renderer.extract.pixels(target)"),this.legacyRenderer.pixels(e)},n.Sprite.prototype.setTexture=function(e){this.texture=e,l("setTexture is now deprecated, please use the texture property, e.g : sprite.texture = texture;")},r.BitmapText&&(r.BitmapText.prototype.setText=function(e){this.text=e,l("setText is now deprecated, please use the text property, e.g : myBitmapText.text = 'my text';")}),n.Text.prototype.setText=function(e){this.text=e,l("setText is now deprecated, please use the text property, e.g : myText.text = 'my text';")},n.Text.calculateFontProperties=function(t){return l("Text.calculateFontProperties is now deprecated, please use the TextMetrics.measureFont"),n.TextMetrics.measureFont(t)},Object.defineProperties(n.Text,{fontPropertiesCache:{get:function(){return l("Text.fontPropertiesCache is deprecated"),n.TextMetrics._fonts}},fontPropertiesCanvas:{get:function(){return l("Text.fontPropertiesCanvas is deprecated"),n.TextMetrics._canvas}},fontPropertiesContext:{get:function(){return l("Text.fontPropertiesContext is deprecated"),n.TextMetrics._context}}}),n.Text.prototype.setStyle=function(e){this.style=e,l("setStyle is now deprecated, please use the style property, e.g : myText.style = style;")},n.Text.prototype.determineFontProperties=function(t){return l("determineFontProperties is now deprecated, please use TextMetrics.measureFont method"),n.TextMetrics.measureFont(t)},n.Text.getFontStyle=function(t){return l("getFontStyle is now deprecated, please use TextStyle.toFontString() instead"),t=t||{},t instanceof n.TextStyle||(t=new n.TextStyle(t)),t.toFontString()},Object.defineProperties(n.TextStyle.prototype,{font:{get:function(){l("text style property 'font' is now deprecated, please use the 'fontFamily', 'fontSize', 'fontStyle', 'fontVariant' and 'fontWeight' properties from now on");var e="number"==typeof this._fontSize?this._fontSize+"px":this._fontSize;return this._fontStyle+" "+this._fontVariant+" "+this._fontWeight+" "+e+" "+this._fontFamily},set:function(n){l("text style property 'font' is now deprecated, please use the 'fontFamily','fontSize',fontStyle','fontVariant' and 'fontWeight' properties from now on"),this._fontStyle=1<n.indexOf("italic")?"italic":-1<n.indexOf("oblique")?"oblique":"normal",this._fontVariant=-1<n.indexOf("small-caps")?"small-caps":"normal";var t=n.split(" "),e=-1;this._fontSize=26;for(var a=0;a<t.length;++a)if(t[a].match(/(px|pt|em|%)/)){e=a,this._fontSize=t[a];break}this._fontWeight="normal";for(var d=0;d<e;++d)if(t[d].match(/(bold|bolder|lighter|100|200|300|400|500|600|700|800|900)/)){this._fontWeight=t[d];break}if(-1<e&&e<t.length-1){this._fontFamily="";for(var u=e+1;u<t.length;++u)this._fontFamily+=t[u]+" ";this._fontFamily=this._fontFamily.slice(0,-1)}else this._fontFamily="Arial";this.styleID++}}}),n.Texture.prototype.setFrame=function(e){this.frame=e,l("setFrame is now deprecated, please use the frame property, e.g: myTexture.frame = frame;")},n.Texture.addTextureToCache=function(t,e){n.Texture.addToCache(t,e),l("Texture.addTextureToCache is deprecated, please use Texture.addToCache from now on.")},n.Texture.removeTextureFromCache=function(t){return l("Texture.removeTextureFromCache is deprecated, please use Texture.removeFromCache from now on. Be aware that Texture.removeFromCache does not automatically its BaseTexture from the BaseTextureCache. For that, use BaseTexture.removeFromCache"),n.BaseTexture.removeFromCache(t),n.Texture.removeFromCache(t)},Object.defineProperties(i,{AbstractFilter:{get:function(){return l("AstractFilter has been renamed to Filter, please use PIXI.Filter"),n.AbstractFilter}},SpriteMaskFilter:{get:function(){return l("filters.SpriteMaskFilter is an undocumented alias, please use SpriteMaskFilter from now on."),n.SpriteMaskFilter}},VoidFilter:{get:function(){return l("VoidFilter has been renamed to AlphaFilter, please use PIXI.filters.AlphaFilter"),i.AlphaFilter}}}),n.utils.uuid=function(){return l("utils.uuid() is deprecated, please use utils.uid() from now on."),n.utils.uid()},n.utils.canUseNewCanvasBlendModes=function(){return l("utils.canUseNewCanvasBlendModes() is deprecated, please use CanvasTinter.canUseMultiply from now on"),n.CanvasTinter.canUseMultiply};var g=!0;if(Object.defineProperty(n.utils,"_saidHello",{set:function(e){e&&(l("PIXI.utils._saidHello is deprecated, please use PIXI.utils.skipHello()"),this.skipHello()),g=e},get:function(){return g}}),o.BasePrepare&&(o.BasePrepare.prototype.register=function(r,t){return l("renderer.plugins.prepare.register is now deprecated, please use renderer.plugins.prepare.registerFindHook & renderer.plugins.prepare.registerUploadHook"),r&&this.registerFindHook(r),t&&this.registerUploadHook(t),this}),o.canvas&&Object.defineProperty(o.canvas,"UPLOADS_PER_FRAME",{set:function(){l("PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer")},get:function(){return l("PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter"),NaN}}),o.webgl&&Object.defineProperty(o.webgl,"UPLOADS_PER_FRAME",{set:function(){l("PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer")},get:function(){return l("PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter"),NaN}}),s.Loader){var m=s.Resource,d=s.Loader;Object.defineProperties(m.prototype,{isJson:{get:function(){return l("The isJson property is deprecated, please use `resource.type === Resource.TYPE.JSON`."),this.type===m.TYPE.JSON}},isXml:{get:function(){return l("The isXml property is deprecated, please use `resource.type === Resource.TYPE.XML`."),this.type===m.TYPE.XML}},isImage:{get:function(){return l("The isImage property is deprecated, please use `resource.type === Resource.TYPE.IMAGE`."),this.type===m.TYPE.IMAGE}},isAudio:{get:function(){return l("The isAudio property is deprecated, please use `resource.type === Resource.TYPE.AUDIO`."),this.type===m.TYPE.AUDIO}},isVideo:{get:function(){return l("The isVideo property is deprecated, please use `resource.type === Resource.TYPE.VIDEO`."),this.type===m.TYPE.VIDEO}}}),Object.defineProperties(d.prototype,{before:{get:function(){return l("The before() method is deprecated, please use pre()."),this.pre}},after:{get:function(){return l("The after() method is deprecated, please use use()."),this.use}}})}a.interactiveTarget&&Object.defineProperty(a.interactiveTarget,"defaultCursor",{set:function(e){l("Property defaultCursor has been replaced with 'cursor'. "),this.cursor=e},get:function(){return l("Property defaultCursor has been replaced with 'cursor'. "),this.cursor}}),a.InteractionManager&&(Object.defineProperty(a.InteractionManager,"defaultCursorStyle",{set:function(e){l("Property defaultCursorStyle has been replaced with 'cursorStyles.default'. "),this.cursorStyles.default=e},get:function(){return l("Property defaultCursorStyle has been replaced with 'cursorStyles.default'. "),this.cursorStyles.default}}),Object.defineProperty(a.InteractionManager,"currentCursorStyle",{set:function(e){l("Property currentCursorStyle has been removed.See the currentCursorMode property, which works differently."),this.currentCursorMode=e},get:function(){return l("Property currentCursorStyle has been removed.See the currentCursorMode property, which works differently."),this.currentCursorMode}}))}e.__esModule=!0,e.default=r;var n={}},{}],132:[function(l,t,e){"use strict";function r(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var n=l("../../core"),d=function(n){if(n&&n.__esModule)return n;var t={};if(null!=n)for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t.default=n,t}(n),o=new d.Rectangle,i=function(){function n(t){r(this,n),this.renderer=t,t.extract=this}return n.prototype.image=function(r){var t=new Image;return t.src=this.base64(r),t},n.prototype.base64=function(e){return this.canvas(e).toDataURL()},n.prototype.canvas=function(s){var t=this.renderer,e,p,f,g;s&&(g=s instanceof d.RenderTexture?s:t.generateTexture(s)),g?(e=g.baseTexture._canvasRenderTarget.context,p=g.baseTexture._canvasRenderTarget.resolution,f=g.frame):(e=t.rootContext,p=t.resolution,f=o,f.width=this.renderer.width,f.height=this.renderer.height);var m=J(f.width*p+1e-4),u=J(f.height*p+1e-4),_=new d.CanvasRenderTarget(m,u,1),l=e.getImageData(f.x*p,f.y*p,m,u);return _.context.putImageData(l,0,0),_.canvas},n.prototype.pixels=function(s){var t=this.renderer,e,l,u,p;return s&&(p=s instanceof d.RenderTexture?s:t.generateTexture(s)),p?(e=p.baseTexture._canvasRenderTarget.context,l=p.baseTexture._canvasRenderTarget.resolution,u=p.frame):(e=t.rootContext,u=o,u.width=t.width,u.height=t.height),e.getImageData(0,0,u.width*l,u.height*l).data},n.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},n}();e.default=i,d.CanvasRenderer.registerPlugin("extract",i)},{"../../core":65}],133:[function(a,t,e){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}e.__esModule=!0;var n=a("./webgl/WebGLExtract");Object.defineProperty(e,"webgl",{enumerable:!0,get:function(){return r(n).default}});var i=a("./canvas/CanvasExtract");Object.defineProperty(e,"canvas",{enumerable:!0,get:function(){return r(i).default}})},{"./canvas/CanvasExtract":132,"./webgl/WebGLExtract":134}],134:[function(l,t,e){"use strict";function r(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var n=l("../../core"),g=function(n){if(n&&n.__esModule)return n;var t={};if(null!=n)for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t.default=n,t}(n),o=new g.Rectangle,i=function(){function n(t){r(this,n),this.renderer=t,t.extract=this}return n.prototype.image=function(r){var t=new Image;return t.src=this.base64(r),t},n.prototype.base64=function(e){return this.canvas(e).toDataURL()},n.prototype.canvas=function(s){var t=this.renderer,e=!1,m=!1,_,b,T,S;s&&(s instanceof g.RenderTexture?S=s:(S=this.renderer.generateTexture(s),m=!0)),S?(_=S.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID],b=_.resolution,T=S.frame,e=!1):(_=this.renderer.rootRenderTarget,b=_.resolution,e=!0,T=o,T.width=_.size.width,T.height=_.size.height);var E=J(T.width*b+1e-4),l=J(T.height*b+1e-4),c=new g.CanvasRenderTarget(E,l,1);if(_){t.bindRenderTarget(_);var d=new Uint8Array(4*E*l),f=t.gl;f.readPixels(T.x*b,T.y*b,E,l,f.RGBA,f.UNSIGNED_BYTE,d);var p=c.context.getImageData(0,0,E,l);p.data.set(d),c.context.putImageData(p,0,0),e&&(c.context.scale(1,-1),c.context.drawImage(c.canvas,0,-l))}return m&&S.destroy(!0),c.canvas},n.prototype.pixels=function(s){var t=this.renderer,e=!1,p,f,m,_;s&&(s instanceof g.RenderTexture?_=s:(_=this.renderer.generateTexture(s),e=!0)),_?(p=_.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID],f=p.resolution,m=_.frame):(p=this.renderer.rootRenderTarget,f=p.resolution,m=o,m.width=p.size.width,m.height=p.size.height);var b=m.width*f,T=m.height*f,l=new Uint8Array(4*b*T);if(p){t.bindRenderTarget(p);var c=t.gl;c.readPixels(m.x*f,m.y*f,b,T,c.RGBA,c.UNSIGNED_BYTE,l)}return e&&_.destroy(!0),l},n.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},n}();e.default=i,g.WebGLRenderer.registerPlugin("extract",i)},{"../../core":65}],135:[function(l,t,e){"use strict";function d(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function n(r,t){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:r}function i(r,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(r,t):r.__proto__=t)}e.__esModule=!0;var o=function(){function a(a,t){for(var e=0,o;e<t.length;e++)o=t[e],o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(a,o.key,o)}return function(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t}}(),s=l("../core"),a=function(n){if(n&&n.__esModule)return n;var t={};if(null!=n)for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t.default=n,t}(s),u=function(l){function u(e,t){d(this,u);var r=n(this,l.call(this,e[0]instanceof a.Texture?e[0]:e[0].texture));return r._textures=null,r._durations=null,r.textures=e,r._autoUpdate=!1!==t,r.animationSpeed=1,r.loop=!0,r.updateAnchor=!1,r.onComplete=null,r.onFrameChange=null,r.onLoop=null,r._currentTime=0,r.playing=!1,r}return i(u,l),u.prototype.stop=function(){this.playing&&(this.playing=!1,this._autoUpdate&&a.ticker.shared.remove(this.update,this))},u.prototype.play=function(){this.playing||(this.playing=!0,this._autoUpdate&&a.ticker.shared.add(this.update,this,a.UPDATE_PRIORITY.HIGH))},u.prototype.gotoAndStop=function(r){this.stop();var t=this.currentFrame;this._currentTime=r,t!==this.currentFrame&&this.updateTexture()},u.prototype.gotoAndPlay=function(r){var t=this.currentFrame;this._currentTime=r,t!==this.currentFrame&&this.updateTexture(),this.play()},u.prototype.update=function(a){var t=this.animationSpeed*a,e=this.currentFrame;if(null!==this._durations){var o=this._currentTime%1*this._durations[this.currentFrame];for(o+=1e3*(t/60);0>o;)this._currentTime--,o+=this._durations[this.currentFrame];var s=r(this.animationSpeed*a);for(this._currentTime=J(this._currentTime);o>=this._durations[this.currentFrame];)o-=this._durations[this.currentFrame]*s,this._currentTime+=s;this._currentTime+=o/this._durations[this.currentFrame]}else this._currentTime+=t;0>this._currentTime&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):e!==this.currentFrame&&(this.loop&&this.onLoop&&(0<this.animationSpeed&&this.currentFrame<e?this.onLoop():0>this.animationSpeed&&this.currentFrame>e&&this.onLoop()),this.updateTexture())},u.prototype.updateTexture=function(){this._texture=this._textures[this.currentFrame],this._textureID=-1,this.cachedTint=16777215,this.updateAnchor&&this._anchor.copy(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame)},u.prototype.destroy=function(t){this.stop(),l.prototype.destroy.call(this,t)},u.fromFrames=function(e){for(var t=[],r=0;r<e.length;++r)t.push(a.Texture.fromFrame(e[r]));return new u(t)},u.fromImages=function(e){for(var t=[],r=0;r<e.length;++r)t.push(a.Texture.fromImage(e[r]));return new u(t)},o(u,[{key:"totalFrames",get:function(){return this._textures.length}},{key:"textures",get:function(){return this._textures},set:function(r){if(r[0]instanceof a.Texture)this._textures=r,this._durations=null;else{this._textures=[],this._durations=[];for(var t=0;t<r.length;t++)this._textures.push(r[t].texture),this._durations.push(r[t].time)}this.gotoAndStop(0),this.updateTexture()}},{key:"currentFrame",get:function(){var e=J(this._currentTime)%this._textures.length;return 0>e&&(e+=this._textures.length),e}}]),u}(a.Sprite);e.default=u},{"../core":65}],136:[function(g,t,e){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function m(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function i(r,t){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:r}function n(r,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(r,t):r.__proto__=t)}e.__esModule=!0;var o=function(){function a(a,t){for(var e=0,o;e<t.length;e++)o=t[e],o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(a,o.key,o)}return function(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t}}(),a=g("../core"),A=function(n){if(n&&n.__esModule)return n;var t={};if(null!=n)for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t.default=n,t}(a),s=g("../core/math/ObservablePoint"),l=r(s),C=g("../core/utils"),d=g("../core/settings"),P=r(d),u=function(a){function M(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};m(this,M);var r=i(this,a.call(this));return r._textWidth=0,r._textHeight=0,r._glyphs=[],r._font={tint:void 0===t.tint?16777215:t.tint,align:t.align||"left",name:null,size:0},r.font=t.font,r._text=e,r._maxWidth=0,r._maxLineHeight=0,r._letterSpacing=0,r._anchor=new l.default(function(){r.dirty=!0},r,0,0),r.dirty=!1,r.updateText(),r}return n(M,a),M.prototype.updateText=function(){for(var e=M.fonts[this._font.name],t=this._font.size/e.size,r=new A.Point,n=[],i=[],o=this.text.replace(/(?:\r\n|\r)/g,"\n"),s=o.length,a=this._maxWidth*e.size/this._font.size,u=null,I=0,D=0,L=0,k=-1,B=0,N=0,F=0,U=0;U<s;U++){var X=o.charCodeAt(U),_=o.charAt(U);if(/(?:\s)/.test(_)&&(k=U,B=I),"\r"!==_&&"\n"!==_){var b=e.chars[X];b&&(u&&b.kerning[u]&&(r.x+=b.kerning[u]),n.push({texture:b.texture,line:L,charCode:X,position:new A.Point(r.x+b.xOffset+this._letterSpacing/2,r.y+b.yOffset)}),r.x+=b.xAdvance+this._letterSpacing,I=r.x,F=te(F,b.yOffset+b.texture.height),u=X,-1!==k&&0<a&&r.x>a&&(++N,A.utils.removeItems(n,1+k-N,1+U-k),U=k,k=-1,i.push(B),D=te(D,B),L++,r.x=0,r.y+=e.lineHeight,u=null))}else i.push(I),D=te(D,I),++L,++N,r.x=0,r.y+=e.lineHeight,u=null}var W=o.charAt(o.length-1);"\r"!==W&&"\n"!==W&&(/(?:\s)/.test(W)&&(I=B),i.push(I),D=te(D,I));for(var T=[],G=0,Y;G<=L;G++)Y=0,"right"===this._font.align?Y=D-i[G]:"center"===this._font.align&&(Y=(D-i[G])/2),T.push(Y);for(var V=n.length,O=this.tint,H=0,j;H<V;H++)j=this._glyphs[H],j?j.texture=n[H].texture:(j=new A.Sprite(n[H].texture),this._glyphs.push(j)),j.position.x=(n[H].position.x+T[n[H].line])*t,j.position.y=n[H].position.y*t,j.scale.x=j.scale.y=t,j.tint=O,j.parent||this.addChild(j);for(var z=V;z<this._glyphs.length;++z)this.removeChild(this._glyphs[z]);if(this._textWidth=D*t,this._textHeight=(r.y+e.lineHeight)*t,0!==this.anchor.x||0!==this.anchor.y)for(var q=0;q<V;q++)this._glyphs[q].x-=this._textWidth*this.anchor.x,this._glyphs[q].y-=this._textHeight*this.anchor.y;this._maxLineHeight=F*t},M.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},M.prototype.getLocalBounds=function(){return this.validate(),a.prototype.getLocalBounds.call(this)},M.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},M.registerFont=function(e,t){var d={},n=e.getElementsByTagName("info")[0],i=e.getElementsByTagName("common")[0],o=e.getElementsByTagName("page"),s=(0,C.getResolutionOfUrl)(o[0].getAttribute("file"),P.default.RESOLUTION),a={};d.font=n.getAttribute("face"),d.size=parseInt(n.getAttribute("size"),10),d.lineHeight=parseInt(i.getAttribute("lineHeight"),10)/s,d.chars={},t instanceof A.Texture&&(t=[t]);for(var u=0;u<o.length;u++){var p=o[u].getAttribute("id"),c=o[u].getAttribute("file");a[p]=t instanceof Array?t[u]:t[c]}for(var f=e.getElementsByTagName("char"),v=0;v<f.length;v++){var R=f[v],I=parseInt(R.getAttribute("id"),10),m=R.getAttribute("page")||0,_=new A.Rectangle(parseInt(R.getAttribute("x"),10)/s+a[m].frame.x/s,parseInt(R.getAttribute("y"),10)/s+a[m].frame.y/s,parseInt(R.getAttribute("width"),10)/s,parseInt(R.getAttribute("height"),10)/s);d.chars[I]={xOffset:parseInt(R.getAttribute("xoffset"),10)/s,yOffset:parseInt(R.getAttribute("yoffset"),10)/s,xAdvance:parseInt(R.getAttribute("xadvance"),10)/s,kerning:{},texture:new A.Texture(a[m].baseTexture,_),page:m}}for(var b=e.getElementsByTagName("kerning"),D=0;D<b.length;D++){var L=b[D],k=parseInt(L.getAttribute("first"),10)/s,E=parseInt(L.getAttribute("second"),10)/s,S=parseInt(L.getAttribute("amount"),10)/s;d.chars[E]&&(d.chars[E].kerning[k]=S)}return M.fonts[d.font]=d,d},o(M,[{key:"tint",get:function(){return this._font.tint},set:function(e){this._font.tint="number"==typeof e&&0<=e?e:16777215,this.dirty=!0}},{key:"align",get:function(){return this._font.align},set:function(e){this._font.align=e||"left",this.dirty=!0}},{key:"anchor",get:function(){return this._anchor},set:function(e){"number"==typeof e?this._anchor.set(e):this._anchor.copy(e)}},{key:"font",get:function(){return this._font},set:function(e){e&&("string"==typeof e?(e=e.split(" "),this._font.name=1===e.length?e[0]:e.slice(1).join(" "),this._font.size=2<=e.length?parseInt(e[0],10):M.fonts[this._font.name].size):(this._font.name=e.name,this._font.size="number"==typeof e.size?e.size:parseInt(e.size,10)),this.dirty=!0)}},{key:"text",get:function(){return this._text},set:function(e){e=e.toString()||" ",this._text!==e&&(this._text=e,this.dirty=!0)}},{key:"maxWidth",get:function(){return this._maxWidth},set:function(e){this._maxWidth!==e&&(this._maxWidth=e,this.dirty=!0)}},{key:"maxLineHeight",get:function(){return this.validate(),this._maxLineHeight}},{key:"textWidth",get:function(){return this.validate(),this._textWidth}},{key:"letterSpacing",get:function(){return this._letterSpacing},set:function(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.dirty=!0)}},{key:"textHeight",get:function(){return this.validate(),this._textHeight}}]),M}(A.Container);e.default=u,u.fonts={}},{"../core":65,"../core/math/ObservablePoint":68,"../core/settings":101,"../core/utils":125}],137:[function(p,t,e){"use strict";function f(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function n(r,t){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:r}function r(r,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(r,t):r.__proto__=t)}e.__esModule=!0;var o=function(){function a(a,t){for(var e=0,o;e<t.length;e++)o=t[e],o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(a,o.key,o)}return function(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t}}(),i=p("../core"),T=function(n){if(n&&n.__esModule)return n;var t={};if(null!=n)for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t.default=n,t}(i),a=p("../core/sprites/canvas/CanvasTinter"),u=function(e){return e&&e.__esModule?e:{default:e}}(a),s=new T.Point,l=function(i){function l(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:100,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:100;f(this,l);var o=n(this,i.call(this,e));return o.tileTransform=new T.TransformStatic,o._width=t,o._height=r,o._canvasPattern=null,o.uvTransform=e.transform||new T.TextureMatrix(e),o.pluginName="tilingSprite",o.uvRespectAnchor=!1,o}return r(l,i),l.prototype._onTextureUpdate=function(){this.uvTransform&&(this.uvTransform.texture=this._texture),this.cachedTint=16777215},l.prototype._renderWebGL=function(r){var t=this._texture;t&&t.valid&&(this.tileTransform.updateLocalTransform(),this.uvTransform.update(),r.setObjectRenderer(r.plugins[this.pluginName]),r.plugins[this.pluginName].render(this))},l.prototype._renderCanvas=function(l){var t=this._texture;if(t.baseTexture.hasLoaded){var e=l.context,r=this.worldTransform,n=l.resolution,i=2===t.rotate,o=t.baseTexture,s=o.resolution,a=this.tilePosition.x/this.tileScale.x%t.orig.width*s,S=this.tilePosition.y/this.tileScale.y%t.orig.height*s;if(this._textureID!==this._texture._updateID||this.cachedTint!==this.tint){this._textureID=this._texture._updateID;var c=new T.CanvasRenderTarget(t.orig.width,t.orig.height,s);if(16777215!==this.tint)this.tintedTexture=u.default.getTintedTexture(this,this.tint),c.context.drawImage(this.tintedTexture,0,0);else{var d=t._frame.x*s,f=t._frame.y*s,p=t._frame.width*s,v=t._frame.height*s,g=(t.trim?t.trim.width:t.orig.width)*s,E=(t.trim?t.trim.height:t.orig.height)*s,m=(t.trim?t.trim.x:0)*s,_=(t.trim?t.trim.y:0)*s;i?(c.context.rotate(-Z/2),c.context.translate(-E,0),c.context.drawImage(o.source,d,f,p,v,-_,m,E,g)):c.context.drawImage(o.source,d,f,p,v,m,_,g,E)}this.cachedTint=this.tint,this._canvasPattern=c.context.createPattern(c.canvas,"repeat")}e.globalAlpha=this.worldAlpha,e.setTransform(r.a*n,r.b*n,r.c*n,r.d*n,r.tx*n,r.ty*n),l.setBlendMode(this.blendMode),e.fillStyle=this._canvasPattern,e.scale(this.tileScale.x/s,this.tileScale.y/s);var b=this.anchor.x*-this._width*s,C=this.anchor.y*-this._height*s;this.uvRespectAnchor?(e.translate(a,S),e.fillRect(-a+b,-S+C,this._width/this.tileScale.x*s,this._height/this.tileScale.y*s)):(e.translate(a+b,S+C),e.fillRect(-a,-S,this._width/this.tileScale.x*s,this._height/this.tileScale.y*s))}},l.prototype._calculateBounds=function(){var a=this._width*-this._anchor._x,t=this._height*-this._anchor._y,e=this._width*(1-this._anchor._x),r=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,a,t,e,r)},l.prototype.getLocalBounds=function(t){return 0===this.children.length?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new T.Rectangle),t=this._localBoundsRect),this._bounds.getRectangle(t)):i.prototype.getLocalBounds.call(this,t)},l.prototype.containsPoint=function(a){this.worldTransform.applyInverse(a,s);var t=this._width,e=this._height,r=-t*this.anchor._x;if(s.x>=r&&s.x<r+t){var n=-e*this.anchor._y;if(s.y>=n&&s.y<n+e)return!0}return!1},l.prototype.destroy=function(t){i.prototype.destroy.call(this,t),this.tileTransform=null,this.uvTransform=null},l.from=function(e,t,r){return new l(T.Texture.from(e),t,r)},l.fromFrame=function(e,t,r){var n=T.utils.TextureCache[e];if(!n)throw new Error("The frameId \""+e+"\" does not exist in the texture cache "+this);return new l(n,t,r)},l.fromImage=function(e,t,r,n,a){return new l(T.Texture.fromImage(e,n,a),t,r)},o(l,[{key:"clampMargin",get:function(){return this.uvTransform.clampMargin},set:function(e){this.uvTransform.clampMargin=e,this.uvTransform.update(!0)}},{key:"tileScale",get:function(){return this.tileTransform.scale},set:function(e){this.tileTransform.scale.copy(e)}},{key:"tilePosition",get:function(){return this.tileTransform.position},set:function(e){this.tileTransform.position.copy(e)}},{key:"width",get:function(){return this._width},set:function(e){this._width=e}},{key:"height",get:function(){return this._height},set:function(e){this._height=e}}]),l}(T.Sprite);e.default=l},{"../core":65,"../core/sprites/canvas/CanvasTinter":104}],138:[function(e){"use strict";function t(e){return e&&e.__esModule?e:{default:e}}function r(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}var n=e("../core"),g=function(n){if(n&&n.__esModule)return n;var t={};if(null!=n)for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t.default=n,t}(n),o=e("../core/textures/Texture"),s=t(o),a=e("../core/textures/BaseTexture"),u=t(a),l=e("../core/utils"),i=g.DisplayObject,c=new g.Matrix;i.prototype._cacheAsBitmap=!1,i.prototype._cacheData=!1;var d=function e(){r(this,e),this.textureCacheId=null,this.originalRenderWebGL=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalHitTest=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.sprite=null};Object.defineProperties(i.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(r){if(this._cacheAsBitmap!==r){this._cacheAsBitmap=r;var t;r?(this._cacheData||(this._cacheData=new d),t=this._cacheData,t.originalRenderWebGL=this.renderWebGL,t.originalRenderCanvas=this.renderCanvas,t.originalUpdateTransform=this.updateTransform,t.originalCalculateBounds=this.calculateBounds,t.originalGetLocalBounds=this.getLocalBounds,t.originalDestroy=this.destroy,t.originalContainsPoint=this.containsPoint,t.originalMask=this._mask,t.originalFilterArea=this.filterArea,this.renderWebGL=this._renderCachedWebGL,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(t=this._cacheData,t.sprite&&this._destroyCachedDisplayObject(),this.renderWebGL=t.originalRenderWebGL,this.renderCanvas=t.originalRenderCanvas,this.calculateBounds=t.originalCalculateBounds,this.getLocalBounds=t.originalGetLocalBounds,this.destroy=t.originalDestroy,this.updateTransform=t.originalUpdateTransform,this.containsPoint=t.originalContainsPoint,this._mask=t.originalMask,this.filterArea=t.originalFilterArea)}}}}),i.prototype._renderCachedWebGL=function(e){this.visible&&!(0>=this.worldAlpha)&&this.renderable&&(this._initCachedDisplayObject(e),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderWebGL(e))},i.prototype._initCachedDisplayObject=function(f){if(!this._cacheData||!this._cacheData.sprite){var t=this.alpha;this.alpha=1,f.currentRenderer.flush();var e=this.getLocalBounds().clone();if(this._filters&&this._filters.length){var r=this._filters[0].padding;e.pad(r)}e.ceil(g.settings.RESOLUTION);var n=f._activeRenderTarget,i=f.filterManager.filterStack,o=g.RenderTexture.create(e.width,e.height),a="cacheAsBitmap_"+(0,l.uid)();this._cacheData.textureCacheId=a,u.default.addToCache(o.baseTexture,a),s.default.addToCache(o,a);var m=c;m.tx=-e.x,m.ty=-e.y,this.transform.worldTransform.identity(),this.renderWebGL=this._cacheData.originalRenderWebGL,f.render(this,o,!0,m,!0),f.bindRenderTarget(n),f.filterManager.filterStack=i,this.renderWebGL=this._renderCachedWebGL,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null;var d=new g.Sprite(o);d.transform.worldTransform=this.transform.worldTransform,d.anchor.x=-e.x/e.width,d.anchor.y=-e.y/e.height,d.alpha=t,d._bounds=this._bounds,this._cacheData.sprite=d,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=f._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=d.containsPoint.bind(d)}},i.prototype._renderCachedCanvas=function(e){this.visible&&!(0>=this.worldAlpha)&&this.renderable&&(this._initCachedDisplayObjectCanvas(e),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(e))},i.prototype._initCachedDisplayObjectCanvas=function(d){if(!this._cacheData||!this._cacheData.sprite){var t=this.getLocalBounds(),e=this.alpha;this.alpha=1;var r=d.context;t.ceil(g.settings.RESOLUTION);var n=g.RenderTexture.create(t.width,t.height),i="cacheAsBitmap_"+(0,l.uid)();this._cacheData.textureCacheId=i,u.default.addToCache(n.baseTexture,i),s.default.addToCache(n,i);var o=c;this.transform.localTransform.copy(o),o.invert(),o.tx-=t.x,o.ty-=t.y,this.renderCanvas=this._cacheData.originalRenderCanvas,d.render(this,n,!0,o,!1),d.context=r,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null;var a=new g.Sprite(n);a.transform.worldTransform=this.transform.worldTransform,a.anchor.x=-t.x/t.width,a.anchor.y=-t.y/t.height,a.alpha=e,a._bounds=this._bounds,this._cacheData.sprite=a,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=d._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=a.containsPoint.bind(a)}},i.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._lastBoundsID=this._boundsID},i.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds()},i.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,u.default.removeFromCache(this._cacheData.textureCacheId),s.default.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},i.prototype._cacheAsBitmapDestroy=function(e){this.cacheAsBitmap=!1,this.destroy(e)}},{"../core":65,"../core/textures/BaseTexture":112,"../core/textures/Texture":115,"../core/utils":125}],139:[function(e){"use strict";var t=e("../core"),r=function(n){if(n&&n.__esModule)return n;var t={};if(null!=n)for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t.default=n,t}(t);r.DisplayObject.prototype.name=null,r.Container.prototype.getChildByName=function(r){for(var t=0;t<this.children.length;t++)if(this.children[t].name===r)return this.children[t];return null}},{"../core":65}],140:[function(e){"use strict";var t=e("../core"),r=function(n){if(n&&n.__esModule)return n;var t={};if(null!=n)for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t.default=n,t}(t);r.DisplayObject.prototype.getGlobalPosition=function(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new r.Point,t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return this.parent?this.parent.toGlobal(this.position,n,t):(n.x=this.position.x,n.y=this.position.y),n}},{"../core":65}],141:[function(l,t,e){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}e.__esModule=!0,e.BitmapText=e.TilingSpriteRenderer=e.TilingSprite=e.AnimatedSprite=void 0;var n=l("./AnimatedSprite");Object.defineProperty(e,"AnimatedSprite",{enumerable:!0,get:function(){return r(n).default}});var i=l("./TilingSprite");Object.defineProperty(e,"TilingSprite",{enumerable:!0,get:function(){return r(i).default}});var o=l("./webgl/TilingSpriteRenderer");Object.defineProperty(e,"TilingSpriteRenderer",{enumerable:!0,get:function(){return r(o).default}});var s=l("./BitmapText");Object.defineProperty(e,"BitmapText",{enumerable:!0,get:function(){return r(s).default}}),l("./cacheAsBitmap"),l("./getChildByName"),l("./getGlobalPosition")},{"./AnimatedSprite":135,"./BitmapText":136,"./TilingSprite":137,"./cacheAsBitmap":138,"./getChildByName":139,"./getGlobalPosition":140,"./webgl/TilingSpriteRenderer":142}],142:[function(d,t,e){"use strict";function p(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function n(r,t){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:r}function r(r,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(r,t):r.__proto__=t)}e.__esModule=!0;var o=d("../../core"),m=function(n){if(n&&n.__esModule)return n;var t={};if(null!=n)for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t.default=n,t}(o),a=d("../../core/const"),u=(d("path"),new m.Matrix),i=function(i){function t(e){p(this,t);var r=n(this,i.call(this,e));return r.shader=null,r.simpleShader=null,r.quad=null,r}return r(t,i),t.prototype.onContextChange=function(){var e=this.renderer.gl;this.shader=new m.Shader(e,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = mod(vTextureCoord - uClampOffset, vec2(1.0, 1.0)) + uClampOffset;\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 sample = texture2D(uSampler, coord);\n    gl_FragColor = sample * uColor;\n}\n"),this.simpleShader=new m.Shader(e,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 sample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = sample * uColor;\n}\n"),this.renderer.bindVao(null),this.quad=new m.Quad(e,this.renderer.state.attribState),this.quad.initVao(this.shader)},t.prototype.render=function(_){var t=this.renderer,e=this.quad;t.bindVao(e.vao);var r=e.vertices;r[0]=r[6]=_._width*-_.anchor.x,r[1]=r[3]=_._height*-_.anchor.y,r[2]=r[4]=_._width*(1-_.anchor.x),r[5]=r[7]=_._height*(1-_.anchor.y),_.uvRespectAnchor&&(r=e.uvs,r[0]=r[6]=-_.anchor.x,r[1]=r[3]=-_.anchor.y,r[2]=r[4]=1-_.anchor.x,r[5]=r[7]=1-_.anchor.y),e.upload();var b=_._texture,i=b.baseTexture,o=_.tileTransform.localTransform,s=_.uvTransform,l=i.isPowerOfTwo&&b.frame.width===i.width&&b.frame.height===i.height;l&&(i._glTextures[t.CONTEXT_UID]?l=i.wrapMode!==a.WRAP_MODES.CLAMP:i.wrapMode===a.WRAP_MODES.CLAMP&&(i.wrapMode=a.WRAP_MODES.REPEAT));var T=l?this.simpleShader:this.shader;t.bindShader(T);var d=b.width,f=b.height,p=_._width,v=_._height;u.set(o.a*d/p,o.b*d/v,o.c*f/p,o.d*f/v,o.tx/p,o.ty/v),u.invert(),l?u.prepend(s.mapCoord):(T.uniforms.uMapCoord=s.mapCoord.toArray(!0),T.uniforms.uClampFrame=s.uClampFrame,T.uniforms.uClampOffset=s.uClampOffset),T.uniforms.uTransform=u.toArray(!0),T.uniforms.uColor=m.utils.premultiplyTintToRgba(_.tint,_.worldAlpha,T.uniforms.uColor,i.premultipliedAlpha),T.uniforms.translationMatrix=_.transform.worldTransform.toArray(!0),T.uniforms.uSampler=t.bindTexture(b),t.setBlendMode(m.utils.correctBlendMode(_.blendMode,i.premultipliedAlpha)),e.vao.draw(this.renderer.gl.TRIANGLES,6,0)},t}(m.ObjectRenderer);e.default=i,m.WebGLRenderer.registerPlugin("tilingSprite",i)},{"../../core":65,"../../core/const":46,path:8}],143:[function(l,t,e){"use strict";function d(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function n(r,t){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:r}function r(r,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(r,t):r.__proto__=t)}e.__esModule=!0;var o=function(){function a(a,t){for(var e=0,o;e<t.length;e++)o=t[e],o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(a,o.key,o)}return function(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t}}(),i=l("../../core"),a=function(n){if(n&&n.__esModule)return n;var t={};if(null!=n)for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t.default=n,t}(i),s=(l("path"),function(a){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;d(this,t);var r=n(this,a.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n"));return r.alpha=e,r.glShaderKey="alpha",r}return r(t,a),o(t,[{key:"alpha",get:function(){return this.uniforms.uAlpha},set:function(e){this.uniforms.uAlpha=e}}]),t}(a.Filter));e.default=s},{"../../core":65,path:8}],144:[function(g,t,e){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function m(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function i(r,t){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:r}function n(r,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(r,t):r.__proto__=t)}e.__esModule=!0;var o=function(){function a(a,t){for(var e=0,o;e<t.length;e++)o=t[e],o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(a,o.key,o)}return function(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t}}(),a=g("../../core"),_=function(n){if(n&&n.__esModule)return n;var t={};if(null!=n)for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t.default=n,t}(a),s=g("./BlurXFilter"),l=r(s),u=g("./BlurYFilter"),d=r(u),c=function(p){function t(e,r,n,o){m(this,t);var a=i(this,p.call(this));return a.blurXFilter=new l.default(e,r,n,o),a.blurYFilter=new d.default(e,r,n,o),a.padding=0,a.resolution=n||_.settings.RESOLUTION,a.quality=r||4,a.blur=e||8,a}return n(t,p),t.prototype.apply=function(a,t,e){var r=a.getRenderTarget(!0);this.blurXFilter.apply(a,t,r,!0),this.blurYFilter.apply(a,r,e,!1),a.returnRenderTarget(r)},o(t,[{key:"blur",get:function(){return this.blurXFilter.blur},set:function(e){this.blurXFilter.blur=this.blurYFilter.blur=e,this.padding=2*te(ee(this.blurXFilter.strength),ee(this.blurYFilter.strength))}},{key:"quality",get:function(){return this.blurXFilter.quality},set:function(e){this.blurXFilter.quality=this.blurYFilter.quality=e}},{key:"blurX",get:function(){return this.blurXFilter.blur},set:function(e){this.blurXFilter.blur=e,this.padding=2*te(ee(this.blurXFilter.strength),ee(this.blurYFilter.strength))}},{key:"blurY",get:function(){return this.blurYFilter.blur},set:function(e){this.blurYFilter.blur=e,this.padding=2*te(ee(this.blurXFilter.strength),ee(this.blurYFilter.strength))}},{key:"blendMode",get:function(){return this.blurYFilter._blendMode},set:function(e){this.blurYFilter._blendMode=e}}]),t}(_.Filter);e.default=c},{"../../core":65,"./BlurXFilter":145,"./BlurYFilter":146}],145:[function(m,t,e){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function _(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function i(r,t){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:r}function n(r,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(r,t):r.__proto__=t)}e.__esModule=!0;var o=function(){function a(a,t){for(var e=0,o;e<t.length;e++)o=t[e],o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(a,o.key,o)}return function(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t}}(),a=m("../../core"),b=function(n){if(n&&n.__esModule)return n;var t={};if(null!=n)for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t.default=n,t}(a),s=m("./generateBlurVertSource"),T=r(s),l=m("./generateBlurFragSource"),c=r(l),d=m("./getMaxBlurKernelSize"),u=r(d),p=function(p){function t(e,r,n,o){_(this,t),o=o||5;var s=(0,T.default)(o,!0),u=(0,c.default)(o),l=i(this,p.call(this,s,u));return l.resolution=n||b.settings.RESOLUTION,l._quality=0,l.quality=r||4,l.strength=e||8,l.firstRun=!0,l}return n(t,p),t.prototype.apply=function(d,t,e,r){if(this.firstRun){var n=d.renderer.gl,i=(0,u.default)(n);this.vertexSrc=(0,T.default)(i,!0),this.fragmentSrc=(0,c.default)(i),this.firstRun=!1}if(this.uniforms.strength=1/e.size.width*(e.size.width/t.size.width),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)d.applyFilter(this,t,e,r);else{for(var o=d.getRenderTarget(!0),s=t,p=o,f=0;f<this.passes-1;f++){d.applyFilter(this,s,p,!0);var g=p;p=s,s=g}d.applyFilter(this,s,e,r),d.returnRenderTarget(o)}},o(t,[{key:"blur",get:function(){return this.strength},set:function(e){this.padding=2*ee(e),this.strength=e}},{key:"quality",get:function(){return this._quality},set:function(e){this._quality=e,this.passes=e}}]),t}(b.Filter);e.default=p},{"../../core":65,"./generateBlurFragSource":147,"./generateBlurVertSource":148,"./getMaxBlurKernelSize":149}],146:[function(m,t,e){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function _(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function i(r,t){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:r}function n(r,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(r,t):r.__proto__=t)}e.__esModule=!0;var o=function(){function a(a,t){for(var e=0,o;e<t.length;e++)o=t[e],o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(a,o.key,o)}return function(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t}}(),a=m("../../core"),b=function(n){if(n&&n.__esModule)return n;var t={};if(null!=n)for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t.default=n,t}(a),s=m("./generateBlurVertSource"),T=r(s),l=m("./generateBlurFragSource"),c=r(l),d=m("./getMaxBlurKernelSize"),u=r(d),p=function(p){function t(e,r,n,o){_(this,t),o=o||5;var s=(0,T.default)(o,!1),u=(0,c.default)(o),l=i(this,p.call(this,s,u));return l.resolution=n||b.settings.RESOLUTION,l._quality=0,l.quality=r||4,l.strength=e||8,l.firstRun=!0,l}return n(t,p),t.prototype.apply=function(d,t,e,r){if(this.firstRun){var n=d.renderer.gl,i=(0,u.default)(n);this.vertexSrc=(0,T.default)(i,!1),this.fragmentSrc=(0,c.default)(i),this.firstRun=!1}if(this.uniforms.strength=1/e.size.height*(e.size.height/t.size.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)d.applyFilter(this,t,e,r);else{for(var o=d.getRenderTarget(!0),s=t,p=o,f=0;f<this.passes-1;f++){d.applyFilter(this,s,p,!0);var g=p;p=s,s=g}d.applyFilter(this,s,e,r),d.returnRenderTarget(o)}},o(t,[{key:"blur",get:function(){return this.strength},set:function(e){this.padding=2*ee(e),this.strength=e}},{key:"quality",get:function(){return this._quality},set:function(e){this._quality=e,this.passes=e}}]),t}(b.Filter);e.default=p},{"../../core":65,"./generateBlurFragSource":147,"./generateBlurVertSource":148,"./getMaxBlurKernelSize":149}],147:[function(a,t,e){"use strict";function r(a){for(var t=n[a],e=t.length,r=i,o="",d=void 0,p=0,c;p<a;p++)c="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;".replace("%index%",p),d=p,p>=e&&(d=a-p-1),c=c.replace("%value%",t[d]),o+=c,o+="\n";return r=r.replace("%blur%",o),r=r.replace("%size%",a)}e.__esModule=!0,e.default=r;var n={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},i="varying vec2 vBlurTexCoords[%size%];\nuniform sampler2D uSampler;\nvoid main(void)\n{\n    gl_FragColor = vec4(0.0);\n    %blur%\n}"},{}],148:[function(a,t,e){"use strict";function r(i,t){var e=C(i/2),r=l,d="",p;p=t?"vBlurTexCoords[%index%] = aTextureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] = aTextureCoord + vec2(0.0, %sampleIndex% * strength);";for(var c=0,f;c<i;c++)f=p.replace("%index%",c),f=f.replace("%sampleIndex%",c-(e-1)+".0"),d+=f,d+="\n";return r=r.replace("%blur%",d),r=r.replace("%size%",i)}e.__esModule=!0,e.default=r;var l="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nuniform float strength;\nuniform mat3 projectionMatrix;\nvarying vec2 vBlurTexCoords[%size%];\nvoid main(void)\n{\ngl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);\n%blur%\n}"},{}],149:[function(n,t,e){"use strict";e.__esModule=!0,e.default=function(n){for(var t=n.getParameter(n.MAX_VARYING_VECTORS),e=15;e>t;)e-=2;return e}},{}],150:[function(l,t,e){"use strict";function d(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function n(r,t){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:r}function r(r,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(r,t):r.__proto__=t)}e.__esModule=!0;var o=function(){function a(a,t){for(var e=0,o;e<t.length;e++)o=t[e],o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(a,o.key,o)}return function(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t}}(),i=l("../../core"),a=function(n){if(n&&n.__esModule)return n;var t={};if(null!=n)for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t.default=n,t}(i),s=(l("path"),function(a){function t(){d(this,t);var e=n(this,a.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n"));return e.uniforms.m=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],e.alpha=1,e}return r(t,a),t.prototype._loadMatrix=function(n){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],e=n;t&&(this._multiply(e,this.uniforms.m,n),e=this._colorMatrix(e)),this.uniforms.m=e},t.prototype._multiply=function(n,t,e){return n[0]=t[0]*e[0]+t[1]*e[5]+t[2]*e[10]+t[3]*e[15],n[1]=t[0]*e[1]+t[1]*e[6]+t[2]*e[11]+t[3]*e[16],n[2]=t[0]*e[2]+t[1]*e[7]+t[2]*e[12]+t[3]*e[17],n[3]=t[0]*e[3]+t[1]*e[8]+t[2]*e[13]+t[3]*e[18],n[4]=t[0]*e[4]+t[1]*e[9]+t[2]*e[14]+t[3]*e[19]+t[4],n[5]=t[5]*e[0]+t[6]*e[5]+t[7]*e[10]+t[8]*e[15],n[6]=t[5]*e[1]+t[6]*e[6]+t[7]*e[11]+t[8]*e[16],n[7]=t[5]*e[2]+t[6]*e[7]+t[7]*e[12]+t[8]*e[17],n[8]=t[5]*e[3]+t[6]*e[8]+t[7]*e[13]+t[8]*e[18],n[9]=t[5]*e[4]+t[6]*e[9]+t[7]*e[14]+t[8]*e[19]+t[9],n[10]=t[10]*e[0]+t[11]*e[5]+t[12]*e[10]+t[13]*e[15],n[11]=t[10]*e[1]+t[11]*e[6]+t[12]*e[11]+t[13]*e[16],n[12]=t[10]*e[2]+t[11]*e[7]+t[12]*e[12]+t[13]*e[17],n[13]=t[10]*e[3]+t[11]*e[8]+t[12]*e[13]+t[13]*e[18],n[14]=t[10]*e[4]+t[11]*e[9]+t[12]*e[14]+t[13]*e[19]+t[14],n[15]=t[15]*e[0]+t[16]*e[5]+t[17]*e[10]+t[18]*e[15],n[16]=t[15]*e[1]+t[16]*e[6]+t[17]*e[11]+t[18]*e[16],n[17]=t[15]*e[2]+t[16]*e[7]+t[17]*e[12]+t[18]*e[17],n[18]=t[15]*e[3]+t[16]*e[8]+t[17]*e[13]+t[18]*e[18],n[19]=t[15]*e[4]+t[16]*e[9]+t[17]*e[14]+t[18]*e[19]+t[19],n},t.prototype._colorMatrix=function(r){var t=new Float32Array(r);return t[4]/=255,t[9]/=255,t[14]/=255,t[19]/=255,t},t.prototype.brightness=function(r,t){this._loadMatrix([r,0,0,0,0,0,r,0,0,0,0,0,r,0,0,0,0,0,1,0],t)},t.prototype.greyscale=function(r,t){this._loadMatrix([r,r,r,0,0,r,r,r,0,0,r,r,r,0,0,0,0,0,1,0],t)},t.prototype.blackAndWhite=function(e){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],e)},t.prototype.hue=function(a,i){a=(a||0)/180*Z;var e=K(a),r=q(a),n=1/3,o=z(n);this._loadMatrix([e+(1-e)*n,n*(1-e)-o*r,n*(1-e)+o*r,0,0,n*(1-e)+o*r,e+n*(1-e),n*(1-e)-o*r,0,0,n*(1-e)-o*r,n*(1-e)+o*r,e+n*(1-e),0,0,0,0,0,1,0],i)},t.prototype.contrast=function(a,t){var e=(a||0)+1,r=-.5*(e-1);this._loadMatrix([e,0,0,0,r,0,e,0,0,r,0,0,e,0,r,0,0,0,1,0],t)},t.prototype.saturate=function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=arguments[1],e=2*a/3+1,r=-.5*(e-1);this._loadMatrix([e,r,r,0,0,r,e,r,0,0,r,r,e,0,0,0,0,0,1,0],t)},t.prototype.desaturate=function(){this.saturate(-1)},t.prototype.negative=function(e){this._loadMatrix([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],e)},t.prototype.sepia=function(e){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],e)},t.prototype.technicolor=function(e){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],e)},t.prototype.polaroid=function(e){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],e)},t.prototype.toBGR=function(e){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],e)},t.prototype.kodachrome=function(e){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],e)},t.prototype.browni=function(e){this._loadMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],e)},t.prototype.vintage=function(e){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],e)},t.prototype.colorTone=function(d,p,f,g,m){d=d||.2,p=p||.15,f=f||16770432,g=g||3375104;var i=(255&f>>16)/255,o=(255&f>>8)/255,s=(255&f)/255,a=(255&g>>16)/255,u=(255&g>>8)/255,_=(255&g)/255,l=[.3,.59,.11,0,0,i,o,s,d,0,a,u,_,p,0,i-a,o-u,s-_,0,0];this._loadMatrix(l,m)},t.prototype.night=function(n,a){n=n||.1;var e=[-2*n,-n,0,0,0,-n,0,n,0,0,0,n,2*n,0,0,0,0,0,1,0];this._loadMatrix(e,a)},t.prototype.predator=function(r,t){this._loadMatrix([11.224130630493164*r,-4.794486999511719*r,-2.8746118545532227*r,0*r,.40342438220977783*r,-3.6330697536468506*r,9.193157196044922*r,-2.951810836791992*r,0*r,-1.316135048866272*r,-3.2184197902679443*r,-4.2375030517578125*r,7.476448059082031*r,0*r,.8044459223747253*r,0,0,0,1,0],t)},t.prototype.lsd=function(e){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],e)},t.prototype.reset=function(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)},o(t,[{key:"matrix",get:function(){return this.uniforms.m},set:function(e){this.uniforms.m=e}},{key:"alpha",get:function(){return this.uniforms.uAlpha},set:function(e){this.uniforms.uAlpha=e}}]),t}(a.Filter));e.default=s,s.prototype.grayscale=s.prototype.greyscale},{"../../core":65,path:8}],151:[function(l,t,e){"use strict";function d(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function n(r,t){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:r}function r(r,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(r,t):r.__proto__=t)}e.__esModule=!0;var o=function(){function a(a,t){for(var e=0,o;e<t.length;e++)o=t[e],o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(a,o.key,o)}return function(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t}}(),i=l("../../core"),p=function(n){if(n&&n.__esModule)return n;var t={};if(null!=n)for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t.default=n,t}(i),a=(l("path"),function(i){function t(e,r){d(this,t);var l=new p.Matrix;e.renderable=!1;var s=n(this,i.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nvoid main(void)\n{\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n   vTextureCoord = aTextureCoord;\n}","varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\n\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\n\nvoid main(void)\n{\n  vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n  map -= 0.5;\n  map.xy *= scale / filterArea.xy;\n\n  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), filterClamp.xy, filterClamp.zw));\n}\n"));return s.maskSprite=e,s.maskMatrix=l,s.uniforms.mapSampler=e._texture,s.uniforms.filterMatrix=l,s.uniforms.scale={x:1,y:1},null!==r&&void 0!==r||(r=20),s.scale=new p.Point(r,r),s}return r(t,i),t.prototype.apply=function(n,t,e){this.uniforms.filterMatrix=n.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y,n.applyFilter(this,t,e)},o(t,[{key:"map",get:function(){return this.uniforms.mapSampler},set:function(e){this.uniforms.mapSampler=e}}]),t}(p.Filter));e.default=a},{"../../core":65,path:8}],152:[function(l,t,e){"use strict";function r(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function n(r,t){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:r}function i(r,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(r,t):r.__proto__=t)}e.__esModule=!0;var o=l("../../core"),s=function(n){if(n&&n.__esModule)return n;var t={};if(null!=n)for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t.default=n,t}(o),a=(l("path"),function(a){function t(){return r(this,t),n(this,a.call(this,"\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nuniform vec4 filterArea;\n\nvarying vec2 vTextureCoord;\n\nvec2 mapCoord( vec2 coord )\n{\n    coord *= filterArea.xy;\n    coord += filterArea.zw;\n\n    return coord;\n}\n\nvec2 unmapCoord( vec2 coord )\n{\n    coord -= filterArea.zw;\n    coord /= filterArea.xy;\n\n    return coord;\n}\n\nvoid texcoords(vec2 fragCoord, vec2 resolution,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    vec2 inverseVP = 1.0 / resolution.xy;\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n   vTextureCoord = aTextureCoord;\n\n   vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n   texcoords(fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}","varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it's\n unsupported by WebGL.\n \n --\n \n From:\n https://github.com/mitsuhiko/webgl-meincraft\n \n Copyright (c) 2011 by Armin Ronacher.\n \n Some rights reserved.\n \n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n \n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n \n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n \n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n \n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 resolution,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    mediump vec2 inverseVP = vec2(1.0 / resolution.x, 1.0 / resolution.y);\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n    \n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n    \n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n    \n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n    \n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n    \n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n      vec4 color;\n\n    color = fxaa(uSampler, fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n"))}return i(t,a),t}(s.Filter));e.default=a},{"../../core":65,path:8}],153:[function(d,t,e){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}e.__esModule=!0;var n=d("./fxaa/FXAAFilter");Object.defineProperty(e,"FXAAFilter",{enumerable:!0,get:function(){return r(n).default}});var i=d("./noise/NoiseFilter");Object.defineProperty(e,"NoiseFilter",{enumerable:!0,get:function(){return r(i).default}});var o=d("./displacement/DisplacementFilter");Object.defineProperty(e,"DisplacementFilter",{enumerable:!0,get:function(){return r(o).default}});var s=d("./blur/BlurFilter");Object.defineProperty(e,"BlurFilter",{enumerable:!0,get:function(){return r(s).default}});var a=d("./blur/BlurXFilter");Object.defineProperty(e,"BlurXFilter",{enumerable:!0,get:function(){return r(a).default}});var u=d("./blur/BlurYFilter");Object.defineProperty(e,"BlurYFilter",{enumerable:!0,get:function(){return r(u).default}});var p=d("./colormatrix/ColorMatrixFilter");Object.defineProperty(e,"ColorMatrixFilter",{enumerable:!0,get:function(){return r(p).default}});var l=d("./alpha/AlphaFilter");Object.defineProperty(e,"AlphaFilter",{enumerable:!0,get:function(){return r(l).default}})},{"./alpha/AlphaFilter":143,"./blur/BlurFilter":144,"./blur/BlurXFilter":145,"./blur/BlurYFilter":146,"./colormatrix/ColorMatrixFilter":150,"./displacement/DisplacementFilter":151,"./fxaa/FXAAFilter":152,"./noise/NoiseFilter":154}],154:[function(l,t,e){"use strict";function d(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function n(r,t){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:r}function r(r,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(r,t):r.__proto__=t)}e.__esModule=!0;var o=function(){function a(a,t){for(var e=0,o;e<t.length;e++)o=t[e],o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(a,o.key,o)}return function(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t}}(),i=l("../../core"),a=function(n){if(n&&n.__esModule)return n;var t={};if(null!=n)for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t.default=n,t}(i),s=(l("path"),function(a){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:.5,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Math.random();d(this,t);var o=n(this,a.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n"));return o.noise=e,o.seed=r,o}return r(t,a),o(t,[{key:"noise",get:function(){return this.uniforms.uNoise},set:function(e){this.uniforms.uNoise=e}},{key:"seed",get:function(){return this.uniforms.uSeed},set:function(e){this.uniforms.uSeed=e}}]),t}(a.Filter));e.default=s},{"../../core":65,path:8}],155:[function(l,t,d){"use strict";function r(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}d.__esModule=!0;var n=function(){function a(a,t){for(var e=0,o;e<t.length;e++)o=t[e],o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(a,o.key,o)}return function(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t}}(),i=l("../core"),o=function(n){if(n&&n.__esModule)return n;var t={};if(null!=n)for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t.default=n,t}(i),s=function(){function a(){r(this,a),this.global=new o.Point,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return a.prototype.getLocalPosition=function(n,t,e){return n.worldTransform.applyInverse(e||this.global,t)},a.prototype.copyEvent=function(r){r.isPrimary&&(this.isPrimary=!0),this.button=r.button,this.buttons=e(r.buttons)?r.buttons:r.which,this.width=r.width,this.height=r.height,this.tiltX=r.tiltX,this.tiltY=r.tiltY,this.pointerType=r.pointerType,this.pressure=r.pressure,this.rotationAngle=r.rotationAngle,this.twist=r.twist||0,this.tangentialPressure=r.tangentialPressure||0},a.prototype.reset=function(){this.isPrimary=!1},n(a,[{key:"pointerId",get:function(){return this.identifier}}]),a}();d.default=s},{"../core":65}],156:[function(a,t,e){"use strict";function r(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var n=function(){function e(){r(this,e),this.stopped=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return e.prototype.stopPropagation=function(){this.stopped=!0},e.prototype.reset=function(){this.stopped=!1,this.currentTarget=null,this.target=null},e}();e.default=n},{}],157:[function(b,t,e){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function S(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function i(r,t){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:r}function n(r,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(r,t):r.__proto__=t)}e.__esModule=!0;var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=b("../core"),u=function(n){if(n&&n.__esModule)return n;var t={};if(null!=n)for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t.default=n,t}(a),s=b("./InteractionData"),l=r(s),c=b("./InteractionEvent"),d=r(c),f=b("./InteractionTrackingData"),p=r(f),v=b("eventemitter3"),g=r(v),E=b("./interactiveTarget"),m=r(E);u.utils.mixins.delayMixin(u.DisplayObject.prototype,m.default);var _={target:null,data:{global:null}},C=function(a){function t(e,r){S(this,t);var o=i(this,a.call(this));return r=r||{},o.renderer=e,o.autoPreventDefault=void 0===r.autoPreventDefault||r.autoPreventDefault,o.interactionFrequency=r.interactionFrequency||10,o.mouse=new l.default,o.mouse.identifier=1,o.mouse.global.set(-999999),o.activeInteractionData={},o.activeInteractionData[1]=o.mouse,o.interactionDataPool=[],o.eventData=new d.default,o.interactionDOMElement=null,o.moveWhenInside=!1,o.eventsAdded=!1,o.mouseOverRenderer=!1,o.supportsTouchEvents="ontouchstart"in window,o.supportsPointerEvents=!!window.PointerEvent,o.onPointerUp=o.onPointerUp.bind(o),o.processPointerUp=o.processPointerUp.bind(o),o.onPointerCancel=o.onPointerCancel.bind(o),o.processPointerCancel=o.processPointerCancel.bind(o),o.onPointerDown=o.onPointerDown.bind(o),o.processPointerDown=o.processPointerDown.bind(o),o.onPointerMove=o.onPointerMove.bind(o),o.processPointerMove=o.processPointerMove.bind(o),o.onPointerOut=o.onPointerOut.bind(o),o.processPointerOverOut=o.processPointerOverOut.bind(o),o.onPointerOver=o.onPointerOver.bind(o),o.cursorStyles={default:"inherit",pointer:"pointer"},o.currentCursorMode=null,o.cursor=null,o._tempPoint=new u.Point,o.resolution=1,o.setTargetElement(o.renderer.view,o.renderer.resolution),o}return n(t,a),t.prototype.hitTest=function(r,t){return _.target=null,_.data.global=r,t||(t=this.renderer._lastObjectRendered),this.processInteractive(_,t,null,!0),_.target},t.prototype.setTargetElement=function(r){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;this.removeEvents(),this.interactionDOMElement=r,this.resolution=t,this.addEvents()},t.prototype.addEvents=function(){this.interactionDOMElement&&(u.ticker.shared.add(this.update,this,u.UPDATE_PRIORITY.INTERACTION),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="none",this.interactionDOMElement.style["-ms-touch-action"]="none"):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]="none"),this.supportsPointerEvents?(window.document.addEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,!0),window.addEventListener("pointercancel",this.onPointerCancel,!0),window.addEventListener("pointerup",this.onPointerUp,!0)):(window.document.addEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,!0),window.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,!0)),this.eventsAdded=!0)},t.prototype.removeEvents=function(){this.interactionDOMElement&&(u.ticker.shared.remove(this.update,this),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]=""):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]=""),this.supportsPointerEvents?(window.document.removeEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,!0),window.removeEventListener("pointercancel",this.onPointerCancel,!0),window.removeEventListener("pointerup",this.onPointerUp,!0)):(window.document.removeEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,!0),window.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.interactionDOMElement=null,this.eventsAdded=!1)},t.prototype.update=function(a){if(this._deltaTime+=a,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.interactionDOMElement)){if(this.didMove)return void(this.didMove=!1);for(var t in this.cursor=null,this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(t)){var e=this.activeInteractionData[t];if(e.originalEvent&&"touch"!==e.pointerType){var r=this.configureInteractionEventForDOMEvent(this.eventData,e.originalEvent,e);this.processInteractive(r,this.renderer._lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},t.prototype.setCursorMode=function(r){if(r=r||"default",this.currentCursorMode!==r){this.currentCursorMode=r;var n=this.cursorStyles[r];if(n)switch(void 0===n?"undefined":o(n)){case"string":this.interactionDOMElement.style.cursor=n;break;case"function":n(r);break;case"object":Object.assign(this.interactionDOMElement.style,n);}else"string"!=typeof r||Object.prototype.hasOwnProperty.call(this.cursorStyles,r)||(this.interactionDOMElement.style.cursor=r)}},t.prototype.dispatchEvent=function(n,t,e){e.stopped||(e.currentTarget=n,e.type=t,n.emit(t,e),n[t]&&n[t](e))},t.prototype.mapPositionToPoint=function(a,t,e){var r=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:0,height:0};var n=navigator.isCocoonJS?this.resolution:1/this.resolution;a.x=(t-r.left)*(this.interactionDOMElement.width/r.width)*n,a.y=(e-r.top)*(this.interactionDOMElement.height/r.height)*n},t.prototype.processInteractive=function(p,t,e,r,f){if(!t||!t.visible)return!1;var g=p.data.global;f=t.interactive||f;var o=!1,m=f,_=!0;if(t.hitArea?(r&&(t.worldTransform.applyInverse(g,this._tempPoint),t.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?o=!0:(r=!1,_=!1)),m=!1):t._mask&&r&&(t._mask.containsPoint(g)||(r=!1,_=!1)),_&&t.interactiveChildren&&t.children)for(var b=t.children,T=b.length-1;0<=T;T--){var v=b[T],c=this.processInteractive(p,v,e,r,m);if(c){if(!v.parent)continue;m=!1,c&&(p.target&&(r=!1),o=!0)}}return f&&(r&&!p.target&&!t.hitArea&&t.containsPoint&&t.containsPoint(g)&&(o=!0),t.interactive&&(o&&!p.target&&(p.target=t),e&&e(p,t,!!o))),o},t.prototype.onPointerDown=function(l){if(!this.supportsTouchEvents||"touch"!==l.pointerType){var t=this.normalizeToPointerData(l);this.autoPreventDefault&&t[0].isNormalized&&l.preventDefault();for(var e=t.length,r=0;r<e;r++){var d=t[r],i=this.getInteractionDataForPointerId(d),o=this.configureInteractionEventForDOMEvent(this.eventData,d,i);if(o.data.originalEvent=l,this.processInteractive(o,this.renderer._lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",o),"touch"===d.pointerType)this.emit("touchstart",o);else if("mouse"===d.pointerType||"pen"===d.pointerType){var s=2===d.button;this.emit(s?"rightdown":"mousedown",this.eventData)}}}},t.prototype.processPointerDown=function(a,t,e){var r=a.data,n=a.data.identifier;if(e)if(t.trackedPointers[n]||(t.trackedPointers[n]=new p.default(n)),this.dispatchEvent(t,"pointerdown",a),"touch"===r.pointerType)this.dispatchEvent(t,"touchstart",a);else if("mouse"===r.pointerType||"pen"===r.pointerType){var i=2===r.button;i?t.trackedPointers[n].rightDown=!0:t.trackedPointers[n].leftDown=!0,this.dispatchEvent(t,i?"rightdown":"mousedown",a)}},t.prototype.onPointerComplete=function(d,t,e){for(var r=this.normalizeToPointerData(d),n=r.length,i=d.target===this.interactionDOMElement?"":"outside",o=0;o<n;o++){var p=r[o],a=this.getInteractionDataForPointerId(p),u=this.configureInteractionEventForDOMEvent(this.eventData,p,a);if(u.data.originalEvent=d,this.processInteractive(u,this.renderer._lastObjectRendered,e,t||!i),this.emit(t?"pointercancel":"pointerup"+i,u),"mouse"===p.pointerType||"pen"===p.pointerType){var c=2===p.button;this.emit(c?"rightup"+i:"mouseup"+i,u)}else"touch"===p.pointerType&&(this.emit(t?"touchcancel":"touchend"+i,u),this.releaseInteractionDataForPointerId(p.pointerId,a))}},t.prototype.onPointerCancel=function(e){this.supportsTouchEvents&&"touch"===e.pointerType||this.onPointerComplete(e,!0,this.processPointerCancel)},t.prototype.processPointerCancel=function(a,t){var e=a.data,r=a.data.identifier;void 0!==t.trackedPointers[r]&&(delete t.trackedPointers[r],this.dispatchEvent(t,"pointercancel",a),"touch"===e.pointerType&&this.dispatchEvent(t,"touchcancel",a))},t.prototype.onPointerUp=function(e){this.supportsTouchEvents&&"touch"===e.pointerType||this.onPointerComplete(e,!1,this.processPointerUp)},t.prototype.processPointerUp=function(f,t,e){var r=f.data,n=f.data.identifier,i=t.trackedPointers[n],o="touch"===r.pointerType,s="mouse"===r.pointerType||"pen"===r.pointerType,a=!1;if(s){var g=2===r.button,m=p.default.FLAGS,l=g?m.RIGHT_DOWN:m.LEFT_DOWN,c=void 0!==i&&i.flags&l;e?(this.dispatchEvent(t,g?"rightup":"mouseup",f),c&&(this.dispatchEvent(t,g?"rightclick":"click",f),a=!0)):c&&this.dispatchEvent(t,g?"rightupoutside":"mouseupoutside",f),i&&(g?i.rightDown=!1:i.leftDown=!1)}e?(this.dispatchEvent(t,"pointerup",f),o&&this.dispatchEvent(t,"touchend",f),i&&(s&&!a||this.dispatchEvent(t,"pointertap",f),o&&(this.dispatchEvent(t,"tap",f),i.over=!1))):i&&(this.dispatchEvent(t,"pointerupoutside",f),o&&this.dispatchEvent(t,"touchendoutside",f)),i&&i.none&&delete t.trackedPointers[n]},t.prototype.onPointerMove=function(l){if(!this.supportsTouchEvents||"touch"!==l.pointerType){var t=this.normalizeToPointerData(l);"mouse"!==t[0].pointerType&&"pen"!==t[0].pointerType||(this.didMove=!0,this.cursor=null);for(var e=t.length,r=0;r<e;r++){var d=t[r],i=this.getInteractionDataForPointerId(d),o=this.configureInteractionEventForDOMEvent(this.eventData,d,i);o.data.originalEvent=l;var s="touch"!==d.pointerType||this.moveWhenInside;this.processInteractive(o,this.renderer._lastObjectRendered,this.processPointerMove,s),this.emit("pointermove",o),"touch"===d.pointerType&&this.emit("touchmove",o),"mouse"!==d.pointerType&&"pen"!==d.pointerType||this.emit("mousemove",o)}"mouse"===t[0].pointerType&&this.setCursorMode(this.cursor)}},t.prototype.processPointerMove=function(a,t,e){var r=a.data,n="touch"===r.pointerType,i="mouse"===r.pointerType||"pen"===r.pointerType;i&&this.processPointerOverOut(a,t,e),this.moveWhenInside&&!e||(this.dispatchEvent(t,"pointermove",a),n&&this.dispatchEvent(t,"touchmove",a),i&&this.dispatchEvent(t,"mousemove",a))},t.prototype.onPointerOut=function(a){if(!this.supportsTouchEvents||"touch"!==a.pointerType){var t=this.normalizeToPointerData(a),e=t[0];"mouse"===e.pointerType&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var r=this.getInteractionDataForPointerId(e),n=this.configureInteractionEventForDOMEvent(this.eventData,e,r);n.data.originalEvent=e,this.processInteractive(n,this.renderer._lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",n),"mouse"===e.pointerType||"pen"===e.pointerType?this.emit("mouseout",n):this.releaseInteractionDataForPointerId(r.identifier)}},t.prototype.processPointerOverOut=function(a,t,e){var r=a.data,n=a.data.identifier,i="mouse"===r.pointerType||"pen"===r.pointerType,o=t.trackedPointers[n];e&&!o&&(o=t.trackedPointers[n]=new p.default(n)),void 0!==o&&(e&&this.mouseOverRenderer?(o.over||(o.over=!0,this.dispatchEvent(t,"pointerover",a),i&&this.dispatchEvent(t,"mouseover",a)),i&&null===this.cursor&&(this.cursor=t.cursor)):o.over&&(o.over=!1,this.dispatchEvent(t,"pointerout",this.eventData),i&&this.dispatchEvent(t,"mouseout",a),o.none&&delete t.trackedPointers[n]))},t.prototype.onPointerOver=function(a){var t=this.normalizeToPointerData(a),e=t[0],r=this.getInteractionDataForPointerId(e),n=this.configureInteractionEventForDOMEvent(this.eventData,e,r);n.data.originalEvent=e,"mouse"===e.pointerType&&(this.mouseOverRenderer=!0),this.emit("pointerover",n),"mouse"!==e.pointerType&&"pen"!==e.pointerType||this.emit("mouseover",n)},t.prototype.getInteractionDataForPointerId=function(n){var t=n.pointerId,e;return t===1||"mouse"===n.pointerType?e=this.mouse:this.activeInteractionData[t]?e=this.activeInteractionData[t]:(e=this.interactionDataPool.pop()||new l.default,e.identifier=t,this.activeInteractionData[t]=e),e.copyEvent(n),e},t.prototype.releaseInteractionDataForPointerId=function(r){var t=this.activeInteractionData[r];t&&(delete this.activeInteractionData[r],t.reset(),this.interactionDataPool.push(t))},t.prototype.configureInteractionEventForDOMEvent=function(n,t,e){return n.data=e,this.mapPositionToPoint(e.global,t.clientX,t.clientY),navigator.isCocoonJS&&"touch"===t.pointerType&&(e.global.x/=this.resolution,e.global.y/=this.resolution),"touch"===t.pointerType&&(t.globalX=e.global.x,t.globalY=e.global.y),e.originalEvent=t,n.reset(),n},t.prototype.normalizeToPointerData=function(a){var t=[];if(this.supportsTouchEvents&&a instanceof TouchEvent)for(var e=0,o=a.changedTouches.length,n;e<o;e++)n=a.changedTouches[e],void 0===n.button&&(n.button=a.touches.length?1:0),void 0===n.buttons&&(n.buttons=a.touches.length?1:0),void 0===n.isPrimary&&(n.isPrimary=1===a.touches.length&&"touchstart"===a.type),void 0===n.width&&(n.width=n.radiusX||1),void 0===n.height&&(n.height=n.radiusY||1),void 0===n.tiltX&&(n.tiltX=0),void 0===n.tiltY&&(n.tiltY=0),void 0===n.pointerType&&(n.pointerType="touch"),void 0===n.pointerId&&(n.pointerId=n.identifier||0),void 0===n.pressure&&(n.pressure=n.force||.5),void 0===n.twist&&(n.twist=0),void 0===n.tangentialPressure&&(n.tangentialPressure=0),void 0===n.layerX&&(n.layerX=n.offsetX=n.clientX),void 0===n.layerY&&(n.layerY=n.offsetY=n.clientY),n.isNormalized=!0,t.push(n);else!(a instanceof MouseEvent)||this.supportsPointerEvents&&a instanceof window.PointerEvent?t.push(a):(void 0===a.isPrimary&&(a.isPrimary=!0),void 0===a.width&&(a.width=1),void 0===a.height&&(a.height=1),void 0===a.tiltX&&(a.tiltX=0),void 0===a.tiltY&&(a.tiltY=0),void 0===a.pointerType&&(a.pointerType="mouse"),void 0===a.pointerId&&(a.pointerId=1),void 0===a.pressure&&(a.pressure=.5),void 0===a.twist&&(a.twist=0),void 0===a.tangentialPressure&&(a.tangentialPressure=0),a.isNormalized=!0,t.push(a));return t},t.prototype.destroy=function(){this.removeEvents(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this._tempPoint=null},t}(g.default);e.default=C,u.WebGLRenderer.registerPlugin("interaction",C),u.CanvasRenderer.registerPlugin("interaction",C)},{"../core":65,"./InteractionData":155,"./InteractionEvent":156,"./InteractionTrackingData":158,"./interactiveTarget":160,eventemitter3:3}],158:[function(a,t,e){"use strict";function r(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var n=function(){function a(a,t){for(var e=0,o;e<t.length;e++)o=t[e],o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(a,o.key,o)}return function(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t}}(),i=function(){function a(t){r(this,a),this._pointerId=t,this._flags=a.FLAGS.NONE}return a.prototype._doSet=function(r,t){this._flags=t?this._flags|r:this._flags&~r},n(a,[{key:"pointerId",get:function(){return this._pointerId}},{key:"flags",get:function(){return this._flags},set:function(e){this._flags=e}},{key:"none",get:function(){return this._flags===this.constructor.FLAGS.NONE}},{key:"over",get:function(){return 0!=(this._flags&this.constructor.FLAGS.OVER)},set:function(e){this._doSet(this.constructor.FLAGS.OVER,e)}},{key:"rightDown",get:function(){return 0!=(this._flags&this.constructor.FLAGS.RIGHT_DOWN)},set:function(e){this._doSet(this.constructor.FLAGS.RIGHT_DOWN,e)}},{key:"leftDown",get:function(){return 0!=(this._flags&this.constructor.FLAGS.LEFT_DOWN)},set:function(e){this._doSet(this.constructor.FLAGS.LEFT_DOWN,e)}}]),a}();e.default=i,i.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4})},{}],159:[function(l,t,e){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}e.__esModule=!0;var n=l("./InteractionData");Object.defineProperty(e,"InteractionData",{enumerable:!0,get:function(){return r(n).default}});var i=l("./InteractionManager");Object.defineProperty(e,"InteractionManager",{enumerable:!0,get:function(){return r(i).default}});var o=l("./interactiveTarget");Object.defineProperty(e,"interactiveTarget",{enumerable:!0,get:function(){return r(o).default}});var s=l("./InteractionTrackingData");Object.defineProperty(e,"InteractionTrackingData",{enumerable:!0,get:function(){return r(s).default}});var a=l("./InteractionEvent");Object.defineProperty(e,"InteractionEvent",{enumerable:!0,get:function(){return r(a).default}})},{"./InteractionData":155,"./InteractionEvent":156,"./InteractionManager":157,"./InteractionTrackingData":158,"./interactiveTarget":160}],160:[function(n,t,e){"use strict";e.__esModule=!0,e.default={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return"pointer"===this.cursor},set buttonMode(e){e?this.cursor="pointer":"pointer"===this.cursor&&(this.cursor=null)},cursor:null,get trackedPointers(){return void 0===this._trackedPointers&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0}},{}],161:[function(l,t,e){"use strict";function d(r,t){r.bitmapFont=i.BitmapText.registerFont(r.data,t)}e.__esModule=!0,e.parse=d,e.default=function(){return function(s,t){if(!s.data||s.type!==o.Resource.TYPE.XML)return void t();if(0===s.data.getElementsByTagName("page").length||0===s.data.getElementsByTagName("info").length||null===s.data.getElementsByTagName("info")[0].getAttribute("face"))return void t();var e=s.isDataUrl?"":n.dirname(s.url);s.isDataUrl&&("."===e&&(e=""),this.baseUrl&&e&&"/"===this.baseUrl.charAt(this.baseUrl.length-1)&&(e+="/")),(e=e.replace(this.baseUrl,""))&&"/"!==e.charAt(e.length-1)&&(e+="/");for(var g=s.data.getElementsByTagName("page"),i={},a=function(e){i[e.metadata.pageFile]=e.texture,Object.keys(i).length===g.length&&(d(s,i),t())},u=0;u<g.length;++u){var m=g[u].getAttribute("file"),l=e+m,c=!1;for(var _ in this.resources){var f=this.resources[_];if(f.url===l){f.metadata.pageFile=m,f.texture?a(f):f.onAfterMiddleware.add(a),c=!0;break}}if(!c){var p={crossOrigin:s.crossOrigin,loadType:o.Resource.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:m},s.metadata.imageMetadata),parentResource:s};this.add(l,p,a)}}}};var r=l("path"),n=function(n){if(n&&n.__esModule)return n;var t={};if(null!=n)for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t.default=n,t}(r),o=l("resource-loader"),i=l("../extras")},{"../extras":141,path:8,"resource-loader":36}],162:[function(p,t,e){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}e.__esModule=!0,e.shared=e.Resource=e.textureParser=e.getResourcePath=e.spritesheetParser=e.parseBitmapFontData=e.bitmapFontParser=e.Loader=void 0;var n=p("./bitmapFontParser");Object.defineProperty(e,"bitmapFontParser",{enumerable:!0,get:function(){return r(n).default}}),Object.defineProperty(e,"parseBitmapFontData",{enumerable:!0,get:function(){return n.parse}});var i=p("./spritesheetParser");Object.defineProperty(e,"spritesheetParser",{enumerable:!0,get:function(){return r(i).default}}),Object.defineProperty(e,"getResourcePath",{enumerable:!0,get:function(){return i.getResourcePath}});var o=p("./textureParser");Object.defineProperty(e,"textureParser",{enumerable:!0,get:function(){return r(o).default}});var s=p("resource-loader");Object.defineProperty(e,"Resource",{enumerable:!0,get:function(){return s.Resource}});var a=p("../core/Application"),u=r(a),g=p("./loader"),l=r(g);e.Loader=l.default;var c=new l.default;c.destroy=function(){},e.shared=c;var d=u.default.prototype;d._loader=null,Object.defineProperty(d,"loader",{get:function(){if(!this._loader){var e=this._options.sharedLoader;this._loader=e?c:new l.default}return this._loader}}),d._parentDestroy=d.destroy,d.destroy=function(r,t){this._loader&&(this._loader.destroy(),this._loader=null),this._parentDestroy(r,t)}},{"../core/Application":43,"./bitmapFontParser":161,"./loader":163,"./spritesheetParser":164,"./textureParser":165,"resource-loader":36}],163:[function(T,t,e){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function S(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function i(r,t){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:r}function n(r,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(r,t):r.__proto__=t)}e.__esModule=!0;var o=T("resource-loader"),a=r(o),s=T("resource-loader/lib/middlewares/parsing/blob"),u=T("eventemitter3"),l=r(u),c=T("./textureParser"),d=r(c),f=T("./spritesheetParser"),p=r(f),v=T("./bitmapFontParser"),g=r(v),E=function(o){function d(e,t){S(this,d);var n=i(this,o.call(this,e,t));l.default.call(n);for(var r=0;r<d._pixiMiddleware.length;++r)n.use(d._pixiMiddleware[r]());return n.onStart.add(function(e){return n.emit("start",e)}),n.onProgress.add(function(r,t){return n.emit("progress",r,t)}),n.onError.add(function(a,t,e){return n.emit("error",a,t,e)}),n.onLoad.add(function(r,t){return n.emit("load",r,t)}),n.onComplete.add(function(r,t){return n.emit("complete",r,t)}),n}return n(d,o),d.addPixiMiddleware=function(e){d._pixiMiddleware.push(e)},d.prototype.destroy=function(){this.removeAllListeners(),this.reset()},d}(a.default);for(var m in e.default=E,l.default.prototype)E.prototype[m]=l.default.prototype[m];E._pixiMiddleware=[s.blobMiddlewareFactory,d.default,p.default,g.default];var _=a.default.Resource;_.setExtensionXhrType("fnt",_.XHR_RESPONSE_TYPE.DOCUMENT)},{"./bitmapFontParser":161,"./spritesheetParser":164,"./textureParser":165,eventemitter3:3,"resource-loader":36,"resource-loader/lib/middlewares/parsing/blob":37}],164:[function(l,t,e){"use strict";function d(r,t){return r.isDataUrl?r.data.meta.image:o.default.resolve(r.url.replace(t,""),r.data.meta.image)}e.__esModule=!0,e.default=function(){return function(a,t){var e=a.name+"_image";if(!a.data||a.type!==n.Resource.TYPE.JSON||!a.data.frames||this.resources[e])return void t();var r={crossOrigin:a.crossOrigin,metadata:a.metadata.imageMetadata,parentResource:a},o=d(a,this.baseUrl);this.add(e,o,r,function(e){if(e.error)return void t(e.error);var r=new i.Spritesheet(e.texture.baseTexture,a.data,a.url);r.parse(function(){a.spritesheet=r,a.textures=r.textures,t()})})}},e.getResourcePath=d;var n=l("resource-loader"),r=l("url"),o=function(e){return e&&e.__esModule?e:{default:e}}(r),i=l("../core")},{"../core":65,"resource-loader":36,url:38}],165:[function(a,t,e){"use strict";e.__esModule=!0,e.default=function(){return function(n,t){n.data&&n.type===r.Resource.TYPE.IMAGE&&(n.texture=i.default.fromLoader(n.data,n.url,n.name)),t()}};var r=a("resource-loader"),n=a("../core/textures/Texture"),i=function(e){return e&&e.__esModule?e:{default:e}}(n)},{"../core/textures/Texture":115,"resource-loader":36}],166:[function(p,t,e){"use strict";function g(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function n(r,t){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:r}function r(r,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(r,t):r.__proto__=t)}e.__esModule=!0;var o=function(){function a(a,t){for(var e=0,o;e<t.length;e++)o=t[e],o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(a,o.key,o)}return function(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t}}(),i=p("../core"),m=function(n){if(n&&n.__esModule)return n;var t={};if(null!=n)for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t.default=n,t}(i),a=p("../core/textures/Texture"),u=function(e){return e&&e.__esModule?e:{default:e}}(a),_=new m.Point,c=new m.Polygon,s=function(i){function t(e,r,o,s,a){g(this,t);var l=n(this,i.call(this));return l._texture=e||u.default.EMPTY,l.uvs=o||new Float32Array([0,0,1,0,1,1,0,1]),l.vertices=r||new Float32Array([0,0,100,0,100,100,0,100]),l.indices=s||new Uint16Array([0,1,3,2]),l.dirty=0,l.indexDirty=0,l.vertexDirty=0,l.autoUpdate=!0,l.blendMode=m.BLEND_MODES.NORMAL,l.canvasPadding=m.settings.MESH_CANVAS_PADDING,l.drawMode=a||t.DRAW_MODES.TRIANGLE_MESH,l.shader=null,l.tintRgb=new Float32Array([1,1,1]),l._glDatas={},l._uvTransform=new m.TextureMatrix(l._texture),l.uploadUvTransform=!1,l.pluginName="mesh",l}return r(t,i),t.prototype._renderWebGL=function(e){this.refresh(),e.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this)},t.prototype._renderCanvas=function(e){this.refresh(),e.plugins[this.pluginName].render(this)},t.prototype._onTextureUpdate=function(){this._uvTransform.texture=this._texture,this.refresh()},t.prototype.multiplyUvs=function(){this.uploadUvTransform||this._uvTransform.multiplyUvs(this.uvs)},t.prototype.refresh=function(e){this.autoUpdate&&this.vertexDirty++,this._uvTransform.update(e)&&this._refresh()},t.prototype._refresh=function(){},t.prototype._calculateBounds=function(){this._bounds.addVertices(this.transform,this.vertices,0,this.vertices.length)},t.prototype.containsPoint=function(e){if(!this.getBounds().contains(e.x,e.y))return!1;this.worldTransform.applyInverse(e,_);for(var d=this.vertices,r=c.points,n=this.indices,i=this.indices.length,o=this.drawMode===t.DRAW_MODES.TRIANGLES?3:1,s=0;s+2<i;s+=o){var p=2*n[s],u=2*n[s+1],f=2*n[s+2];if(r[0]=d[p],r[1]=d[p+1],r[2]=d[u],r[3]=d[u+1],r[4]=d[f],r[5]=d[f+1],c.contains(_.x,_.y))return!0}return!1},t.prototype.destroy=function(t){for(var e in this._glDatas){var r=this._glDatas[e];r.destroy?r.destroy():(r.vertexBuffer&&(r.vertexBuffer.destroy(),r.vertexBuffer=null),r.indexBuffer&&(r.indexBuffer.destroy(),r.indexBuffer=null),r.uvBuffer&&(r.uvBuffer.destroy(),r.uvBuffer=null),r.vao&&(r.vao.destroy(),r.vao=null))}this._glDatas=null,i.prototype.destroy.call(this,t)},o(t,[{key:"texture",get:function(){return this._texture},set:function(e){this._texture!==e&&(this._texture=e,e&&(e.baseTexture.hasLoaded?this._onTextureUpdate():e.once("update",this._onTextureUpdate,this)))}},{key:"tint",get:function(){return m.utils.rgb2hex(this.tintRgb)},set:function(e){this.tintRgb=m.utils.hex2rgb(e,this.tintRgb)}}]),t}(m.Container);e.default=s,s.DRAW_MODES={TRIANGLE_MESH:0,TRIANGLES:1}},{"../core":65,"../core/textures/Texture":115}],167:[function(d,t,e){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function p(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function i(r,t){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:r}function n(r,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(r,t):r.__proto__=t)}e.__esModule=!0;var o=function(){function a(a,t){for(var e=0,o;e<t.length;e++)o=t[e],o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(a,o.key,o)}return function(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t}}(),a=d("./Plane"),s=r(a),u=d("../core/sprites/canvas/CanvasTinter"),T=r(u),l=function(l){function t(e,r,n,o,a){p(this,t);var s=i(this,l.call(this,e,4,4));return s._origWidth=e.orig.width,s._origHeight=e.orig.height,s._width=s._origWidth,s._height=s._origHeight,s._leftWidth=void 0===r?10:r,s._rightWidth=void 0===o?10:o,s._topHeight=void 0===n?10:n,s._bottomHeight=void 0===a?10:a,s._cachedTint=16777215,s._tintedTexture=null,s._canvasUvs=null,s.refresh(!0),s}return n(t,l),t.prototype.updateHorizontalVertices=function(){var n=this.vertices,t=this._topHeight+this._bottomHeight,e=this._height>t?1:this._height/t;n[9]=n[11]=n[13]=n[15]=this._topHeight*e,n[17]=n[19]=n[21]=n[23]=this._height-this._bottomHeight*e,n[25]=n[27]=n[29]=n[31]=this._height},t.prototype.updateVerticalVertices=function(){var n=this.vertices,t=this._leftWidth+this._rightWidth,e=this._width>t?1:this._width/t;n[2]=n[10]=n[18]=n[26]=this._leftWidth*e,n[4]=n[12]=n[20]=n[28]=this._width-this._rightWidth*e,n[6]=n[14]=n[22]=n[30]=this._width},t.prototype._renderCanvas=function(c){var t=c.context,e=this.worldTransform,r=c.resolution,n=16777215!==this.tint,i=this._texture;n&&this._cachedTint!==this.tint&&(this._cachedTint=this.tint,this._tintedTexture=T.default.getTintedTexture(this,this.tint));var o=n?this._tintedTexture:i.baseTexture.source;this._canvasUvs||(this._canvasUvs=[0,0,0,0,0,0,0,0]);var s=this.vertices,a=this._canvasUvs,u=n?0:i.frame.x,S=n?0:i.frame.y,l=u+i.frame.width,d=S+i.frame.height;a[0]=u,a[1]=u+this._leftWidth,a[2]=l-this._rightWidth,a[3]=l,a[4]=S,a[5]=S+this._topHeight,a[6]=d-this._bottomHeight,a[7]=d;for(var f=0;8>f;f++)a[f]*=i.baseTexture.resolution;t.globalAlpha=this.worldAlpha,c.setBlendMode(this.blendMode),c.roundPixels?t.setTransform(e.a*r,e.b*r,e.c*r,e.d*r,0|e.tx*r,0|e.ty*r):t.setTransform(e.a*r,e.b*r,e.c*r,e.d*r,e.tx*r,e.ty*r);for(var E=0;3>E;E++)for(var C=0;3>C;C++){var P=2*C+8*E,A=te(1,a[C+1]-a[C]),m=te(1,a[E+5]-a[E+4]),_=te(1,s[P+10]-s[P]),b=te(1,s[P+11]-s[P+1]);t.drawImage(o,a[C],a[E+4],A,m,s[P],s[P+1],_,b)}},t.prototype._refresh=function(){l.prototype._refresh.call(this);var t=this.uvs,e=this._texture;this._origWidth=e.orig.width,this._origHeight=e.orig.height;var r=1/this._origWidth,n=1/this._origHeight;t[0]=t[8]=t[16]=t[24]=0,t[1]=t[3]=t[5]=t[7]=0,t[6]=t[14]=t[22]=t[30]=1,t[25]=t[27]=t[29]=t[31]=1,t[2]=t[10]=t[18]=t[26]=r*this._leftWidth,t[4]=t[12]=t[20]=t[28]=1-r*this._rightWidth,t[9]=t[11]=t[13]=t[15]=n*this._topHeight,t[17]=t[19]=t[21]=t[23]=1-n*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.dirty++,this.multiplyUvs()},o(t,[{key:"width",get:function(){return this._width},set:function(e){this._width=e,this._refresh()}},{key:"height",get:function(){return this._height},set:function(e){this._height=e,this._refresh()}},{key:"leftWidth",get:function(){return this._leftWidth},set:function(e){this._leftWidth=e,this._refresh()}},{key:"rightWidth",get:function(){return this._rightWidth},set:function(e){this._rightWidth=e,this._refresh()}},{key:"topHeight",get:function(){return this._topHeight},set:function(e){this._topHeight=e,this._refresh()}},{key:"bottomHeight",get:function(){return this._bottomHeight},set:function(e){this._bottomHeight=e,this._refresh()}}]),t}(s.default);e.default=l},{"../core/sprites/canvas/CanvasTinter":104,"./Plane":168}],168:[function(l,t,e){"use strict";function d(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function n(r,t){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:r}function r(r,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(r,t):r.__proto__=t)}e.__esModule=!0;var o=l("./Mesh"),i=function(e){return e&&e.__esModule?e:{default:e}}(o),a=function(a){function t(e,r,o){d(this,t);var s=n(this,a.call(this,e));return s._ready=!0,s.verticesX=r||10,s.verticesY=o||10,s.drawMode=i.default.DRAW_MODES.TRIANGLES,s.refresh(),s}return r(t,a),t.prototype._refresh=function(){for(var f=this._texture,t=this.verticesX*this.verticesY,e=[],r=[],n=[],i=[],o=this.verticesX-1,s=this.verticesY-1,a=f.width/o,u=f.height/s,T=0;T<t;T++){var S=T%this.verticesX,c=0|T/this.verticesX;e.push(S*a,c*u),n.push(S/o,c/s)}for(var d=0;d<o*s;d++){var E=d%o,v=0|d/o,g=v*this.verticesX+E,C=v*this.verticesX+E+1,m=(v+1)*this.verticesX+E,_=(v+1)*this.verticesX+E+1;i.push(g,C,m),i.push(C,_,m)}this.vertices=new Float32Array(e),this.uvs=new Float32Array(n),this.colors=new Float32Array(r),this.indices=new Uint16Array(i),this.dirty++,this.indexDirty++,this.multiplyUvs()},t.prototype._onTextureUpdate=function(){i.default.prototype._onTextureUpdate.call(this),this._ready&&this.refresh()},t}(i.default);e.default=a},{"./Mesh":166}],169:[function(l,t,e){"use strict";function d(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function n(r,t){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:r}function r(r,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(r,t):r.__proto__=t)}e.__esModule=!0;var o=l("./Mesh"),i=function(e){return e&&e.__esModule?e:{default:e}}(o),a=function(a){function t(e,r){d(this,t);var o=n(this,a.call(this,e));return o.points=r,o.vertices=new Float32Array(4*r.length),o.uvs=new Float32Array(4*r.length),o.colors=new Float32Array(2*r.length),o.indices=new Uint16Array(2*r.length),o.autoUpdate=!0,o.refresh(),o}return r(t,a),t.prototype._refresh=function(){var l=this.points;if(!(1>l.length)&&this._texture._uvs){this.vertices.length/4!==l.length&&(this.vertices=new Float32Array(4*l.length),this.uvs=new Float32Array(4*l.length),this.colors=new Float32Array(2*l.length),this.indices=new Uint16Array(2*l.length));var t=this.uvs,e=this.indices,r=this.colors;t[0]=0,t[1]=0,t[2]=0,t[3]=1,r[0]=1,r[1]=1,e[0]=0,e[1]=1;for(var n=l.length,i=1;i<n;i++){var d=4*i,u=i/(n-1);t[d]=u,t[d+1]=0,t[d+2]=u,t[d+3]=1,d=2*i,r[d]=1,r[d+1]=1,d=2*i,e[d]=d,e[d+1]=d+1}this.dirty++,this.indexDirty++,this.multiplyUvs(),this.refreshVertices()}},t.prototype.refreshVertices=function(){var p=this.points;if(!(1>p.length))for(var t=p[0],f=void 0,g=0,m=0,_=this.vertices,o=p.length,s=0;s<o;s++){var b=p[s],u=4*s;f=s<p.length-1?p[s+1]:b,m=-(f.x-t.x),g=f.y-t.y;var T=10*(1-s/(o-1));1<T&&(T=1);var v=z(g*g+m*m),c=this._texture.height/2;g/=v,m/=v,g*=c,m*=c,_[u]=b.x+g,_[u+1]=b.y+m,_[u+2]=b.x-g,_[u+3]=b.y-m,t=b}},t.prototype.updateTransform=function(){this.autoUpdate&&this.refreshVertices(),this.containerUpdateTransform()},t}(i.default);e.default=a},{"./Mesh":166}],170:[function(l,t,e){"use strict";function r(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var n=l("../../core"),i=function(n){if(n&&n.__esModule)return n;var t={};if(null!=n)for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t.default=n,t}(n),o=l("../Mesh"),s=function(e){return e&&e.__esModule?e:{default:e}}(o),a=function(){function n(t){r(this,n),this.renderer=t}return n.prototype.render=function(a){var t=this.renderer,e=t.context,r=a.worldTransform,n=t.resolution;t.roundPixels?e.setTransform(r.a*n,r.b*n,r.c*n,r.d*n,0|r.tx*n,0|r.ty*n):e.setTransform(r.a*n,r.b*n,r.c*n,r.d*n,r.tx*n,r.ty*n),t.context.globalAlpha=a.worldAlpha,t.setBlendMode(a.blendMode),a.drawMode===s.default.DRAW_MODES.TRIANGLE_MESH?this._renderTriangleMesh(a):this._renderTriangles(a)},n.prototype._renderTriangleMesh=function(a){for(var t=a.vertices.length/2,e=0,o;e<t-2;e++)o=2*e,this._renderDrawTriangle(a,o,o+2,o+4)},n.prototype._renderTriangles=function(a){for(var t=a.indices,e=t.length,r=0;r<e;r+=3){var l=2*t[r],i=2*t[r+1],o=2*t[r+2];this._renderDrawTriangle(a,l,i,o)}},n.prototype._renderDrawTriangle=function(U,t,e,r){var n=this.renderer.context,i=U.uvs,o=U.vertices,s=U._texture;if(s.valid){var a=s.baseTexture,u=a.source,X=a.width,l=a.height,c,W,G,Y,V,H;if(U.uploadUvTransform){var q=U._uvTransform.mapCoord;c=(i[t]*q.a+i[t+1]*q.c+q.tx)*a.width,W=(i[e]*q.a+i[e+1]*q.c+q.tx)*a.width,G=(i[r]*q.a+i[r+1]*q.c+q.tx)*a.width,Y=(i[t]*q.b+i[t+1]*q.d+q.ty)*a.height,V=(i[e]*q.b+i[e+1]*q.d+q.ty)*a.height,H=(i[r]*q.b+i[r+1]*q.d+q.ty)*a.height}else c=i[t]*a.width,W=i[e]*a.width,G=i[r]*a.width,Y=i[t+1]*a.height,V=i[e+1]*a.height,H=i[r+1]*a.height;var m=o[t],K=o[e],Z=o[r],J=o[t+1],Q=o[e+1],$=o[r+1],te=U.canvasPadding/this.renderer.resolution;if(0<te){var S=te/ee(U.worldTransform.a),O=te/ee(U.worldTransform.d),M=(m+K+Z)/3,P=(J+Q+$)/3,C=m-M,re=J-P,ne=z(C*C+re*re);m=M+C/ne*(ne+S),J=P+re/ne*(ne+O),C=K-M,re=Q-P,ne=z(C*C+re*re),K=M+C/ne*(ne+S),Q=P+re/ne*(ne+O),C=Z-M,re=$-P,ne=z(C*C+re*re),Z=M+C/ne*(ne+S),$=P+re/ne*(ne+O)}n.save(),n.beginPath(),n.moveTo(m,J),n.lineTo(K,Q),n.lineTo(Z,$),n.closePath(),n.clip();var ae=c*V+Y*G+W*H-V*G-Y*W-c*H,D=m*V+Y*Z+K*H-V*Z-Y*K-m*H,L=c*K+m*G+W*Z-K*G-m*W-c*Z,N=c*V*Z+Y*K*G+m*W*H-m*V*G-Y*W*Z-c*K*H,B=J*V+Y*$+Q*H-V*$-Y*Q-J*H,k=c*Q+J*G+W*$-Q*G-J*W-c*$,F=c*V*$+Y*Q*G+J*W*H-J*V*G-Y*W*$-c*Q*H;n.transform(D/ae,B/ae,L/ae,k/ae,N/ae,F/ae),n.drawImage(u,0,0,X*a.resolution,l*a.resolution,0,0,X,l),n.restore(),this.renderer.invalidateBlendMode()}},n.prototype.renderMeshFlat=function(d){var t=this.renderer.context,e=d.vertices,r=e.length/2;t.beginPath();for(var n=1;n<r-2;++n){var p=2*n,o=e[p],s=e[p+1],a=e[p+2],u=e[p+3],f=e[p+4],l=e[p+5];t.moveTo(o,s),t.lineTo(a,u),t.lineTo(f,l)}t.fillStyle="#FF0000",t.fill(),t.closePath()},n.prototype.destroy=function(){this.renderer=null},n}();e.default=a,i.CanvasRenderer.registerPlugin("mesh",a)},{"../../core":65,"../Mesh":166}],171:[function(l,t,e){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}e.__esModule=!0;var n=l("./Mesh");Object.defineProperty(e,"Mesh",{enumerable:!0,get:function(){return r(n).default}});var i=l("./webgl/MeshRenderer");Object.defineProperty(e,"MeshRenderer",{enumerable:!0,get:function(){return r(i).default}});var o=l("./canvas/CanvasMeshRenderer");Object.defineProperty(e,"CanvasMeshRenderer",{enumerable:!0,get:function(){return r(o).default}});var s=l("./Plane");Object.defineProperty(e,"Plane",{enumerable:!0,get:function(){return r(s).default}});var a=l("./NineSlicePlane");Object.defineProperty(e,"NineSlicePlane",{enumerable:!0,get:function(){return r(a).default}});var d=l("./Rope");Object.defineProperty(e,"Rope",{enumerable:!0,get:function(){return r(d).default}})},{"./Mesh":166,"./NineSlicePlane":167,"./Plane":168,"./Rope":169,"./canvas/CanvasMeshRenderer":170,"./webgl/MeshRenderer":172}],172:[function(g,t,e){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function m(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function i(r,t){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:r}function n(r,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(r,t):r.__proto__=t)}e.__esModule=!0;var o=g("../../core"),a=function(n){if(n&&n.__esModule)return n;var t={};if(null!=n)for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t.default=n,t}(o),s=g("pixi-gl-core"),u=r(s),l=g("../Mesh"),c=r(l),d=(g("path"),a.Matrix.IDENTITY),f=function(o){function t(e){m(this,t);var r=i(this,o.call(this,e));return r.shader=null,r}return n(t,o),t.prototype.onContextChange=function(){var e=this.renderer.gl;this.shader=new a.Shader(e,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n")},t.prototype.render=function(s){var t=this.renderer,e=t.gl,r=s._texture;if(r.valid){var n=s._glDatas[t.CONTEXT_UID];n||(t.bindVao(null),n={shader:this.shader,vertexBuffer:u.default.GLBuffer.createVertexBuffer(e,s.vertices,e.STREAM_DRAW),uvBuffer:u.default.GLBuffer.createVertexBuffer(e,s.uvs,e.STREAM_DRAW),indexBuffer:u.default.GLBuffer.createIndexBuffer(e,s.indices,e.STATIC_DRAW),vao:null,dirty:s.dirty,indexDirty:s.indexDirty,vertexDirty:s.vertexDirty},n.vao=new u.default.VertexArrayObject(e).addIndex(n.indexBuffer).addAttribute(n.vertexBuffer,n.shader.attributes.aVertexPosition,e.FLOAT,!1,8,0).addAttribute(n.uvBuffer,n.shader.attributes.aTextureCoord,e.FLOAT,!1,8,0),s._glDatas[t.CONTEXT_UID]=n),t.bindVao(n.vao),s.dirty!==n.dirty&&(n.dirty=s.dirty,n.uvBuffer.upload(s.uvs)),s.indexDirty!==n.indexDirty&&(n.indexDirty=s.indexDirty,n.indexBuffer.upload(s.indices)),s.vertexDirty!==n.vertexDirty&&(n.vertexDirty=s.vertexDirty,n.vertexBuffer.upload(s.vertices)),t.bindShader(n.shader),n.shader.uniforms.uSampler=t.bindTexture(r),t.state.setBlendMode(a.utils.correctBlendMode(s.blendMode,r.baseTexture.premultipliedAlpha)),n.shader.uniforms.uTransform&&(s.uploadUvTransform?n.shader.uniforms.uTransform=s._uvTransform.mapCoord.toArray(!0):n.shader.uniforms.uTransform=d.toArray(!0)),n.shader.uniforms.translationMatrix=s.worldTransform.toArray(!0),n.shader.uniforms.uColor=a.utils.premultiplyRgba(s.tintRgb,s.worldAlpha,n.shader.uniforms.uColor,r.baseTexture.premultipliedAlpha);var l=s.drawMode===c.default.DRAW_MODES.TRIANGLE_MESH?e.TRIANGLE_STRIP:e.TRIANGLES;n.vao.draw(l,s.indices.length,0)}},t}(a.ObjectRenderer);e.default=f,a.WebGLRenderer.registerPlugin("mesh",f)},{"../../core":65,"../Mesh":166,path:8,"pixi-gl-core":15}],173:[function(d,t,e){"use strict";function p(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function n(r,t){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:r}function r(r,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(r,t):r.__proto__=t)}e.__esModule=!0;var o=function(){function a(a,t){for(var e=0,o;e<t.length;e++)o=t[e],o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(a,o.key,o)}return function(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t}}(),i=d("../core"),c=function(n){if(n&&n.__esModule)return n;var t={};if(null!=n)for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t.default=n,t}(i),a=d("../core/utils"),s=function(i){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1500,r=arguments[1],o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:16384,l=3<arguments.length&&void 0!==arguments[3]&&arguments[3];p(this,t);var a=n(this,i.call(this));return 16384<o&&(o=16384),o>e&&(o=e),a._properties=[!1,!0,!1,!1,!1],a._maxSize=e,a._batchSize=o,a._glBuffers={},a._bufferUpdateIDs=[],a._updateID=0,a.interactiveChildren=!1,a.blendMode=c.BLEND_MODES.NORMAL,a.autoResize=l,a.roundPixels=!0,a.baseTexture=null,a.setProperties(r),a._tint=0,a.tintRgb=new Float32Array(4),a.tint=16777215,a}return r(t,i),t.prototype.setProperties=function(e){e&&(this._properties[0]="vertices"in e||"scale"in e?!!e.vertices||!!e.scale:this._properties[0],this._properties[1]="position"in e?!!e.position:this._properties[1],this._properties[2]="rotation"in e?!!e.rotation:this._properties[2],this._properties[3]="uvs"in e?!!e.uvs:this._properties[3],this._properties[4]="tint"in e||"alpha"in e?!!e.tint||!!e.alpha:this._properties[4])},t.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},t.prototype.renderWebGL=function(r){var t=this;this.visible&&!(0>=this.worldAlpha)&&this.children.length&&this.renderable&&(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.hasLoaded||this.baseTexture.once("update",function(){return t.onChildrenChange(0)})),r.setObjectRenderer(r.plugins.particle),r.plugins.particle.render(this))},t.prototype.onChildrenChange=function(r){for(var t=J(r/this._batchSize);this._bufferUpdateIDs.length<t;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[t]=++this._updateID},t.prototype.renderCanvas=function(p){if(this.visible&&!(0>=this.worldAlpha)&&this.children.length&&this.renderable){var t=p.context,e=this.worldTransform,r=!0,f=0,g=0,m=0,_=0;p.setBlendMode(this.blendMode),t.globalAlpha=this.worldAlpha,this.displayObjectUpdateTransform();for(var b=0,T;b<this.children.length;++b)if(T=this.children[b],T.visible){var v=T._texture.frame;if(t.globalAlpha=this.worldAlpha*T.alpha,0==T.rotation%(2*Z))r&&(t.setTransform(e.a,e.b,e.c,e.d,e.tx*p.resolution,e.ty*p.resolution),r=!1),f=T.anchor.x*(-v.width*T.scale.x)+T.position.x+.5,g=T.anchor.y*(-v.height*T.scale.y)+T.position.y+.5,m=v.width*T.scale.x,_=v.height*T.scale.y;else{r||(r=!0),T.displayObjectUpdateTransform();var l=T.worldTransform;p.roundPixels?t.setTransform(l.a,l.b,l.c,l.d,0|l.tx*p.resolution,0|l.ty*p.resolution):t.setTransform(l.a,l.b,l.c,l.d,l.tx*p.resolution,l.ty*p.resolution),f=T.anchor.x*-v.width+.5,g=T.anchor.y*-v.height+.5,m=v.width,_=v.height}var c=T._texture.baseTexture.resolution;t.drawImage(T._texture.baseTexture.source,v.x*c,v.y*c,v.width*c,v.height*c,f*p.resolution,g*p.resolution,m*p.resolution,_*p.resolution)}}},t.prototype.destroy=function(t){if(i.prototype.destroy.call(this,t),this._buffers)for(var e=0;e<this._buffers.length;++e)this._buffers[e].destroy();this._properties=null,this._buffers=null,this._bufferUpdateIDs=null},o(t,[{key:"tint",get:function(){return this._tint},set:function(e){this._tint=e,(0,a.hex2rgb)(e,this.tintRgb)}}]),t}(c.Container);e.default=s},{"../core":65,"../core/utils":125}],174:[function(a,t,e){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}e.__esModule=!0;var n=a("./ParticleContainer");Object.defineProperty(e,"ParticleContainer",{enumerable:!0,get:function(){return r(n).default}});var i=a("./webgl/ParticleRenderer");Object.defineProperty(e,"ParticleRenderer",{enumerable:!0,get:function(){return r(i).default}})},{"./ParticleContainer":173,"./webgl/ParticleRenderer":176}],175:[function(l,t,e){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function d(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var n=l("pixi-gl-core"),g=r(n),o=l("../../core/utils/createIndicesForQuads"),s=r(o),a=function(){function i(t,e,r,n){d(this,i),this.gl=t,this.size=n,this.dynamicProperties=[],this.staticProperties=[];for(var o=0,l;o<e.length;++o)l=e[o],l={attribute:l.attribute,size:l.size,uploadFunction:l.uploadFunction,unsignedByte:l.unsignedByte,offset:l.offset},r[o]?this.dynamicProperties.push(l):this.staticProperties.push(l);this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}return i.prototype.initBuffers=function(){var u=this.gl,t=0;this.indices=(0,s.default)(this.size),this.indexBuffer=g.default.GLBuffer.createIndexBuffer(u,this.indices,u.STATIC_DRAW),this.dynamicStride=0;for(var m=0,_;m<this.dynamicProperties.length;++m)_=this.dynamicProperties[m],_.offset=t,t+=_.size,this.dynamicStride+=_.size;var b=new ArrayBuffer(4*(4*(this.size*this.dynamicStride)));this.dynamicData=new Float32Array(b),this.dynamicDataUint32=new Uint32Array(b),this.dynamicBuffer=g.default.GLBuffer.createVertexBuffer(u,b,u.STREAM_DRAW);var i=0;this.staticStride=0;for(var T=0,v;T<this.staticProperties.length;++T)v=this.staticProperties[T],v.offset=i,i+=v.size,this.staticStride+=v.size;var S=new ArrayBuffer(4*(4*(this.size*this.staticStride)));this.staticData=new Float32Array(S),this.staticDataUint32=new Uint32Array(S),this.staticBuffer=g.default.GLBuffer.createVertexBuffer(u,S,u.STATIC_DRAW),this.vao=new g.default.VertexArrayObject(u).addIndex(this.indexBuffer);for(var l=0,E;l<this.dynamicProperties.length;++l)E=this.dynamicProperties[l],E.unsignedByte?this.vao.addAttribute(this.dynamicBuffer,E.attribute,u.UNSIGNED_BYTE,!0,4*this.dynamicStride,4*E.offset):this.vao.addAttribute(this.dynamicBuffer,E.attribute,u.FLOAT,!1,4*this.dynamicStride,4*E.offset);for(var C=0,P;C<this.staticProperties.length;++C)P=this.staticProperties[C],P.unsignedByte?this.vao.addAttribute(this.staticBuffer,P.attribute,u.UNSIGNED_BYTE,!0,4*this.staticStride,4*P.offset):this.vao.addAttribute(this.staticBuffer,P.attribute,u.FLOAT,!1,4*this.staticStride,4*P.offset)},i.prototype.uploadDynamic=function(a,t,e){for(var r=0,o;r<this.dynamicProperties.length;r++)o=this.dynamicProperties[r],o.uploadFunction(a,t,e,o.unsignedByte?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,o.offset);this.dynamicBuffer.upload()},i.prototype.uploadStatic=function(a,t,e){for(var r=0,o;r<this.staticProperties.length;r++)o=this.staticProperties[r],o.uploadFunction(a,t,e,o.unsignedByte?this.staticDataUint32:this.staticData,this.staticStride,o.offset);this.staticBuffer.upload()},i.prototype.destroy=function(){this.dynamicProperties=null,this.dynamicBuffer.destroy(),this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer.destroy(),this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null},i}();e.default=a},{"../../core/utils/createIndicesForQuads":123,"pixi-gl-core":15}],176:[function(g,t,e){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function m(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function i(r,t){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:r}function n(r,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(r,t):r.__proto__=t)}e.__esModule=!0;var o=g("../../core"),_=function(n){if(n&&n.__esModule)return n;var t={};if(null!=n)for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t.default=n,t}(o),a=g("./ParticleShader"),s=r(a),l=g("./ParticleBuffer"),u=r(l),d=g("../../core/utils"),c=function(a){function t(e){m(this,t);var r=i(this,a.call(this,e));return r.shader=null,r.indexBuffer=null,r.properties=null,r.tempMatrix=new _.Matrix,r.CONTEXT_UID=0,r}return n(t,a),t.prototype.onContextChange=function(){var e=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.shader=new s.default(e),this.properties=[{attribute:this.shader.attributes.aVertexPosition,size:2,uploadFunction:this.uploadVertices,offset:0},{attribute:this.shader.attributes.aPositionCoord,size:2,uploadFunction:this.uploadPosition,offset:0},{attribute:this.shader.attributes.aRotation,size:1,uploadFunction:this.uploadRotation,offset:0},{attribute:this.shader.attributes.aTextureCoord,size:2,uploadFunction:this.uploadUvs,offset:0},{attribute:this.shader.attributes.aColor,size:1,unsignedByte:!0,uploadFunction:this.uploadTint,offset:0}]},t.prototype.start=function(){this.renderer.bindShader(this.shader)},t.prototype.render=function(u){var t=u.children,e=u._maxSize,r=u._batchSize,n=this.renderer,i=t.length;if(0!==i){i>e&&(i=e);var m=u._glBuffers[n.CONTEXT_UID];m||(m=u._glBuffers[n.CONTEXT_UID]=this.generateBuffers(u));var b=t[0]._texture.baseTexture;this.renderer.setBlendMode(_.utils.correctBlendMode(u.blendMode,b.premultipliedAlpha));var a=n.gl,T=u.worldTransform.copy(this.tempMatrix);T.prepend(n._activeRenderTarget.projectionMatrix),this.shader.uniforms.projectionMatrix=T.toArray(!0),this.shader.uniforms.uColor=_.utils.premultiplyRgba(u.tintRgb,u.worldAlpha,this.shader.uniforms.uColor,b.premultipliedAlpha),this.shader.uniforms.uSampler=n.bindTexture(b);for(var l=!1,S=0,E=0,C;S<i;S+=r,E+=1){if(C=i-S,C>r&&(C=r),E>=m.length){if(!u.autoResize)break;m.push(this._generateOneMoreBuffer(u))}var P=m[E];P.uploadDynamic(t,S,C);var v=u._bufferUpdateIDs[E]||0;l=l||P._updateID<v,l&&(P._updateID=u._updateID,P.uploadStatic(t,S,C)),n.bindVao(P.vao),P.vao.draw(a.TRIANGLES,6*C)}}},t.prototype.generateBuffers=function(a){for(var t=this.renderer.gl,e=[],r=a._maxSize,n=a._batchSize,i=a._properties,o=0;o<r;o+=n)e.push(new u.default(t,this.properties,i,n));return e},t.prototype._generateOneMoreBuffer=function(a){var t=this.renderer.gl,e=a._batchSize,r=a._properties;return new u.default(t,this.properties,r,e)},t.prototype.uploadVertices=function(m,t,e,r,n,i){for(var _=0,b=0,T=0,S=0,E=0;E<e;++E){var C=m[t+E],c=C._texture,d=C.scale.x,f=C.scale.y,p=c.trim,v=c.orig;p?(b=p.x-C.anchor.x*v.width,_=b+p.width,S=p.y-C.anchor.y*v.height,T=S+p.height):(_=v.width*(1-C.anchor.x),b=v.width*-C.anchor.x,T=v.height*(1-C.anchor.y),S=v.height*-C.anchor.y),r[i]=b*d,r[i+1]=S*f,r[i+n]=_*d,r[i+n+1]=S*f,r[i+2*n]=_*d,r[i+2*n+1]=T*f,r[i+3*n]=b*d,r[i+3*n+1]=T*f,i+=4*n}},t.prototype.uploadPosition=function(l,t,e,r,n,i){for(var d=0,u;d<e;d++)u=l[t+d].position,r[i]=u.x,r[i+1]=u.y,r[i+n]=u.x,r[i+n+1]=u.y,r[i+2*n]=u.x,r[i+2*n+1]=u.y,r[i+3*n]=u.x,r[i+3*n+1]=u.y,i+=4*n},t.prototype.uploadRotation=function(l,t,e,r,n,i){for(var d=0,u;d<e;d++)u=l[t+d].rotation,r[i]=u,r[i+n]=u,r[i+2*n]=u,r[i+3*n]=u,i+=4*n},t.prototype.uploadUvs=function(l,t,e,r,n,i){for(var d=0,u;d<e;++d)u=l[t+d]._texture._uvs,u?(r[i]=u.x0,r[i+1]=u.y0,r[i+n]=u.x1,r[i+n+1]=u.y1,r[i+2*n]=u.x2,r[i+2*n+1]=u.y2,r[i+3*n]=u.x3,r[i+3*n+1]=u.y3,i+=4*n):(r[i]=0,r[i+1]=0,r[i+n]=0,r[i+n+1]=0,r[i+2*n]=0,r[i+2*n+1]=0,r[i+3*n]=0,r[i+3*n+1]=0,i+=4*n)},t.prototype.uploadTint=function(p,t,e,r,n,i){for(var c=0;c<e;++c){var f=p[t+c],a=f._texture.baseTexture.premultipliedAlpha,u=f.alpha,g=1>u&&a?(0,d.premultiplyTint)(f._tintRGB,u):f._tintRGB+(255*u<<24);r[i]=g,r[i+n]=g,r[i+2*n]=g,r[i+3*n]=g,i+=4*n}},t.prototype.destroy=function(){this.renderer.gl&&this.renderer.gl.deleteBuffer(this.indexBuffer),a.prototype.destroy.call(this),this.shader.destroy(),this.indices=null,this.tempMatrix=null},t}(_.ObjectRenderer);e.default=c,_.WebGLRenderer.registerPlugin("particle",c)},{"../../core":65,"../../core/utils":125,"./ParticleBuffer":175,"./ParticleShader":177}],177:[function(l,t,e){"use strict";function d(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function n(r,t){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:r}function r(r,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(r,t):r.__proto__=t)}e.__esModule=!0;var o=l("../../core/Shader"),i=function(e){return e&&e.__esModule?e:{default:e}}(o),a=function(a){function t(e){return d(this,t),n(this,a.call(this,e,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute vec2 aPositionCoord;\nattribute float aRotation;\nuniform mat3 projectionMatrix;\nuniform vec4 uColor;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvoid main(void){\n   float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);\n   float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);\n   vec2 v = vec2(x, y);\n   v = v + aPositionCoord;\n   gl_Position = vec4((projectionMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n   vColor = aColor * uColor;\n}","varying vec2 vTextureCoord;\nvarying vec4 vColor;\nuniform sampler2D uSampler;\nvoid main(void){\n  vec4 color = texture2D(uSampler, vTextureCoord) * vColor;\n  gl_FragColor = color;\n}"))}return r(t,a),t}(i.default);e.default=a},{"../../core/Shader":44}],178:[function(){"use strict";r||(r=function(e){return e=+e,0===e||isNaN(e)?e:0<e?1:-1})},{}],179:[function(){"use strict";e||(e=function(e){return"number"==typeof e&&isFinite(e)&&J(e)===e})},{}],180:[function(e){"use strict";var t=e("object-assign"),r=function(e){return e&&e.__esModule?e:{default:e}}(t);Object.assign||(Object.assign=r.default)},{"object-assign":6}],181:[function(e){"use strict";e("./Object.assign"),e("./requestAnimationFrame"),e("./Math.sign"),e("./Number.isInteger"),window.ArrayBuffer||(window.ArrayBuffer=Array),window.Float32Array||(window.Float32Array=Array),window.Uint32Array||(window.Uint32Array=Array),window.Uint16Array||(window.Uint16Array=Array)},{"./Math.sign":178,"./Number.isInteger":179,"./Object.assign":180,"./requestAnimationFrame":182}],182:[function(){(function(a){"use strict";if(Date.now&&Date.prototype.getTime||(Date.now=function(){return new Date().getTime()}),!a.performance||!a.performance.now){var t=Date.now();a.performance||(a.performance={}),a.performance.now=function(){return Date.now()-t}}for(var s=Date.now(),e=["ms","moz","webkit","o"],n=0,l;n<e.length&&!a.requestAnimationFrame;++n)l=e[n],a.requestAnimationFrame=a[l+"RequestAnimationFrame"],a.cancelAnimationFrame=a[l+"CancelAnimationFrame"]||a[l+"CancelRequestAnimationFrame"];a.requestAnimationFrame||(a.requestAnimationFrame=function(r){if("function"!=typeof r)throw new TypeError(r+"is not a function");var t=Date.now(),e=16+s-t;return 0>e&&(e=0),s=t,setTimeout(function(){s=Date.now(),r(performance.now())},e)}),a.cancelAnimationFrame||(a.cancelAnimationFrame=function(e){return clearTimeout(e)})}).call(this,"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{}],183:[function(m,t,e){"use strict";function _(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function n(a,t){var e=!1;if(a&&a._textures&&a._textures.length)for(var o=0;o<a._textures.length;o++)if(a._textures[o]instanceof l.Texture){var s=a._textures[o].baseTexture;-1===t.indexOf(s)&&(t.push(s),e=!0)}return e}function i(r,t){return r instanceof l.BaseTexture&&(-1===t.indexOf(r)&&t.push(r),!0)}function o(n,t){if(n._texture&&n._texture instanceof l.Texture){var e=n._texture.baseTexture;return-1===t.indexOf(e)&&t.push(e),!0}return!1}function s(r,t){return t instanceof l.Text&&(t.updateText(!0),!0)}function a(n,t){if(t instanceof l.TextStyle){var e=t.toFontString();return l.TextMetrics.measureFont(e),!0}return!1}function u(n,t){if(n instanceof l.Text){-1===t.indexOf(n.style)&&t.push(n.style),-1===t.indexOf(n)&&t.push(n);var e=n._texture.baseTexture;return-1===t.indexOf(e)&&t.push(e),!0}return!1}function b(r,t){return r instanceof l.TextStyle&&(-1===t.indexOf(r)&&t.push(r),!0)}e.__esModule=!0;var r=m("../core"),l=function(n){if(n&&n.__esModule)return n;var t={};if(null!=n)for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t.default=n,t}(r),d=m("./limiters/CountLimiter"),c=function(e){return e&&e.__esModule?e:{default:e}}(d),p=l.ticker.shared;l.settings.UPLOADS_PER_FRAME=4;var f=function(){function d(t){var e=this;_(this,d),this.limiter=new c.default(l.settings.UPLOADS_PER_FRAME),this.renderer=t,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){e.queue&&e.prepareItems()},this.registerFindHook(u),this.registerFindHook(b),this.registerFindHook(n),this.registerFindHook(i),this.registerFindHook(o),this.registerUploadHook(s),this.registerUploadHook(a)}return d.prototype.upload=function(r,n){"function"==typeof r&&(n=r,r=null),r&&this.add(r),this.queue.length?(n&&this.completes.push(n),this.ticking||(this.ticking=!0,p.addOnce(this.tick,this,l.UPDATE_PRIORITY.UTILITY))):n&&n()},d.prototype.tick=function(){setTimeout(this.delayedTick,0)},d.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var a=this.queue[0],t=!1;if(a&&!a._destroyed)for(var d=0,u=this.uploadHooks.length;d<u;d++)if(this.uploadHooks[d](this.uploadHookHelper,a)){this.queue.shift(),t=!0;break}t||this.queue.shift()}if(this.queue.length)p.addOnce(this.tick,this,l.UPDATE_PRIORITY.UTILITY);else{this.ticking=!1;var n=this.completes.slice(0);this.completes.length=0;for(var i=0,c=n.length;i<c;i++)n[i]()}},d.prototype.registerFindHook=function(e){return e&&this.addHooks.push(e),this},d.prototype.registerUploadHook=function(e){return e&&this.uploadHooks.push(e),this},d.prototype.add=function(a){for(var t=0,o=this.addHooks.length;t<o&&!this.addHooks[t](a,this.queue);t++);if(a instanceof l.Container)for(var r=a.children.length-1;0<=r;r--)this.add(a.children[r]);return this},d.prototype.destroy=function(){this.ticking&&p.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},d}();e.default=f},{"../core":65,"./limiters/CountLimiter":186}],184:[function(p,t,e){"use strict";function c(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function n(r,t){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:r}function r(r,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(r,t):r.__proto__=t)}function i(o,t){if(t instanceof a.BaseTexture){var e=t.source,r=0===e.width?o.canvas.width:Q(o.canvas.width,e.width),n=0===e.height?o.canvas.height:Q(o.canvas.height,e.height);return o.ctx.drawImage(e,0,0,r,n,0,0,o.canvas.width,o.canvas.height),!0}return!1}e.__esModule=!0;var o=p("../../core"),a=function(n){if(n&&n.__esModule)return n;var t={};if(null!=n)for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t.default=n,t}(o),s=p("../BasePrepare"),u=function(e){return e&&e.__esModule?e:{default:e}}(s),l=function(a){function t(e){c(this,t);var r=n(this,a.call(this,e));return r.uploadHookHelper=r,r.canvas=document.createElement("canvas"),r.canvas.width=16,r.canvas.height=16,r.ctx=r.canvas.getContext("2d"),r.registerUploadHook(i),r}return r(t,a),t.prototype.destroy=function(){a.prototype.destroy.call(this),this.ctx=null,this.canvas=null},t}(u.default);e.default=l,a.CanvasRenderer.registerPlugin("prepare",l)},{"../../core":65,"../BasePrepare":183}],185:[function(l,t,e){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}e.__esModule=!0;var n=l("./webgl/WebGLPrepare");Object.defineProperty(e,"webgl",{enumerable:!0,get:function(){return r(n).default}});var i=l("./canvas/CanvasPrepare");Object.defineProperty(e,"canvas",{enumerable:!0,get:function(){return r(i).default}});var o=l("./BasePrepare");Object.defineProperty(e,"BasePrepare",{enumerable:!0,get:function(){return r(o).default}});var s=l("./limiters/CountLimiter");Object.defineProperty(e,"CountLimiter",{enumerable:!0,get:function(){return r(s).default}});var a=l("./limiters/TimeLimiter");Object.defineProperty(e,"TimeLimiter",{enumerable:!0,get:function(){return r(a).default}})},{"./BasePrepare":183,"./canvas/CanvasPrepare":184,"./limiters/CountLimiter":186,"./limiters/TimeLimiter":187,"./webgl/WebGLPrepare":188}],186:[function(a,t,e){"use strict";function r(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var n=function(){function n(t){r(this,n),this.maxItemsPerFrame=t,this.itemsLeft=0}return n.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},n.prototype.allowedToUpload=function(){return 0<this.itemsLeft--},n}();e.default=n},{}],187:[function(a,t,e){"use strict";function r(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var n=function(){function n(t){r(this,n),this.maxMilliseconds=t,this.frameStart=0}return n.prototype.beginFrame=function(){this.frameStart=Date.now()},n.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds},n}();e.default=n},{}],188:[function(p,t,e){"use strict";function g(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function n(r,t){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:r}function r(r,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(r,t):r.__proto__=t)}function i(r,t){return t instanceof u.BaseTexture&&(t._glTextures[r.CONTEXT_UID]||r.textureManager.updateTexture(t),!0)}function s(r,t){return t instanceof u.Graphics&&((t.dirty||t.clearDirty||!t._webGL[r.plugins.graphics.CONTEXT_UID])&&r.plugins.graphics.updateGraphics(t),!0)}function a(r,t){return r instanceof u.Graphics&&(t.push(r),!0)}e.__esModule=!0;var o=p("../../core"),u=function(n){if(n&&n.__esModule)return n;var t={};if(null!=n)for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t.default=n,t}(o),l=p("../BasePrepare"),c=function(e){return e&&e.__esModule?e:{default:e}}(l),d=function(l){function t(e){g(this,t);var r=n(this,l.call(this,e));return r.uploadHookHelper=r.renderer,r.registerFindHook(a),r.registerUploadHook(i),r.registerUploadHook(s),r}return r(t,l),t}(c.default);e.default=d,u.WebGLRenderer.registerPlugin("prepare",d)},{"../../core":65,"../BasePrepare":183}],189:[function(C,t,P){(function(t){"use strict";function e(n){if(n&&n.__esModule)return n;var t={};if(null!=n)for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t.default=n,t}P.__esModule=!0,P.loader=P.prepare=P.particles=P.mesh=P.loaders=P.interaction=P.filters=P.extras=P.extract=P.accessibility=void 0;var r=C("./polyfill");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(P,e,{enumerable:!0,get:function(){return r[e]}})});var n=C("./core");Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(P,e,{enumerable:!0,get:function(){return n[e]}})});var o=C("./deprecation"),i=function(e){return e&&e.__esModule?e:{default:e}}(o),a=C("./accessibility"),s=e(a),u=C("./extract"),l=e(u),c=C("./extras"),d=e(c),f=C("./filters"),p=e(f),v=C("./interaction"),g=e(v),A=C("./loaders"),m=e(A),_=C("./mesh"),b=e(_),M=C("./particles"),T=e(M),R=C("./prepare"),E=e(R);n.utils.mixins.performMixins();var S=m.shared||null;P.accessibility=s,P.extract=l,P.extras=d,P.filters=p,P.interaction=g,P.loaders=m,P.mesh=b,P.particles=T,P.prepare=E,P.loader=S,"function"==typeof i.default&&(0,i.default)(P),t.PIXI=P}).call(this,"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{"./accessibility":42,"./core":65,"./deprecation":131,"./extract":133,"./extras":141,"./filters":153,"./interaction":159,"./loaders":162,"./mesh":171,"./particles":174,"./polyfill":181,"./prepare":185}]},{},[189])(189)}),!function d(u,e,t){function i(r,a){if(!e[r]){if(!u[r]){var o="function"==typeof require&&require;if(!a&&o)return o(r,!0);if(n)return n(r,!0);var s=new Error("Cannot find module '"+r+"'");throw s.code="MODULE_NOT_FOUND",s}var l=e[r]={exports:{}};u[r][0].call(l.exports,function(e){var t=u[r][1][e];return i(t?t:e)},l,l.exports,d,u,e,t)}return e[r].exports}for(var n="function"==typeof require&&require,r=0;r<t.length;r++)i(t[r]);return i}({1:[function(r,t){t.exports=PIXI.spine={Spine:r("./Spine"),SpineRuntime:r("./SpineRuntime"),loaders:r("./loaders")}},{"./Spine":43,"./SpineRuntime":41,"./loaders":47}],2:[function(r,t){var e=r("../SpineUtil");e.Animation=function(r,t,e){this.name=r,this.timelines=t,this.duration=e},e.Animation.prototype={apply:function(l,t,d,u,i){u&&0!=this.duration&&(d%=this.duration,t%=this.duration);for(var a=this.timelines,r=0,p=a.length;p>r;r++)a[r].apply(l,t,d,i,1)},mix:function(d,t,u,p,i,a){p&&0!=this.duration&&(u%=this.duration,t%=this.duration);for(var r=this.timelines,o=0,c=r.length;c>o;o++)r[o].apply(d,t,u,i,a)}},e.Animation.binarySearch=function(o,t,e){var n=0,s=Math.floor(o.length/e)-2;if(!s)return e;for(var l=s>>>1;;){if(o[(l+1)*e]<=t?n=l+1:s=l,n==s)return(n+1)*e;l=n+s>>>1}},e.Animation.binarySearch1=function(r,t){var e=0,o=r.length-2;if(!o)return 1;for(var s=o>>>1;;){if(r[s+1]<=t?e=s+1:o=s,e==o)return e+1;s=e+o>>>1}},e.Animation.linearSearch=function(r,t,e){for(var n=0,o=r.length-e;o>=n;n+=e)if(r[n]>t)return n;return-1},t.exports=e.Animation},{"../SpineUtil":42}],3:[function(r,t){var a=Math.floor,s=r("../SpineUtil");s.TrackEntry=r("./TrackEntry"),s.AnimationState=function(e){this.data=e,this.tracks=[],this.events=[]},s.AnimationState.prototype={onStart:null,onEnd:null,onComplete:null,onEvent:null,timeScale:1,update:function(r){r*=this.timeScale;for(var o=0,s;o<this.tracks.length;o++)if(s=this.tracks[o],s){if(s.time+=r*s.timeScale,s.previous){var l=r*s.previous.timeScale;s.previous.time+=l,s.mixTime+=l}var i=s.next;i?(i.time=s.lastTime-i.delay,0<=i.time&&this.setCurrent(o,i)):!s.loop&&s.lastTime>=s.endTime&&this.clearTrack(o)}},apply:function(d){for(var t=0,p;t<this.tracks.length;t++)if(p=this.tracks[t],p){this.events.length=0;var g=p.time,_=p.lastTime,b=p.endTime,r=p.loop;!r&&g>b&&(g=b);var o=p.previous;if(o){var s=o.time;!o.loop&&s>o.endTime&&(s=o.endTime),o.animation.apply(d,s,s,o.loop,null);var T=p.mixTime/p.mixDuration*p.mix;1<=T&&(T=1,p.previous=null),p.animation.mix(d,p.lastTime,g,r,this.events,T)}else 1==p.mix?p.animation.apply(d,p.lastTime,g,r,this.events):p.animation.mix(d,p.lastTime,g,r,this.events,p.mix);for(var v=0,S=this.events.length,u;S>v;v++)u=this.events[v],p.onEvent&&p.onEvent(t,u),this.onEvent&&this.onEvent(t,u);if(r?_%b>g%b:b>_&&g>=b){var E=a(g/b);p.onComplete&&p.onComplete(t,E),this.onComplete&&this.onComplete(t,E)}p.lastTime=p.time}},clearTracks:function(){for(var r=0,n=this.tracks.length;n>r;r++)this.clearTrack(r);this.tracks.length=0},clearTrack:function(r){if(!(r>=this.tracks.length)){var t=this.tracks[r];t&&(t.onEnd&&t.onEnd(r),this.onEnd&&this.onEnd(r),this.tracks[r]=null)}},_expandToIndex:function(e){if(e<this.tracks.length)return this.tracks[e];for(;e>=this.tracks.length;)this.tracks.push(null);return null},setCurrent:function(r,t){var e=this._expandToIndex(r);if(e){var n=e.previous;e.previous=null,e.onEnd&&e.onEnd(r),this.onEnd&&this.onEnd(r),t.mixDuration=this.data.getMix(e.animation,t.animation),0<t.mixDuration&&(t.mixTime=0,t.previous=n&&.5>e.mixTime/e.mixDuration?n:e)}this.tracks[r]=t,t.onStart&&t.onStart(r),this.onStart&&this.onStart(r)},setAnimationByName:function(r,t,e){var n=this.data.skeletonData.findAnimation(t);if(!n)throw"Animation not found: "+t;return this.setAnimation(r,n,e)},setAnimation:function(r,t,e){var n=new s.TrackEntry;return n.animation=t,n.loop=e,n.endTime=t.duration,this.setCurrent(r,n),n},addAnimationByName:function(r,t,e,n){var o=this.data.skeletonData.findAnimation(t);if(!o)throw"Animation not found: "+t;return this.addAnimation(r,o,e,n)},addAnimation:function(i,t,e,n){var l=new s.TrackEntry;l.animation=t,l.loop=e,l.endTime=t.duration;var r=this._expandToIndex(i);if(r){for(;r.next;)r=r.next;r.next=l}else this.tracks[i]=l;return 0>=n&&(r?n+=r.endTime-this.data.getMix(r.animation,t):n=0),l.delay=n,l},getCurrent:function(e){return e>=this.tracks.length?null:this.tracks[e]}},t.exports=s.AnimationState},{"../SpineUtil":42,"./TrackEntry":39}],4:[function(r,t){var e=r("../SpineUtil");e.AnimationStateData=function(e){this.skeletonData=e,this.animationToMixTime={}},e.AnimationStateData.prototype={defaultMix:0,setMixByName:function(r,t,e){var n=this.skeletonData.findAnimation(r);if(!n)throw"Animation not found: "+r;var o=this.skeletonData.findAnimation(t);if(!o)throw"Animation not found: "+t;this.setMix(n,o,e)},setMix:function(r,t,e){this.animationToMixTime[r.name+":"+t.name]=e},getMix:function(r,t){var e=r.name+":"+t.name;return this.animationToMixTime.hasOwnProperty(e)?this.animationToMixTime[e]:this.defaultMix}},t.exports=e.AnimationStateData},{"../SpineUtil":42}],5:[function(r,t){var n=Math.abs,g=r("../SpineUtil");g.AtlasReader=r("./AtlasReader"),g.AtlasPage=r("./AtlasPage"),g.AtlasRegion=r("./AtlasRegion");var i=r("../loaders/syncImageLoaderAdapter.js");g.Atlas=function(a,d,_){function p(){for(;;){var e=l.readLine(),r=e;if(null===e)return _&&_(b);if(e=l.trim(e),e.length){if(e=r,!m){m=new g.AtlasPage,m.name=e,2==l.readTuple(T)&&(m.width=parseInt(T[0]),m.height=parseInt(T[1]),l.readTuple(T)),m.format=g.Atlas.Format[T[0]],l.readTuple(T),m.minFilter=g.Atlas.TextureFilter[T[0]],m.magFilter=g.Atlas.TextureFilter[T[1]];var i=l.readValue();m.uWrap=g.Atlas.TextureWrap.clampToEdge,m.vWrap=g.Atlas.TextureWrap.clampToEdge,"x"==i?m.uWrap=g.Atlas.TextureWrap.repeat:"y"==i?m.vWrap=g.Atlas.TextureWrap.repeat:"xy"==i&&(m.uWrap=m.vWrap=g.Atlas.TextureWrap.repeat),d(e,function(e){m.rendererObject=e,b.pages.push(m),m.width&&m.height||(m.width=e.width,m.height=e.height,m.width&&m.height||console.log("ERROR spine atlas page "+m.name+": meshes wont work if you dont specify size in atlas (http://www.html5gamedevs.com/topic/18888-pixi-spines-and-meshes/?p=107121)")),p()});break}var a=new g.AtlasRegion;a.name=e,a.page=m,a.rotate="true"==l.readValue(),l.readTuple(T);var o=parseInt(T[0]),s=parseInt(T[1]);l.readTuple(T);var u=parseInt(T[0]),c=parseInt(T[1]);a.u=o/m.width,a.v=s/m.height,a.rotate?(a.u2=(o+c)/m.width,a.v2=(s+u)/m.height):(a.u2=(o+u)/m.width,a.v2=(s+c)/m.height);var f=m.rendererObject.resolution;a.x=o/f,a.y=s/f,a.width=n(u)/f,a.height=n(c)/f,4==l.readTuple(T)&&(a.splits=[parseInt(T[0]),parseInt(T[1]),parseInt(T[2]),parseInt(T[3])],4==l.readTuple(T)&&(a.pads=[parseInt(T[0]),parseInt(T[1]),parseInt(T[2]),parseInt(T[3])],l.readTuple(T))),a.originalWidth=parseInt(T[0])/f,a.originalHeight=parseInt(T[1])/f,l.readTuple(T),a.offsetX=parseInt(T[0])/f,a.offsetY=parseInt(T[1])/f,a.index=parseInt(l.readValue()),b.regions.push(a)}else m=null}}if("function"!=typeof d){var t=d,r=_;d=i(t,r),_=null}this.pages=[],this.regions=[],this.texturesLoading=0;var b=this,l=new g.AtlasReader(a),T=[];T.length=4;var m=null;p()},g.Atlas.prototype={findRegion:function(r){for(var t=this.regions,e=0,a=t.length;a>e;e++)if(t[e].name==r)return t[e];return null},dispose:function(){for(var r=this.pages,t=0,a=r.length;a>t;t++)r[t].rendererObject.destroy(!0)},updateUVs:function(r){for(var t=this.regions,e=0,o=t.length,i;o>e;e++)i=t[e],i.page==r&&(i.u=i.x/r.width,i.v=i.y/r.height,i.rotate?(i.u2=(i.x+i.height)/r.width,i.v2=(i.y+i.width)/r.height):(i.u2=(i.x+i.width)/r.width,i.v2=(i.y+i.height)/r.height))}},g.Atlas.Format={alpha:0,intensity:1,luminanceAlpha:2,rgb565:3,rgba4444:4,rgb888:5,rgba8888:6},g.Atlas.TextureFilter={nearest:0,linear:1,mipMap:2,mipMapNearestNearest:3,mipMapLinearNearest:4,mipMapNearestLinear:5,mipMapLinearLinear:6},g.Atlas.TextureWrap={mirroredRepeat:0,clampToEdge:1,repeat:2},t.exports=g.Atlas},{"../SpineUtil":42,"../loaders/syncImageLoaderAdapter.js":48,"./AtlasPage":7,"./AtlasReader":8,"./AtlasRegion":9}],6:[function(r,t){var o=r("../SpineUtil");o.RegionAttachment=r("./RegionAttachment"),o.MeshAttachment=r("./MeshAttachment"),o.SkinnedMeshAttachment=r("./SkinnedMeshAttachment"),o.BoundingBoxAttachment=r("./BoundingBoxAttachment"),o.AtlasAttachmentParser=function(e){this.atlas=e},o.AtlasAttachmentParser.prototype={newRegionAttachment:function(i,t,e){var n=this.atlas.findRegion(e);if(!n)throw"Region not found in atlas: "+e+" (region attachment: "+t+")";var a=new o.RegionAttachment(t);return a.rendererObject=n,a.setUVs(n.u,n.v,n.u2,n.v2,n.rotate),a.regionOffsetX=n.offsetX,a.regionOffsetY=n.offsetY,a.regionWidth=n.width,a.regionHeight=n.height,a.regionOriginalWidth=n.originalWidth,a.regionOriginalHeight=n.originalHeight,a},newMeshAttachment:function(i,t,e){var n=this.atlas.findRegion(e);if(!n)throw"Region not found in atlas: "+e+" (mesh attachment: "+t+")";var a=new o.MeshAttachment(t);return a.rendererObject=n,a.regionU=n.u,a.regionV=n.v,a.regionU2=n.u2,a.regionV2=n.v2,a.regionRotate=n.rotate,a.regionOffsetX=n.offsetX,a.regionOffsetY=n.offsetY,a.regionWidth=n.width,a.regionHeight=n.height,a.regionOriginalWidth=n.originalWidth,a.regionOriginalHeight=n.originalHeight,a},newSkinnedMeshAttachment:function(i,t,e){var n=this.atlas.findRegion(e);if(!n)throw"Region not found in atlas: "+e+" (skinned mesh attachment: "+t+")";var a=new o.SkinnedMeshAttachment(t);return a.rendererObject=n,a.regionU=n.u,a.regionV=n.v,a.regionU2=n.u2,a.regionV2=n.v2,a.regionRotate=n.rotate,a.regionOffsetX=n.offsetX,a.regionOffsetY=n.offsetY,a.regionWidth=n.width,a.regionHeight=n.height,a.regionOriginalWidth=n.originalWidth,a.regionOriginalHeight=n.originalHeight,a},newBoundingBoxAttachment:function(r,t){return new o.BoundingBoxAttachment(t)}},t.exports=o.AtlasAttachmentParser},{"../SpineUtil":42,"./BoundingBoxAttachment":14,"./MeshAttachment":27,"./RegionAttachment":28,"./SkinnedMeshAttachment":36}],7:[function(r,t){var e=r("../SpineUtil");e.AtlasPage=function(){},e.AtlasPage.prototype={name:null,format:null,minFilter:null,magFilter:null,uWrap:null,vWrap:null,rendererObject:null,width:0,height:0},t.exports=e.AtlasPage},{"../SpineUtil":42}],8:[function(r,t){var e=r("../SpineUtil");e.AtlasReader=function(e){this.lines=e.split(/\r\n|\r|\n/)},e.AtlasReader.prototype={index:0,trim:function(e){return e.replace(/^\s+|\s+$/g,"")},readLine:function(){return this.index>=this.lines.length?null:this.lines[this.index++]},readValue:function(){var r=this.readLine(),t=r.indexOf(":");if(-1==t)throw"Invalid line: "+r;return this.trim(r.substring(t+1))},readTuple:function(o){var t=this.readLine(),e=t.indexOf(":");if(-1==e)throw"Invalid line: "+t;for(var n=0,s=e+1,l;3>n&&(l=t.indexOf(",",s),-1!=l);n++)o[n]=this.trim(t.substr(s,l-s)),s=l+1;return o[n]=this.trim(t.substring(s)),n+1}},t.exports=e.AtlasReader},{"../SpineUtil":42}],9:[function(r,t){var e=r("../SpineUtil");e.AtlasRegion=function(){},e.AtlasRegion.prototype={page:null,name:null,x:0,y:0,width:0,height:0,u:0,v:0,u2:0,v2:0,offsetX:0,offsetY:0,originalWidth:0,originalHeight:0,index:0,rotate:!1,splits:null,pads:null},t.exports=e.AtlasRegion},{"../SpineUtil":42}],10:[function(r,t){var a=r("../SpineUtil");a.Curves=r("./Curves"),a.Animation=r("./Animation"),a.AttachmentTimeline=function(e){this.curves=new a.Curves(e),this.frames=[],this.frames.length=e,this.attachmentNames=[],this.attachmentNames.length=e},a.AttachmentTimeline.prototype={slotIndex:0,getFrameCount:function(){return this.frames.length},setFrame:function(r,t,e){this.frames[r]=t,this.attachmentNames[r]=e},apply:function(r,t,i){var n=this.frames;if(i<n[0])return void(t>i&&this.apply(r,t,Number.MAX_VALUE,null,0));t>i&&(t=-1);var o=i>=n[n.length-1]?n.length-1:a.Animation.binarySearch1(n,i)-1;if(!(n[o]<t)){var s=this.attachmentNames[o];r.slots[this.slotIndex].setAttachment(s?r.getAttachmentBySlotIndex(this.slotIndex,s):null)}}},t.exports=a.AttachmentTimeline},{"../SpineUtil":42,"./Animation":2,"./Curves":16}],11:[function(r,t){var e=r("../SpineUtil");e.AttachmentType={region:0,boundingbox:1,mesh:2,skinnedmesh:3},t.exports=e.AttachmentType},{"../SpineUtil":42}],12:[function(r,t){var d=r("../SpineUtil");d.Bone=function(r,t,e){this.data=r,this.skeleton=t,this.parent=e,this.setToSetupPose()},d.Bone.yDown=!1,d.Bone.prototype={x:0,y:0,rotation:0,rotationIK:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,m00:0,m01:0,worldX:0,m10:0,m11:0,worldY:0,worldRotation:0,worldScaleX:1,worldScaleY:1,worldFlipX:!1,worldFlipY:!1,updateWorldTransform:function(){var i=this.parent;if(i)this.worldX=this.x*i.m00+this.y*i.m01+i.worldX,this.worldY=this.x*i.m10+this.y*i.m11+i.worldY,this.data.inheritScale?(this.worldScaleX=i.worldScaleX*this.scaleX,this.worldScaleY=i.worldScaleY*this.scaleY):(this.worldScaleX=this.scaleX,this.worldScaleY=this.scaleY),this.worldRotation=this.data.inheritRotation?i.worldRotation+this.rotationIK:this.rotationIK,this.worldFlipX=i.worldFlipX!=this.flipX,this.worldFlipY=i.worldFlipY!=this.flipY;else{var t=this.skeleton.flipX,e=this.skeleton.flipY;this.worldX=t?-this.x:this.x,this.worldY=e==d.Bone.yDown?this.y:-this.y,this.worldScaleX=this.scaleX,this.worldScaleY=this.scaleY,this.worldRotation=this.rotationIK,this.worldFlipX=t!=this.flipX,this.worldFlipY=e!=this.flipY}var n=this.worldRotation*d.degRad,a=Math.cos(n),r=Math.sin(n);this.worldFlipX?(this.m00=-a*this.worldScaleX,this.m01=r*this.worldScaleY):(this.m00=a*this.worldScaleX,this.m01=-r*this.worldScaleY),this.worldFlipY==d.Bone.yDown?(this.m10=r*this.worldScaleX,this.m11=a*this.worldScaleY):(this.m10=-r*this.worldScaleX,this.m11=-a*this.worldScaleY)},setToSetupPose:function(){var e=this.data;this.x=e.x,this.y=e.y,this.rotation=e.rotation,this.rotationIK=this.rotation,this.scaleX=e.scaleX,this.scaleY=e.scaleY,this.flipX=e.flipX,this.flipY=e.flipY},worldToLocal:function(i){var t=i[0]-this.worldX,e=i[1]-this.worldY,n=this.m00,u=this.m10,r=this.m01,o=this.m11;this.worldFlipX!=(this.worldFlipY!=d.Bone.yDown)&&(n=-n,o=-o);var p=1/(n*o-r*u);i[0]=t*n*p-e*r*p,i[1]=e*o*p-t*u*p},localToWorld:function(r){var t=r[0],e=r[1];r[0]=t*this.m00+e*this.m01+this.worldX,r[1]=t*this.m10+e*this.m11+this.worldY}},t.exports=d.Bone},{"../SpineUtil":42}],13:[function(r,t){var e=r("../SpineUtil");e.BoneData=function(r,t){this.name=r,this.parent=t},e.BoneData.prototype={length:0,x:0,y:0,rotation:0,scaleX:1,scaleY:1,inheritScale:!0,inheritRotation:!0,flipX:!1,flipY:!1},t.exports=e.BoneData},{"../SpineUtil":42}],14:[function(r,t){var e=r("../SpineUtil");e.AttachmentType=r("./AttachmentType"),e.BoundingBoxAttachment=function(e){this.name=e,this.vertices=[]},e.BoundingBoxAttachment.prototype={type:e.AttachmentType.boundingbox,computeWorldVertices:function(d,p,c,n){d+=c.worldX,p+=c.worldY;for(var i=c.m00,a=c.m01,r=c.m10,o=c.m11,s=this.vertices,l=0,g=s.length;g>l;l+=2){var m=s[l],u=s[l+1];n[l]=m*i+u*a+d,n[l+1]=m*r+u*o+p}}},t.exports=e.BoundingBoxAttachment},{"../SpineUtil":42,"./AttachmentType":11}],15:[function(r,t){var e=r("../SpineUtil");e.Animation=r("./Animation"),e.Curves=r("./Curves"),e.ColorTimeline=function(r){this.curves=new e.Curves(r),this.frames=[],this.frames.length=5*r},e.ColorTimeline.prototype={slotIndex:0,getFrameCount:function(){return this.frames.length/5},setFrame:function(o,s,e,n,i,a){o*=5,this.frames[o]=s,this.frames[o+1]=e,this.frames[o+2]=n,this.frames[o+3]=i,this.frames[o+4]=a},apply:function(i,t,_,n,a){var r=this.frames;if(!(_<r[0])){var o,b,T,E;if(_>=r[r.length-5]){var C=r.length-1;o=r[C-3],b=r[C-2],T=r[C-1],E=r[C]}else{var u=e.Animation.binarySearch(r,_,5),f=r[u-4],c=r[u-3],p=r[u-2],d=r[u-1],g=r[u],v=1-(_-g)/(r[u-5]-g);v=this.curves.getCurvePercent(u/5-1,v),o=f+(r[u+1]-f)*v,b=c+(r[u+2]-c)*v,T=p+(r[u+3]-p)*v,E=d+(r[u+4]-d)*v}var P=i.slots[this.slotIndex];1>a?(P.r+=(o-P.r)*a,P.g+=(b-P.g)*a,P.b+=(T-P.b)*a,P.a+=(E-P.a)*a):(P.r=o,P.g=b,P.b=T,P.a=E)}}},t.exports=e.ColorTimeline},{"../SpineUtil":42,"./Animation":2,"./Curves":16}],16:[function(r,t){var e=r("../SpineUtil");e.Curves=function(){this.curves=[]},e.Curves.prototype={setLinear:function(e){this.curves[19*e]=0},setStepped:function(e){this.curves[19*e]=1},setCurve:function(_,t,e,n,i){var a=.1,r=a*a,o=r*a,s=3*a,l=3*r,E=6*r,m=6*o,u=2*-t+n,f=2*-e+i,c=3*(t-n)+1,p=3*(e-i)+1,d=t*s+u*l+c*o,P=e*s+f*l+p*o,M=u*E+c*m,R=f*E+p*m,O=19*_,I=this.curves;I[O++]=2;for(var T=d,D=P,L=O+19-1;L>O;O+=2)I[O]=T,I[O+1]=D,d+=M,P+=R,M+=c*m,R+=p*m,T+=d,D+=P},getCurvePercent:function(d,t){t=0>t?0:1<t?1:t;var u=this.curves,n=19*d,p=u[n];if(0===p)return t;if(1==p)return 0;n++;for(var a=0,c=n,o=n+19-1;o>n;n+=2)if(a=u[n],a>=t){var s,f;return n==c?(s=0,f=0):(s=u[n-2],f=u[n-1]),f+(u[n+1]-f)*(t-s)/(a-s)}var g=u[n-1];return g+(1-g)*(t-a)/(1-a)}},t.exports=e.Curves},{"../SpineUtil":42}],17:[function(r,t){var e=r("../SpineUtil");e.Animation=r("./Animation"),e.DrawOrderTimeline=function(e){this.frames=[],this.frames.length=e,this.drawOrders=[],this.drawOrders.length=e},e.DrawOrderTimeline.prototype={getFrameCount:function(){return this.frames.length},setFrame:function(r,t,e){this.frames[r]=t,this.drawOrders[r]=e},apply:function(r,t,a){var n=this.frames;if(!(a<n[0])){var o=a>=n[n.length-1]?n.length-1:e.Animation.binarySearch1(n,a)-1;var i=r.drawOrder,s=(r.slots,this.drawOrders[o]);if(s)for(var l=0,d=s.length;d>l;l++)i[l]=s[l]}}},t.exports=e.DrawOrderTimeline},{"../SpineUtil":42,"./Animation":2}],18:[function(r,t){var e=r("../SpineUtil");e.Event=function(e){this.data=e},e.Event.prototype={intValue:0,floatValue:0,stringValue:null},t.exports=e.Event},{"../SpineUtil":42}],19:[function(r,t){var e=r("../SpineUtil");e.EventData=function(e){this.name=e},e.EventData.prototype={intValue:0,floatValue:0,stringValue:null},t.exports=e.EventData},{"../SpineUtil":42}],20:[function(r,t){var n=r("../SpineUtil");n.Animation=r("./Animation"),n.EventTimeline=function(e){this.frames=[],this.frames.length=e,this.events=[],this.events.length=e},n.EventTimeline.prototype={getFrameCount:function(){return this.frames.length},setFrame:function(r,t,e){this.frames[r]=t,this.events[r]=e},apply:function(i,t,d,u,a){if(u){var r=this.frames,o=r.length;if(t>d)this.apply(i,t,Number.MAX_VALUE,u,a),t=-1;else if(t>=r[o-1])return;if(!(d<r[0])){var s;if(t<r[0])s=0;else{s=n.Animation.binarySearch1(r,t);for(var p=r[s];0<s&&r[s-1]==p;)s--}for(var c=this.events;o>s&&d>=r[s];s++)u.push(c[s])}}}},t.exports=n.EventTimeline},{"../SpineUtil":42,"./Animation":2}],21:[function(r,t){var e=r("../SpineUtil");e.Animation=r("./Animation"),e.Curves=r("./Curves"),e.FfdTimeline=function(r){this.curves=new e.Curves(r),this.frames=[],this.frames.length=r,this.frameVertices=[],this.frameVertices.length=r},e.FfdTimeline.prototype={slotIndex:0,attachment:0,getFrameCount:function(){return this.frames.length},setFrame:function(r,t,e){this.frames[r]=t,this.frameVertices[r]=e},apply:function(i,t,_,n,a){var b=i.slots[this.slotIndex];if(b.attachment==this.attachment){var o=this.frames;if(!(_<o[0])){var s=this.frameVertices,l=s[0].length,T=b.attachmentVertices;if(T.length!=l){T=b.attachmentVertices=[];for(var E=0;l>E;E++)T.push(0);a=1}if(_>=o[o.length-1]){var C=s[o.length-1];if(1>a)for(var f=0;l>f;f++)T[f]+=(C[f]-T[f])*a;else for(var f=0;l>f;f++)T[f]=C[f]}else{var P=e.Animation.binarySearch1(o,_),p=o[P],d=1-(_-p)/(o[P-1]-p);d=this.curves.getCurvePercent(P-1,0>d?0:1<d?1:d);var M=s[P-1],v=s[P];if(1>a)for(var f=0,A;l>f;f++)A=M[f],T[f]+=(A+(v[f]-A)*d-T[f])*a;else for(var f=0,A;l>f;f++)A=M[f],T[f]=A+(v[f]-A)*d}}}}},t.exports=e.FfdTimeline},{"../SpineUtil":42,"./Animation":2,"./Curves":16}],22:[function(r,t){var a=r("../SpineUtil");a.Animation=r("./Animation"),a.Curves=r("./Curves"),a.FlipXTimeline=function(e){this.curves=new a.Curves(e),this.frames=[],this.frames.length=2*e},a.FlipXTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/2},setFrame:function(r,a,e){r*=2,this.frames[r]=a,this.frames[r+1]=e?1:0},apply:function(r,t,i){var n=this.frames;if(i<n[0])return void(t>i&&this.apply(r,t,Number.MAX_VALUE,null,0));t>i&&(t=-1);var o=(i>=n[n.length-2]?n.length:a.Animation.binarySearch(n,i,2))-2;n[o]<t||(r.bones[this.boneIndex].flipX=0!=n[o+1])}},t.exports=a.FlipXTimeline},{"../SpineUtil":42,"./Animation":2,"./Curves":16}],23:[function(r,t){var a=r("../SpineUtil");a.Animation=r("./Animation"),a.Curves=r("./Curves"),a.FlipYTimeline=function(e){this.curves=new a.Curves(e),this.frames=[],this.frames.length=2*e},a.FlipYTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/2},setFrame:function(r,a,e){r*=2,this.frames[r]=a,this.frames[r+1]=e?1:0},apply:function(r,t,i){var n=this.frames;if(i<n[0])return void(t>i&&this.apply(r,t,Number.MAX_VALUE,null,0));t>i&&(t=-1);var o=(i>=n[n.length-2]?n.length:a.Animation.binarySearch(n,i,2))-2;n[o]<t||(r.bones[this.boneIndex].flipY=0!=n[o+1])}},t.exports=a.FlipYTimeline},{"../SpineUtil":42,"./Animation":2,"./Curves":16}],24:[function(r,t){var _=Math.atan2,E=r("../SpineUtil");E.IkConstraint=function(r,t){this.data=r,this.mix=r.mix,this.bendDirection=r.bendDirection,this.bones=[];for(var e=0,a=r.bones.length;a>e;e++)this.bones.push(t.findBone(r.bones[e].name));this.target=t.findBone(r.target.name)},E.IkConstraint.prototype={apply:function(){var r=this.target,t=this.bones;switch(t.length){case 1:E.IkConstraint.apply1(t[0],r.worldX,r.worldY,this.mix);break;case 2:E.IkConstraint.apply2(t[0],t[1],r.worldX,r.worldY,this.bendDirection,this.mix);}}},E.IkConstraint.apply1=function(i,t,e,n){var a=i.data.inheritRotation&&i.parent?i.parent.worldRotation:0,r=i.rotation,o=(E.Bone.yDown?-E.radDeg:E.radDeg)*_(e-i.worldY,t-i.worldX)-a;i.rotationIK=r+(o-r)*n},E.IkConstraint.apply2=function(i,t,e,C,P,r){var o=t.rotation,s=i.rotation;if(!r)return t.rotationIK=o,void(i.rotationIK=s);var l=E.temp,u=i.parent,f,M;u?(l[0]=e,l[1]=C,u.worldToLocal(l),e=(l[0]-i.x)*u.worldScaleX,C=(l[1]-i.y)*u.worldScaleY):(e-=i.x,C-=i.y),t.parent==i?(f=t.x,M=t.y):(l[0]=t.x,l[1]=t.y,t.parent.localToWorld(l),i.worldToLocal(l),f=l[0],M=l[1]);var R=f*i.worldScaleX,c=M*i.worldScaleY,p=_(c,R),d=Math.sqrt(R*R+c*c),g=t.data.length*t.worldScaleX,v=2*d*g;if(1e-4>v)return void(t.rotationIK=o+(_(C,e)*E.radDeg-s-o)*r);var A=(e*e+C*C-d*d-g*g)/v;-1>A?A=-1:1<A&&(A=1);var O=Math.acos(A)*P,I=d+g*A,D=g*Math.sin(O),L=_(C*I-e*D,e*I+C*D),T=(L-p)*E.radDeg-s;180<T?T-=360:-180>T&&(T+=360),i.rotationIK=s+T*r,T=(O+p)*E.radDeg-o,180<T?T-=360:-180>T&&(T+=360),t.rotationIK=o+(T+i.worldRotation-t.parent.worldRotation)*r},t.exports=E.IkConstraint},{"../SpineUtil":42}],25:[function(r,t){var e=r("../SpineUtil")||{};e.IkConstraintData=function(e){this.name=e,this.bones=[]},e.IkConstraintData.prototype={target:null,bendDirection:1,mix:1},t.exports=e.IkConstraintData},{"../SpineUtil":42}],26:[function(r,t){var e=r("../SpineUtil")||{};e.Animation=r("./Animation"),e.Curves=r("./Curves"),e.IkConstraintTimeline=function(r){this.curves=new e.Curves(r),this.frames=[],this.frames.length=3*r},e.IkConstraintTimeline.prototype={ikConstraintIndex:0,getFrameCount:function(){return this.frames.length/3},setFrame:function(r,a,e,n){r*=3,this.frames[r]=a,this.frames[r+1]=e,this.frames[r+2]=n},apply:function(i,t,d,n,a){var r=this.frames;if(!(d<r[0])){var o=i.ikConstraints[this.ikConstraintIndex];if(d>=r[r.length-3])return o.mix+=(r[r.length-2]-o.mix)*a,void(o.bendDirection=r[r.length-1]);var s=e.Animation.binarySearch(r,d,3),l=r[s+-2],p=r[s],c=1-(d-p)/(r[s+-3]-p);c=this.curves.getCurvePercent(s/3-1,c);var g=l+(r[s+1]-l)*c;o.mix+=(g-o.mix)*a,o.bendDirection=r[s+-1]}}},t.exports=e.IkConstraintTimeline},{"../SpineUtil":42,"./Animation":2,"./Curves":16}],27:[function(r,t){var o=r("../SpineUtil")||{};o.AttachmentType=r("./AttachmentType"),o.MeshAttachment=function(e){this.name=e},o.MeshAttachment.prototype={type:o.AttachmentType.mesh,vertices:null,uvs:null,regionUVs:null,triangles:null,hullLength:0,r:1,g:1,b:1,a:1,path:null,rendererObject:null,regionU:0,regionV:0,regionU2:0,regionV2:0,regionRotate:!1,regionOffsetX:0,regionOffsetY:0,regionWidth:0,regionHeight:0,regionOriginalWidth:0,regionOriginalHeight:0,edges:null,width:0,height:0,updateUVs:function(){var r=this.regionU2-this.regionU,t=this.regionV2-this.regionV,e=this.regionUVs.length;if(this.uvs&&this.uvs.length==e||(this.uvs=new o.Float32Array(e)),this.regionRotate)for(var n=0;e>n;n+=2)this.uvs[n]=this.regionU+this.regionUVs[n+1]*r,this.uvs[n+1]=this.regionV+t-this.regionUVs[n]*t;else for(var n=0;e>n;n+=2)this.uvs[n]=this.regionU+this.regionUVs[n]*r,this.uvs[n+1]=this.regionV+this.regionUVs[n+1]*t},computeWorldVertices:function(d,p,g,n){var i=g.bone;d+=i.worldX,p+=i.worldY;var a=i.m00,r=i.m01,o=i.m10,s=i.m11,l=this.vertices,_=l.length;g.attachmentVertices.length==_&&(l=g.attachmentVertices);for(var m=0;_>m;m+=2){var b=l[m],f=l[m+1];n[m]=b*a+f*r+d,n[m+1]=b*o+f*s+p}}},t.exports=o.MeshAttachment},{"../SpineUtil":42,"./AttachmentType":11}],28:[function(r,t){var _=r("../SpineUtil");_.AttachmentType=r("./AttachmentType"),_.RegionAttachment=function(e){this.name=e,this.offset=[],this.offset.length=8,this.uvs=[],this.uvs.length=8},_.RegionAttachment.prototype={type:_.AttachmentType.region,x:0,y:0,rotation:0,scaleX:1,scaleY:1,width:0,height:0,r:1,g:1,b:1,a:1,path:null,rendererObject:null,regionOffsetX:0,regionOffsetY:0,regionWidth:0,regionHeight:0,regionOriginalWidth:0,regionOriginalHeight:0,setUVs:function(o,t,e,n,i){var a=this.uvs;i?(a[2]=o,a[3]=n,a[4]=o,a[5]=t,a[6]=e,a[7]=t,a[0]=e,a[1]=n):(a[0]=o,a[1]=n,a[2]=o,a[3]=t,a[4]=e,a[5]=t,a[6]=e,a[7]=n)},updateOffset:function(){var i=this.width/this.regionOriginalWidth*this.scaleX,t=this.height/this.regionOriginalHeight*this.scaleY,e=-this.width/2*this.scaleX+this.regionOffsetX*i,n=-this.height/2*this.scaleY+this.regionOffsetY*t,a=e+this.regionWidth*i,r=n+this.regionHeight*t,o=this.rotation*_.degRad,s=Math.cos(o),l=Math.sin(o),b=e*s+this.x,m=e*l,u=n*s+this.y,f=n*l,c=a*s+this.x,p=a*l,d=r*s+this.y,g=r*l,T=this.offset;T[0]=b-f,T[1]=u+m,T[2]=b-g,T[3]=d+m,T[4]=c-g,T[5]=d+p,T[6]=c-f,T[7]=u+p},computeVertices:function(d,u,p,n){d+=p.worldX,u+=p.worldY;var i=p.m00,a=p.m01,r=p.m10,o=p.m11,s=this.offset;n[0]=s[0]*i+s[1]*a+d,n[1]=s[0]*r+s[1]*o+u,n[2]=s[2]*i+s[3]*a+d,n[3]=s[2]*r+s[3]*o+u,n[4]=s[4]*i+s[5]*a+d,n[5]=s[4]*r+s[5]*o+u,n[6]=s[6]*i+s[7]*a+d,n[7]=s[6]*r+s[7]*o+u}},t.exports=_.RegionAttachment},{"../SpineUtil":42,"./AttachmentType":11}],29:[function(r,t){var e=r("../SpineUtil")||{};e.Animation=r("./Animation"),e.Curves=r("./Curves"),e.RotateTimeline=function(r){this.curves=new e.Curves(r),this.frames=[],this.frames.length=2*r},e.RotateTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/2},setFrame:function(r,a,e){r*=2,this.frames[r]=a,this.frames[r+1]=e},apply:function(i,t,d,n,a){var r=this.frames;if(!(d<r[0])){var o=i.bones[this.boneIndex];if(d>=r[r.length-2]){for(var s=o.data.rotation+r[r.length-1]-o.rotation;180<s;)s-=360;for(;-180>s;)s+=360;return void(o.rotation+=s*a)}var p=e.Animation.binarySearch(r,d,2),c=r[p-1],g=r[p],u=1-(d-g)/(r[p-2]-g);u=this.curves.getCurvePercent(p/2-1,u);for(var s=r[p+1]-c;180<s;)s-=360;for(;-180>s;)s+=360;for(s=o.data.rotation+(c+s*u)-o.rotation;180<s;)s-=360;for(;-180>s;)s+=360;o.rotation+=s*a}}},t.exports=e.RotateTimeline},{"../SpineUtil":42,"./Animation":2,"./Curves":16}],30:[function(r,t){var e=r("../SpineUtil");e.Animation=r("./Animation"),e.Curves=r("./Curves"),e.ScaleTimeline=function(r){this.curves=new e.Curves(r),this.frames=[],this.frames.length=3*r},e.ScaleTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/3},setFrame:function(r,a,e,n){r*=3,this.frames[r]=a,this.frames[r+1]=e,this.frames[r+2]=n},apply:function(i,t,d,n,a){var r=this.frames;if(!(d<r[0])){var o=i.bones[this.boneIndex];if(d>=r[r.length-3])return o.scaleX+=(o.data.scaleX*r[r.length-2]-o.scaleX)*a,void(o.scaleY+=(o.data.scaleY*r[r.length-1]-o.scaleY)*a);var s=e.Animation.binarySearch(r,d,3),l=r[s-2],p=r[s-1],c=r[s],u=1-(d-c)/(r[s+-3]-c);u=this.curves.getCurvePercent(s/3-1,u),o.scaleX+=(o.data.scaleX*(l+(r[s+1]-l)*u)-o.scaleX)*a,o.scaleY+=(o.data.scaleY*(p+(r[s+2]-p)*u)-o.scaleY)*a}}},t.exports=e.ScaleTimeline},{"../SpineUtil":42,"./Animation":2,"./Curves":16}],31:[function(r,t){var d=r("../SpineUtil");d.Bone=r("./Bone"),d.Slot=r("./Slot"),d.IkConstraint=r("./IkConstraint"),d.Skeleton=function(i){this.data=i,this.bones=[];for(var t=0,u=i.bones.length;u>t;t++){var p=i.bones[t],a=p.parent?this.bones[i.bones.indexOf(p.parent)]:null;this.bones.push(new d.Bone(p,this,a))}this.slots=[],this.drawOrder=[];for(var t=0,u=i.slots.length;u>t;t++){var r=i.slots[t],o=this.bones[i.bones.indexOf(r.boneData)],s=new d.Slot(r,o);this.slots.push(s),this.drawOrder.push(t)}this.ikConstraints=[];for(var t=0,u=i.ikConstraints.length;u>t;t++)this.ikConstraints.push(new d.IkConstraint(i.ikConstraints[t],this));this.boneCache=[],this.updateCache()},d.Skeleton.prototype={x:0,y:0,skin:null,r:1,g:1,b:1,a:1,time:0,flipX:!1,flipY:!1,updateCache:function(){var d=this.ikConstraints,t=d.length,e=t+1,n=this.boneCache;n.length>e&&(n.length=e);for(var i=0,p=n.length;p>i;i++)n[i].length=0;for(;n.length<e;)n[n.length]=[];var g=n[0],o=this.bones;t:for(var i=0,p=o.length;p>i;i++){var s=o[i],l=s;do{for(var _=0;t>_;_++)for(var b=d[_],u=b.bones[0],f=b.bones[b.bones.length-1];;){if(l==f){n[_].push(s),n[_+1].push(s);continue t}if(f==u)break;f=f.parent}l=l.parent}while(l);g[g.length]=s}},updateWorldTransform:function(){for(var l=this.bones,t=0,d=l.length,n;d>t;t++)n=l[t],n.rotationIK=n.rotation;for(var t=0,u=this.boneCache.length-1;;){for(var a=this.boneCache[t],r=0,p=a.length;p>r;r++)a[r].updateWorldTransform();if(t==u)break;this.ikConstraints[t].apply(),t++}},setToSetupPose:function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()},setBonesToSetupPose:function(){for(var r=this.bones,t=0,o=r.length;o>t;t++)r[t].setToSetupPose();for(var s=this.ikConstraints,t=0,o=s.length,i;o>t;t++)i=s[t],i.bendDirection=i.data.bendDirection,i.mix=i.data.mix},setSlotsToSetupPose:function(){for(var r=this.slots,t=0,a=r.length;a>t;t++)r[t].setToSetupPose(t);this.resetDrawOrder()},getRootBone:function(){return this.bones.length?this.bones[0]:null},findBone:function(r){for(var t=this.bones,e=0,a=t.length;a>e;e++)if(t[e].data.name==r)return t[e];return null},findBoneIndex:function(r){for(var t=this.bones,e=0,a=t.length;a>e;e++)if(t[e].data.name==r)return e;return-1},findSlot:function(r){for(var t=this.slots,e=0,a=t.length;a>e;e++)if(t[e].data.name==r)return t[e];return null},findSlotIndex:function(r){for(var t=this.slots,e=0,a=t.length;a>e;e++)if(t[e].data.name==r)return e;return-1},setSkinByName:function(r){var t=this.data.findSkin(r);if(!t)throw"Skin not found: "+r;this.setSkin(t)},setSkin:function(s){if(s)if(this.skin)s._attachAll(this,this.skin);else for(var t=this.slots,e=0,l=t.length;l>e;e++){var i=t[e],a=i.data.attachmentName;if(a){var r=s.getAttachment(e,a);r&&i.setAttachment(r)}}this.skin=s},getAttachmentBySlotName:function(r,t){return this.getAttachmentBySlotIndex(this.data.findSlotIndex(r),t)},getAttachmentBySlotIndex:function(r,t){if(this.skin){var e=this.skin.getAttachment(r,t);if(e)return e}return this.data.defaultSkin?this.data.defaultSkin.getAttachment(r,t):null},setAttachment:function(s,t){for(var e=this.slots,n=0,l=e.length,a;l>n;n++)if(a=e[n],a.data.name==s){var d=null;if(t&&(d=this.getAttachmentBySlotIndex(n,t),!d))throw"Attachment not found: "+t+", for slot: "+s;return void a.setAttachment(d)}throw"Slot not found: "+s},findIkConstraint:function(r){for(var t=this.ikConstraints,e=0,a=t.length;a>e;e++)if(t[e].data.name==r)return t[e];return null},update:function(e){this.time+=e},resetDrawOrder:function(){for(var r=0,n=this.drawOrder.length;n>r;r++)this.drawOrder[r]=r}},t.exports=d.Skeleton},{"../SpineUtil":42,"./Bone":12,"./IkConstraint":24,"./Slot":37}],32:[function(r,t){var o=Math.min,d=Math.max,u=r("../SpineRuntime")||{};u.AttachmentType=r("./AttachmentType"),u.SkeletonBounds=function(){this.polygonPool=[],this.polygons=[],this.boundingBoxes=[]},u.SkeletonBounds.prototype={minX:0,minY:0,maxX:0,maxY:0,update:function(i,t){var e=i.slots,n=e.length,a=i.x,r=i.y,o=this.boundingBoxes,s=this.polygonPool,l=this.polygons;o.length=0;for(var g=0,_=l.length;_>g;g++)s.push(l[g]);l.length=0;for(var g=0;n>g;g++){var b=e[g],f=b.attachment;if(f.type==u.AttachmentType.boundingbox){o.push(f);var c=s.length,d;0<c?(d=s[c-1],s.splice(c-1,1)):d=[],l.push(d),d.length=f.vertices.length,f.computeWorldVertices(a,r,b.bone,d)}}t&&this.aabbCompute()},aabbCompute:function(){for(var p=Number.MIN_VALUE,c=Number.MAX_VALUE,f=this.polygons,t=c,g=c,_=p,b=p,T=0,v=f.length;v>T;T++)for(var S=f[T],s=0,E=S.length;E>s;s+=2){var C=S[s],m=S[s+1];t=o(t,C),g=o(g,m),_=d(_,C),b=d(b,m)}this.minX=t,this.minY=g,this.maxX=_,this.maxY=b},aabbContainsPoint:function(r,t){return r>=this.minX&&r<=this.maxX&&t>=this.minY&&t<=this.maxY},aabbIntersectsSegment:function(d,t,e,n){var i=this.minX,a=this.minY,r=this.maxX,o=this.maxY;if(i>=d&&i>=e||a>=t&&a>=n||d>=r&&e>=r||t>=o&&n>=o)return!1;var s=(n-t)/(e-d),l=s*(i-d)+t;if(l>a&&o>l)return!0;if(l=s*(r-d)+t,l>a&&o>l)return!0;var u=(a-t)/s+d;return!!(u>i&&r>u)||(u=(o-t)/s+d,!!(u>i&&r>u))},aabbIntersectsSkeleton:function(e){return this.minX<e.maxX&&this.maxX>e.minX&&this.minY<e.maxY&&this.maxY>e.minY},containsPoint:function(r,t){for(var e=this.polygons,n=0,o=e.length;o>n;n++)if(this.polygonContainsPoint(e[n],r,t))return this.boundingBoxes[n];return null},intersectsSegment:function(s,t,e,n){for(var i=this.polygons,a=0,l=i.length;l>a;a++)if(i[a].intersectsSegment(s,t,e,n))return this.boundingBoxes[a];return null},polygonContainsPoint:function(d,t,e){for(var n=d.length,i=n-2,u=!1,p=0;n>p;p+=2){var c=d[p+1],s=d[i+1];if(e>c&&s>=e||e>s&&c>=e){var l=d[p];l+(e-c)/(s-c)*(d[i]-l)<t&&(u=!u)}i=p}return u},polygonIntersectsSegment:function(_,t,e,n,i){for(var a=_.length,r=t-n,o=e-i,s=t*i-e*n,l=_[a-2],b=_[a-1],T=0;a>T;T+=2){var E=_[T],f=_[T+1],c=l*f-b*E,p=l-E,d=b-f,g=r*d-o*p,v=(s*p-r*c)/g;if((v>=l&&E>=v||v>=E&&l>=v)&&(v>=t&&n>=v||v>=n&&t>=v)){var C=(s*d-o*c)/g;if((C>=b&&f>=C||C>=f&&b>=C)&&(C>=e&&i>=C||C>=i&&e>=C))return!0}l=E,b=f}return!1},getPolygon:function(r){var t=this.boundingBoxes.indexOf(r);return-1==t?null:this.polygons[t]},getWidth:function(){return this.maxX-this.minX},getHeight:function(){return this.maxY-this.minY}},t.exports=u.SkeletonBounds},{"../SpineRuntime":41,"./AttachmentType":11}],33:[function(r,t){var e=r("../SpineUtil");e.SkeletonData=function(){this.bones=[],this.slots=[],this.skins=[],this.events=[],this.animations=[],this.ikConstraints=[]},e.SkeletonData.prototype={name:null,defaultSkin:null,width:0,height:0,version:null,hash:null,findBone:function(r){for(var t=this.bones,e=0,a=t.length;a>e;e++)if(t[e].name==r)return t[e];return null},findBoneIndex:function(r){for(var t=this.bones,e=0,a=t.length;a>e;e++)if(t[e].name==r)return e;return-1},findSlot:function(r){for(var t=this.slots,e=0,a=t.length;a>e;e++)if(t[e].name==r)return this.slots[e];return null},findSlotIndex:function(r){for(var t=this.slots,e=0,a=t.length;a>e;e++)if(t[e].name==r)return e;return-1},findSkin:function(r){for(var t=this.skins,e=0,a=t.length;a>e;e++)if(t[e].name==r)return t[e];return null},findEvent:function(r){for(var t=this.events,e=0,a=t.length;a>e;e++)if(t[e].name==r)return t[e];return null},findAnimation:function(r){for(var t=this.animations,e=0,a=t.length;a>e;e++)if(t[e].name==r)return t[e];return null},findIkConstraint:function(r){for(var t=this.ikConstraints,e=0,a=t.length;a>e;e++)if(t[e].name==r)return t[e];return null}},t.exports=e.SkeletonData},{"../SpineUtil":42}],34:[function(r,t){var e=Math.max,ee=r("../SpineUtil");ee.SkeletonData=r("./SkeletonData"),ee.BoneData=r("./BoneData"),ee.IkConstraintData=r("./IkConstraintData"),ee.SlotData=r("./SlotData"),ee.Skin=r("./Skin"),ee.EventData=r("./EventData"),ee.AttachmentType=r("./AttachmentType"),ee.ColorTimeline=r("./ColorTimeline"),ee.AttachmentTimeline=r("./AttachmentTimeline"),ee.RotateTimeline=r("./RotateTimeline"),ee.ScaleTimeline=r("./ScaleTimeline"),ee.TranslateTimeline=r("./TranslateTimeline"),ee.FlipXTimeline=r("./FlipXTimeline"),ee.FlipYTimeline=r("./FlipYTimeline"),ee.IkConstraintTimeline=r("./IkConstraintTimeline"),ee.FfdTimeline=r("./FfdTimeline"),ee.DrawOrderTimeline=r("./DrawOrderTimeline"),ee.EventTimeline=r("./EventTimeline"),ee.Event=r("./Event"),ee.Animation=r("./Animation"),ee.SkeletonJsonParser=function(e){this.attachmentLoader=e},ee.SkeletonJsonParser.prototype={scale:1,readSkeletonData:function(i,t){var e=new ee.SkeletonData;e.name=t;var n=i.skeleton;n&&(e.hash=n.hash,e.version=n.spine,e.width=n.width||0,e.height=n.height||0);for(var a=i.bones,_=0,E=a.length;E>_;_++){var R=a[_],l=null;if(R.parent&&(l=e.findBone(R.parent),!l))throw"Parent bone not found: "+R.parent;var L=new ee.BoneData(R.name,l);L.length=(R.length||0)*this.scale,L.x=(R.x||0)*this.scale,L.y=(R.y||0)*this.scale,L.rotation=R.rotation||0,L.scaleX=R.hasOwnProperty("scaleX")?R.scaleX:1,L.scaleY=R.hasOwnProperty("scaleY")?R.scaleY:1,L.inheritScale=!R.hasOwnProperty("inheritScale")||R.inheritScale,L.inheritRotation=!R.hasOwnProperty("inheritRotation")||R.inheritRotation,e.bones.push(L)}var B=i.ik;if(B)for(var _=0,E=B.length;E>_;_++){for(var u=B[_],f=new ee.IkConstraintData(u.name),a=u.bones,c=0,N=a.length,d;N>c;c++){if(d=e.findBone(a[c]),!d)throw"IK bone not found: "+a[c];f.bones.push(d)}if(f.target=e.findBone(u.target),!f.target)throw"Target bone not found: "+u.target;f.bendDirection=!u.hasOwnProperty("bendPositive")||u.bendPositive?1:-1,f.mix=u.hasOwnProperty("mix")?u.mix:1,e.ikConstraints.push(f)}for(var W=i.slots,_=0,E=W.length;E>_;_++){var v=W[_],L=e.findBone(v.bone);if(!L)throw"Slot bone not found: "+v.bone;var A=new ee.SlotData(v.name,L),S=v.color;S&&(A.r=this.toColor(S,0),A.g=this.toColor(S,1),A.b=this.toColor(S,2),A.a=this.toColor(S,3)),A.attachmentName=v.attachment,A.blendMode=v.blend&&ee.SlotData.PIXI_BLEND_MODE_MAP[v.blend]||ee.SlotData.PIXI_BLEND_MODE_MAP.normal,e.slots.push(A)}var G=i.skins;for(var V in G)if(G.hasOwnProperty(V)){var H=G[V],T=new ee.Skin(V);for(var b in H)if(H.hasOwnProperty(b)){var C=e.findSlotIndex(b),k=H[b];for(var I in k)if(k.hasOwnProperty(I)){var D=this.readAttachment(T,I,k[I]);D&&T.addAttachment(C,I,D)}}e.skins.push(T),"default"==T.name&&(e.defaultSkin=T)}var U=i.events;for(var X in U)if(U.hasOwnProperty(X)){var O=U[X],P=new ee.EventData(X);P.intValue=O.int||0,P.floatValue=O.float||0,P.stringValue=O.string||null,e.events.push(P)}var M=i.animations;for(var F in M)M.hasOwnProperty(F)&&this.readAnimation(F,M[F],e);return e},readAttachment:function(i,t,_){t=_.name||t;var n=ee.AttachmentType[_.type||"region"],a=_.path||t,r=this.scale;if(n==ee.AttachmentType.region){var o=this.attachmentLoader.newRegionAttachment(i,t,a);if(!o)return null;o.path=a,o.x=(_.x||0)*r,o.y=(_.y||0)*r,o.scaleX=_.hasOwnProperty("scaleX")?_.scaleX:1,o.scaleY=_.hasOwnProperty("scaleY")?_.scaleY:1,o.rotation=_.rotation||0,o.width=(_.width||0)*r,o.height=(_.height||0)*r;var s=_.color;return s&&(o.r=this.toColor(s,0),o.g=this.toColor(s,1),o.b=this.toColor(s,2),o.a=this.toColor(s,3)),o.updateOffset(),o}if(n==ee.AttachmentType.mesh){var b=this.attachmentLoader.newMeshAttachment(i,t,a);return b?(b.path=a,b.vertices=this.getFloatArray(_,"vertices",r),b.triangles=this.getIntArray(_,"triangles"),b.regionUVs=this.getFloatArray(_,"uvs",1),b.updateUVs(),s=_.color,s&&(b.r=this.toColor(s,0),b.g=this.toColor(s,1),b.b=this.toColor(s,2),b.a=this.toColor(s,3)),b.hullLength=2*(_.hull||0),_.edges&&(b.edges=this.getIntArray(_,"edges")),b.width=(_.width||0)*r,b.height=(_.height||0)*r,b):null}if(n==ee.AttachmentType.skinnedmesh){var b=this.attachmentLoader.newSkinnedMeshAttachment(i,t,a);if(!b)return null;b.path=a;for(var T=this.getFloatArray(_,"uvs",1),m=this.getFloatArray(_,"vertices",1),S=[],f=[],c=0,E=m.length,C;E>c;){C=0|m[c++],f[f.length]=C;for(var P=c+4*C;P>c;)f[f.length]=m[c],S[S.length]=m[c+1]*r,S[S.length]=m[c+2]*r,S[S.length]=m[c+3],c+=4}return b.bones=f,b.weights=S,b.triangles=this.getIntArray(_,"triangles"),b.regionUVs=T,b.updateUVs(),s=_.color,s&&(b.r=this.toColor(s,0),b.g=this.toColor(s,1),b.b=this.toColor(s,2),b.a=this.toColor(s,3)),b.hullLength=2*(_.hull||0),_.edges&&(b.edges=this.getIntArray(_,"edges")),b.width=(_.width||0)*r,b.height=(_.height||0)*r,b}if(n==ee.AttachmentType.boundingbox){for(var v=this.attachmentLoader.newBoundingBoxAttachment(i,t),m=_.vertices,c=0,E=m.length;E>c;c++)v.vertices.push(m[c]*r);return v}throw"Unknown attachment type: "+n},readAnimation:function(i,t,te){var n=[],a=0,re=t.slots;for(var o in re)if(re.hasOwnProperty(o)){var ne=re[o],ae=te.findSlotIndex(o);for(var oe in ne)if(ne.hasOwnProperty(oe)){var ie=ne[oe];if("color"==oe){var se=new ee.ColorTimeline(ie.length);se.slotIndex=ae;for(var le=0,de=0,ue=ie.length;ue>de;de++){var pe=ie[de],ce=pe.color,v=this.toColor(ce,0),A=this.toColor(ce,1),S=this.toColor(ce,2),he=this.toColor(ce,3);se.setFrame(le,pe.time,v,A,S,he),this.readCurve(se,le,pe),le++}n.push(se),a=e(a,se.frames[5*se.getFrameCount()-5])}else{if("attachment"!=oe)throw"Invalid timeline type for a slot: "+oe+" ("+o+")";var se=new ee.AttachmentTimeline(ie.length);se.slotIndex=ae;for(var le=0,de=0,ue=ie.length,pe;ue>de;de++)pe=ie[de],se.setFrame(le++,pe.time,pe.name);n.push(se),a=e(a,se.frames[se.getFrameCount()-1])}}}var fe=t.bones;for(var ge in fe)if(fe.hasOwnProperty(ge)){var T=te.findBoneIndex(ge);if(-1==T)throw"Bone not found: "+ge;var b=fe[ge];for(var oe in b)if(b.hasOwnProperty(oe)){var ie=b[oe];if("rotate"==oe){var se=new ee.RotateTimeline(ie.length);se.boneIndex=T;for(var le=0,de=0,ue=ie.length,pe;ue>de;de++)pe=ie[de],se.setFrame(le,pe.time,pe.angle),this.readCurve(se,le,pe),le++;n.push(se),a=e(a,se.frames[2*se.getFrameCount()-2])}else if("translate"==oe||"scale"==oe){var C=1,se;"scale"==oe?se=new ee.ScaleTimeline(ie.length):(se=new ee.TranslateTimeline(ie.length),C=this.scale),se.boneIndex=T;for(var le=0,de=0,ue=ie.length;ue>de;de++){var pe=ie[de],me=(pe.x||0)*C,ye=(pe.y||0)*C;se.setFrame(le,pe.time,me,ye),this.readCurve(se,le,pe),le++}n.push(se),a=e(a,se.frames[3*se.getFrameCount()-3])}else{if("flipX"!=oe&&"flipY"!=oe)throw"Invalid timeline type for a bone: "+oe+" ("+ge+")";var me="flipX"==oe,se=me?new ee.FlipXTimeline(ie.length):new ee.FlipYTimeline(ie.length);se.boneIndex=T;for(var D=me?"x":"y",le=0,de=0,ue=ie.length,pe;ue>de;de++)pe=ie[de],se.setFrame(le,pe.time,pe[D]||!1),le++;n.push(se),a=e(a,se.frames[2*se.getFrameCount()-2])}}}var U=t.ik;for(var X in U)if(U.hasOwnProperty(X)){var O=te.findIkConstraint(X),ie=U[X],se=new ee.IkConstraintTimeline(ie.length);se.ikConstraintIndex=te.ikConstraints.indexOf(O);for(var le=0,de=0,ue=ie.length;ue>de;de++){var pe=ie[de],P=pe.hasOwnProperty("mix")?pe.mix:1,M=!pe.hasOwnProperty("bendPositive")||pe.bendPositive?1:-1;se.setFrame(le,pe.time,P,M),this.readCurve(se,le,pe),le++}n.push(se),a=e(a,se.frames[3*se.getFrameCount()-3])}var F=t.ffd;for(var Y in F){var R=te.findSkin(Y),ne=F[Y];for(o in ne){var ae=te.findSlotIndex(o),E=ne[o];for(var B in E){var ie=E[B],se=new ee.FfdTimeline(ie.length),V=R.getAttachment(ae,B);if(!V)throw"FFD attachment not found: "+B;se.slotIndex=ae,se.attachment=V;var L=V.type==ee.AttachmentType.mesh,W;W=L?V.vertices.length:2*(V.weights.length/3);for(var le=0,de=0,ue=ie.length;ue>de;de++){var pe=ie[de],_e;if(pe.vertices){var xe=pe.vertices;_e=[];for(var j=0;W>j;++j)_e.push(0);var be=pe.offset||0,K=xe.length;if(1==this.scale)for(var Te=0;K>Te;Te++)_e[Te+be]=xe[Te];else for(var Te=0;K>Te;Te++)_e[Te+be]=xe[Te]*this.scale;if(L)for(var ve=V.vertices,Te=0,K=_e.length;K>Te;Te++)_e[Te]+=ve[Te]}else if(L)_e=V.vertices;else{_e=[];for(var j=0;W>j;++j)_e.push(0)}se.setFrame(le,pe.time,_e),this.readCurve(se,le,pe),le++}n[n.length]=se,a=e(a,se.frames[se.getFrameCount()-1])}}}var z=t.drawOrder;if(z||(z=t.draworder),z){for(var se=new ee.DrawOrderTimeline(z.length),Se=te.slots.length,le=0,de=0,ue=z.length;ue>de;de++){var $=z[de],Q=null;if($.offsets){Q=[],Q.length=Se;for(var Te=Se-1;0<=Te;Te--)Q[Te]=-1;var Ee=$.offsets,Ce=[];Ce.length=Se-Ee.length;for(var Pe=0,Ae=0,Te=0,K=Ee.length;K>Te;Te++){var Me=Ee[Te],ae=te.findSlotIndex(Me.slot);if(-1==ae)throw"Slot not found: "+Me.slot;for(;Pe!=ae;)Ce[Ae++]=Pe++;Q[Pe+Me.offset]=Pe++}for(;Se>Pe;)Ce[Ae++]=Pe++;for(var Te=Se-1;0<=Te;Te--)-1==Q[Te]&&(Q[Te]=Ce[--Ae])}se.setFrame(le++,$.time,Q)}n.push(se),a=e(a,se.frames[se.getFrameCount()-1])}var Re=t.events;if(Re){for(var se=new ee.EventTimeline(Re.length),le=0,de=0,ue=Re.length;ue>de;de++){var Oe=Re[de],Ie=te.findEvent(Oe.name);if(!Ie)throw"Event not found: "+Oe.name;var De=new ee.Event(Ie);De.intValue=Oe.hasOwnProperty("int")?Oe.int:Ie.intValue,De.floatValue=Oe.hasOwnProperty("float")?Oe.float:Ie.floatValue,De.stringValue=Oe.hasOwnProperty("string")?Oe.string:Ie.stringValue,se.setFrame(le++,Oe.time,De)}n.push(se),a=e(a,se.frames[se.getFrameCount()-1])}te.animations.push(new ee.Animation(i,n,a))},readCurve:function(r,t,e){var n=e.curve;n?"stepped"==n?r.curves.setStepped(t):n instanceof Array&&r.curves.setCurve(t,n[0],n[1],n[2],n[3]):r.curves.setLinear(t)},toColor:function(r,t){if(8!=r.length)throw"Color hexidecimal length must be 8, recieved: "+r;return parseInt(r.substring(2*t,2*t+2),16)/255},getFloatArray:function(i,t,e){var n=i[t],a=new ee.Float32Array(n.length),r=0,l=n.length;if(1==e)for(;l>r;r++)a[r]=n[r];else for(;l>r;r++)a[r]=n[r]*e;return a},getIntArray:function(i,t){for(var e=i[t],n=new ee.Uint16Array(e.length),a=0,s=e.length;s>a;a++)n[a]=0|e[a];return n}},t.exports=ee.SkeletonJsonParser},{"../SpineUtil":42,"./Animation":2,"./AttachmentTimeline":10,"./AttachmentType":11,"./BoneData":13,"./ColorTimeline":15,"./DrawOrderTimeline":17,"./Event":18,"./EventData":19,"./EventTimeline":20,"./FfdTimeline":21,"./FlipXTimeline":22,"./FlipYTimeline":23,"./IkConstraintData":25,"./IkConstraintTimeline":26,"./RotateTimeline":29,"./ScaleTimeline":30,"./SkeletonData":33,"./Skin":35,"./SlotData":38,"./TranslateTimeline":40}],35:[function(r,t){var e=r("../SpineUtil");e.Skin=function(e){this.name=e,this.attachments={}},e.Skin.prototype={addAttachment:function(r,t,e){this.attachments[r+":"+t]=e},getAttachment:function(r,t){return this.attachments[r+":"+t]},_attachAll:function(l,t){for(var e in t.attachments){var n=e.indexOf(":"),i=parseInt(e.substring(0,n)),a=e.substring(n+1),r=l.slots[i];if(r.attachment&&r.attachment.name==a){var o=this.getAttachment(i,a);o&&r.setAttachment(o)}}}},t.exports=e.Skin},{"../SpineUtil":42}],36:[function(r,t){var e=r("../SpineUtil")||{};e.AttachmentType=r("./AttachmentType"),e.SkinnedMeshAttachment=function(e){this.name=e},e.SkinnedMeshAttachment.prototype={type:e.AttachmentType.skinnedmesh,bones:null,weights:null,uvs:null,regionUVs:null,triangles:null,hullLength:0,r:1,g:1,b:1,a:1,path:null,rendererObject:null,regionU:0,regionV:0,regionU2:0,regionV2:0,regionRotate:!1,regionOffsetX:0,regionOffsetY:0,regionWidth:0,regionHeight:0,regionOriginalWidth:0,regionOriginalHeight:0,edges:null,width:0,height:0,updateUVs:function(){var t=this.regionU2-this.regionU,r=this.regionV2-this.regionV,n=this.regionUVs.length;if(this.uvs&&this.uvs.length==n||(this.uvs=new e.Float32Array(n)),this.regionRotate)for(var a=0;n>a;a+=2)this.uvs[a]=this.regionU+this.regionUVs[a+1]*t,this.uvs[a+1]=this.regionV+r-this.regionUVs[a]*r;else for(var a=0;n>a;a+=2)this.uvs[a]=this.regionU+this.regionUVs[a]*t,this.uvs[a+1]=this.regionV+this.regionUVs[a+1]*r},computeWorldVertices:function(_,t,e,n){var i=e.bone.skeleton.bones,u=this.weights,f=this.bones,c=0,b=0,T=0,E=0,C=f.length,P,A,M,R,O,I,D;if(e.attachmentVertices.length)for(var L=e.attachmentVertices;C>b;c+=2){for(A=0,M=0,P=f[b++]+b;P>b;b++,T+=3,E+=2)R=i[f[b]],O=u[T]+L[E],I=u[T+1]+L[E+1],D=u[T+2],A+=(O*R.m00+I*R.m01+R.worldX)*D,M+=(O*R.m10+I*R.m11+R.worldY)*D;n[c]=A+_,n[c+1]=M+t}else for(;C>b;c+=2){for(A=0,M=0,P=f[b++]+b;P>b;b++,T+=3)R=i[f[b]],O=u[T],I=u[T+1],D=u[T+2],A+=(O*R.m00+I*R.m01+R.worldX)*D,M+=(O*R.m10+I*R.m11+R.worldY)*D;n[c]=A+_,n[c+1]=M+t}}},t.exports=e.SkinnedMeshAttachment},{"../SpineUtil":42,"./AttachmentType":11}],37:[function(r,t){var e=r("../SpineUtil");e.Slot=function(r,t){this.data=r,this.bone=t,this.setToSetupPose()},e.Slot.prototype={r:1,g:1,b:1,a:1,_attachmentTime:0,attachment:null,attachmentVertices:[],setAttachment:function(e){this.attachment=e,this._attachmentTime=this.bone.skeleton.time,this.attachmentVertices.length=0},setAttachmentTime:function(e){this._attachmentTime=this.bone.skeleton.time-e},getAttachmentTime:function(){return this.bone.skeleton.time-this._attachmentTime},setToSetupPose:function(){var r=this.data;this.r=r.r,this.g=r.g,this.b=r.b,this.a=r.a,this.blendMode=r.blendMode;for(var t=this.bone.skeleton.data.slots,e=0,a=t.length;a>e;e++)if(t[e]==r){this.setAttachment(r.attachmentName?this.bone.skeleton.getAttachmentBySlotIndex(e,r.attachmentName):null);break}}},t.exports=e.Slot},{"../SpineUtil":42}],38:[function(r,t){var e=r("../SpineUtil");e.SlotData=function(r,t){this.name=r,this.boneData=t},e.SlotData.PIXI_BLEND_MODE_MAP={multiply:PIXI.BLEND_MODES.MULTIPLY,screen:PIXI.BLEND_MODES.SCREEN,additive:PIXI.BLEND_MODES.ADD,normal:PIXI.BLEND_MODES.NORMAL},e.SlotData.prototype={r:1,g:1,b:1,a:1,attachmentName:null,blendMode:PIXI.BLEND_MODES.NORMAL},t.exports=e.SlotData},{"../SpineUtil":42}],39:[function(r,t){var e=r("../SpineUtil");e.TrackEntry=function(){},e.TrackEntry.prototype={next:null,previous:null,animation:null,loop:!1,delay:0,time:0,lastTime:-1,endTime:0,timeScale:1,mixTime:0,mixDuration:0,mix:1,onStart:null,onEnd:null,onComplete:null,onEvent:null},t.exports=e.TrackEntry},{"../SpineUtil":42}],40:[function(r,t){var e=r("../SpineUtil");e.Animation=r("./Animation"),e.Curves=r("./Curves"),e.TranslateTimeline=function(r){this.curves=new e.Curves(r),this.frames=[],this.frames.length=3*r},e.TranslateTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/3},setFrame:function(r,a,e,n){r*=3,this.frames[r]=a,this.frames[r+1]=e,this.frames[r+2]=n},apply:function(i,t,d,n,a){var r=this.frames;if(!(d<r[0])){var o=i.bones[this.boneIndex];if(d>=r[r.length-3])return o.x+=(o.data.x+r[r.length-2]-o.x)*a,void(o.y+=(o.data.y+r[r.length-1]-o.y)*a);var s=e.Animation.binarySearch(r,d,3),l=r[s-2],p=r[s-1],c=r[s],u=1-(d-c)/(r[s+-3]-c);u=this.curves.getCurvePercent(s/3-1,u),o.x+=(o.data.x+l+(r[s+1]-l)*u-o.x)*a,o.y+=(o.data.y+p+(r[s+2]-p)*u-o.y)*a}}},t.exports=e.TranslateTimeline},{"../SpineUtil":42,"./Animation":2,"./Curves":16}],41:[function(r,t){var e=r("../SpineUtil");e.Animation=r("./Animation"),e.AnimationStateData=r("./AnimationStateData"),e.AnimationState=r("./AnimationState"),e.AtlasAttachmentParser=r("./AtlasAttachmentParser"),e.Atlas=r("./Atlas"),e.AtlasPage=r("./AtlasPage"),e.AtlasReader=r("./AtlasReader"),e.AtlasRegion=r("./AtlasRegion"),e.AttachmentTimeline=r("./AttachmentTimeline"),e.AttachmentType=r("./AttachmentType"),e.BoneData=r("./BoneData"),e.Bone=r("./Bone"),e.BoundingBoxAttachment=r("./BoundingBoxAttachment"),e.ColorTimeline=r("./ColorTimeline"),e.Curves=r("./Curves"),e.DrawOrderTimeline=r("./DrawOrderTimeline"),e.EventData=r("./EventData"),e.Event=r("./Event"),e.EventTimeline=r("./EventTimeline"),e.FfdTimeline=r("./FfdTimeline"),e.FlipXTimeline=r("./FlipXTimeline"),e.FlipYTimeline=r("./FlipYTimeline"),e.IkConstraintData=r("./IkConstraintData"),e.IkConstraint=r("./IkConstraint"),e.IkConstraintTimeline=r("./IkConstraintTimeline"),e.MeshAttachment=r("./MeshAttachment"),e.RegionAttachment=r("./RegionAttachment"),e.RotateTimeline=r("./RotateTimeline"),e.ScaleTimeline=r("./ScaleTimeline"),e.SkeletonBounds=r("./SkeletonBounds"),e.SkeletonData=r("./SkeletonData"),e.Skeleton=r("./Skeleton"),e.SkeletonJsonParser=r("./SkeletonJsonParser"),e.Skin=r("./Skin.js"),e.SkinnedMeshAttachment=r("./SkinnedMeshAttachment"),e.SlotData=r("./SlotData"),e.Slot=r("./Slot"),e.TrackEntry=r("./TrackEntry"),e.TranslateTimeline=r("./TranslateTimeline"),t.exports=e},{"../SpineUtil":42,"./Animation":2,"./AnimationState":3,"./AnimationStateData":4,"./Atlas":5,"./AtlasAttachmentParser":6,"./AtlasPage":7,"./AtlasReader":8,"./AtlasRegion":9,"./AttachmentTimeline":10,"./AttachmentType":11,"./Bone":12,"./BoneData":13,"./BoundingBoxAttachment":14,"./ColorTimeline":15,"./Curves":16,"./DrawOrderTimeline":17,"./Event":18,"./EventData":19,"./EventTimeline":20,"./FfdTimeline":21,"./FlipXTimeline":22,"./FlipYTimeline":23,"./IkConstraint":24,"./IkConstraintData":25,"./IkConstraintTimeline":26,"./MeshAttachment":27,"./RegionAttachment":28,"./RotateTimeline":29,"./ScaleTimeline":30,"./Skeleton":31,"./SkeletonBounds":32,"./SkeletonData":33,"./SkeletonJsonParser":34,"./Skin.js":35,"./SkinnedMeshAttachment":36,"./Slot":37,"./SlotData":38,"./TrackEntry":39,"./TranslateTimeline":40}],42:[function(r,t){var e=Math.PI;t.exports={radDeg:180/e,degRad:e/180,temp:[],Float32Array:"undefined"==typeof Float32Array?Array:Float32Array,Uint16Array:"undefined"==typeof Uint16Array?Array:Uint16Array}},{}],43:[function(n,t){function o(a){if(PIXI.Container.call(this),!a)throw new Error("The spineData param is required.");if("string"==typeof a)throw new Error("spineData param cant be string. Please use PIXI.spine.Spine.fromAtlas(\"YOUR_RESOURCE_NAME\") from now on.");this.spineData=a,this.skeleton=new d.Skeleton(a),this.skeleton.updateWorldTransform(),this.stateData=new d.AnimationStateData(a),this.state=new d.AnimationState(this.stateData),this.slotContainers=[];for(var t=0,u=this.skeleton.slots.length;u>t;t++){var n=this.skeleton.slots[t],i=n.attachment,r=new PIXI.Container;if(this.slotContainers.push(r),this.addChild(r),i instanceof d.RegionAttachment){var o=i.rendererObject.name,s=this.createSprite(n,i);n.currentSprite=s,n.currentSpriteName=o,r.addChild(s)}else{if(!(i instanceof d.MeshAttachment))continue;var l=this.createMesh(n,i);n.currentMesh=l,n.currentMeshName=i.name,r.addChild(l)}}this.autoUpdate=!0}var d=n("../SpineRuntime"),a=n("../loaders/atlasParser");d.Bone.yDown=!0,o.fromAtlas=function(r){var t=a.AnimCache[r];if(!t)throw new Error("Spine data \""+r+"\" does not exist in the animation cache");return new o(t)},o.prototype=Object.create(PIXI.Container.prototype),o.prototype.constructor=o,t.exports=o,o.globalAutoUpdate=!0,Object.defineProperties(o.prototype,{autoUpdate:{get:function(){return this.updateTransform===o.prototype.autoUpdateTransform},set:function(e){this.updateTransform=e?o.prototype.autoUpdateTransform:PIXI.Container.prototype.updateTransform}}}),o.prototype.update=function(a){this.state.update(a),this.state.apply(this.skeleton),this.skeleton.updateWorldTransform();for(var t=this.skeleton.drawOrder,e=this.skeleton.slots,n=0,g=t.length;g>n;n++)this.children[n]=this.slotContainers[t[n]];for(n=0,g=e.length;g>n;n++){var _=e[n],o=_.attachment,s=this.slotContainers[n];if(o){var l=o.type;_&&"undefined"==typeof _.oldAttType&&(_.oldAttType=l);var b=l!==_.oldAttType;if(b)if(_.oldAttType=l,l===d.AttachmentType.region){if(_.meshes)for(x in _.meshes)_.meshes[x].visible=!1;_.sprites&&_.sprites[o.rendererObject.name]&&(_.sprites[o.rendererObject.name].visible=!0)}else{if(s.position.x=0,s.position.y=0,s.scale.x=1,s.scale.y=1,s.rotation=0,_.sprites)for(x in _.sprites)_.sprites[x].visible=!1;_.meshes&&_.meshes[o.name]&&(_.meshes[o.name].visible=!0)}if(l===d.AttachmentType.region){if(o.rendererObject&&(!_.currentSpriteName||_.currentSpriteName!==o.rendererObject.name)){var T=o.rendererObject.name;if(void 0!==_.currentSprite&&(_.currentSprite.visible=!1),_.sprites=_.sprites||{},void 0!==_.sprites[T])_.sprites[T].visible=!0;else{var m=this.createSprite(_,o);s.addChild(m)}_.currentSprite=_.sprites[T],_.currentSpriteName=T}var u=_.bone;s.position.x=u.worldX+o.x*u.m00+o.y*u.m01,s.position.y=u.worldY+o.x*u.m10+o.y*u.m11,s.scale.x=u.worldScaleX,s.scale.y=u.worldScaleY,s.rotation=-(_.bone.worldRotation*d.degRad),u.worldFlipX&&(s.scale.x=-s.scale.x,s.rotation=-s.rotation),u.worldFlipY==d.Bone.yDown&&(s.scale.y=-s.scale.y,s.rotation=-s.rotation),_.currentSprite.blendMode=_.blendMode,_.currentSprite.tint=PIXI.utils.rgb2hex([_.r,_.g,_.b])}else{if(l!==d.AttachmentType.skinnedmesh&&l!==d.AttachmentType.mesh){s.visible=!1;continue}if(!_.currentMeshName||_.currentMeshName!==o.name){var f=o.name;if(void 0!==_.currentMesh&&(_.currentMesh.visible=!1),_.meshes=_.meshes||{},void 0!==_.meshes[f])_.meshes[f].visible=!0;else{var c=this.createMesh(_,o);s.addChild(c)}_.currentMesh=_.meshes[f],_.currentMeshName=f}o.computeWorldVertices(_.bone.skeleton.x,_.bone.skeleton.y,_,_.currentMesh.vertices)}s.visible=!0,s.alpha=_.a}else s.visible=!1}},o.prototype.autoUpdateTransform=function(){if(o.globalAutoUpdate){this.lastTime=this.lastTime||Date.now();var e=.001*(Date.now()-this.lastTime);this.lastTime=Date.now(),this.update(e)}else this.lastTime=0;PIXI.Container.prototype.updateTransform.call(this)},o.prototype.createSprite=function(a,t){var e=t.rendererObject,n=e.page.rendererObject,i=new PIXI.Rectangle(e.x,e.y,e.rotate?e.height:e.width,e.rotate?e.width:e.height),r=new PIXI.Texture(n,i),o=new PIXI.Sprite(r),s=e.rotate?.5*Math.PI:0;return o.scale.x=t.width/e.originalWidth*t.scaleX,o.scale.y=t.height/e.originalHeight*t.scaleY,o.rotation=s-t.rotation*d.degRad,o.anchor.x=(.5*e.originalWidth-e.offsetX)/e.width,o.anchor.y=1-(.5*e.originalHeight-e.offsetY)/e.height,o.alpha=t.a,a.sprites=a.sprites||{},a.sprites[e.name]=o,o},o.prototype.createMesh=function(o,t){var e=t.rendererObject,n=e.page.rendererObject,i=new PIXI.Texture(n),a=new PIXI.mesh.Mesh(i,new Float32Array(t.uvs.length),new Float32Array(t.uvs),new Uint16Array(t.triangles),PIXI.mesh.Mesh.DRAW_MODES.TRIANGLES);return a.canvasPadding=1.5,a.alpha=t.a,o.meshes=o.meshes||{},o.meshes[t.name]=a,a}},{"../SpineRuntime":41,"../loaders/atlasParser":45}],44:[function(e){var t=e("./atlasParser");PIXI.loaders.Loader.addPixiMiddleware(t),PIXI.loader.use(t())},{"./atlasParser":45}],45:[function(n,t){var d=PIXI.loaders.Resource,s=n("../SpineRuntime"),a=n("./imageLoaderAdapter"),l=t.exports=function(){return function(o,t){if(!o.data||1!==o.type||!o.data.bones)return t();var e=o.url.substr(0,o.url.lastIndexOf("."))+".atlas",r={crossOrigin:o.crossOrigin,xhrType:d.XHR_RESPONSE_TYPE.TEXT,metadata:o.metadata.spineMetadata},n={crossOrigin:o.crossOrigin,metadata:o.metadata.imageMetadata},i=o.url.substr(0,o.url.lastIndexOf("/")+1),u=a(this,o.name+"_atlas_page_",i,n);this.add(o.name+"_atlas",e,r,function(){new s.Atlas(this.xhr.responseText,u,function(e){var n=new s.SkeletonJsonParser(new s.AtlasAttachmentParser(e)),a=n.readSkeletonData(o.data);o.spineData=a,o.spineAtlas=e,l.enableCaching&&(l.AnimCache[o.name]=o.spineData),t()})})}};l.AnimCache={},l.enableCaching=!0},{"../SpineRuntime":41,"./imageLoaderAdapter":46}],46:[function(r,t){r("../SpineRuntime"),t.exports=function(o,t,e,l){return e&&e.lastIndexOf("/")!==e.length-1&&(e+="/"),function(n,a){var r=e+n;o.add(t+n,r,l,function(e){a(e.texture.baseTexture)})}}},{"../SpineRuntime":41}],47:[function(r,t){t.exports={atlasParser:r("./atlasParser"),Loader:r("./Loader"),syncImageLoaderAdapter:r("./syncImageLoaderAdapter"),imageLoaderAdapter:r("./imageLoaderAdapter")}},{"./Loader":44,"./atlasParser":45,"./imageLoaderAdapter":46,"./syncImageLoaderAdapter":48}],48:[function(r,t){r("../SpineRuntime"),t.exports=function(r,a){return r&&r.lastIndexOf("/")!==r.length-1&&(r+="/"),function(e,t){t(PIXI.BaseTexture.fromImage(e,a))}}},{"../SpineRuntime":41}]},{},[1]),(async()=>{var t=Math.floor,r=String.fromCharCode;function e(e){let a={bones:[],skeleton:{},skins:{},skinsName:[]},o=0;const s=["normal","additive","multiply","screen"],l=["region","boundingbox","mesh","skinnedmesh"],d=()=>{if(o<e.length)return e[o++];throw"error: Incomplete skel"},u=()=>0!==d(),p=()=>d()<<8|d(),c=e=>{if("undefined"==typeof e)return d()<<24|d()<<16|d()<<8|d();var t=d(),r=127&t;return 0!=(128&t)&&(t=d(),r|=(127&t)<<7,0!=(128&t)&&(t=d(),r|=(127&t)<<14,0!=(128&t)&&(t=d(),r|=(127&t)<<21,0!=(128&t)&&(t=d(),r|=(127&t)<<28)))),e?r:r>>1^-(1&r)},f=e=>{var t=2147483648&e?-1:1,r=(255&e>>23)-127,n=e&8388607;if(128===r)return t*(n?Number.NaN:Number.POSITIVE_INFINITY);if(-127===r){if(0===n)return 0;r=-126,n/=4194304}else n=(8388608|n)/8388608;return t*n*Math.pow(2,r)},g=()=>f((d()<<24)+(d()<<16)+(d()<<8)+(d()<<0)),m=()=>{let e=c(!0),t=Array(e),r;if(1===scale)for(r=0;r<e;r++)t[r]=g();else for(r=0;r<e;r++)t[r]=g()*scale;return t},_=()=>{const e=c(!0),t=Array(e);for(let r=0;r<e;r++)t[r]=p();return t},b=()=>{for(var e=c(!0),t=Array(e),r=0;r<e;r++)t[r]=c(!0);return t},T=()=>{var e=d().toString(16);return 2===e.length?e:"0"+e},v=()=>T()+T()+T()+T(),S=(e,t,n)=>{for(;;){switch(n>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:chars+=r(n);break;case 12:case 13:chars+=r((31&n)<<6|63&d());break;case 14:chars+=r((15&n)<<12|(63&d())<<6|63&d());}if(++t>=e)break;n=255&d()}},E=()=>{let e=c(this,!0);switch(e){case 0:return null;case 1:return"";}e--,chars="";let t=0,n=0;for(;n<e&&(t=d(),!(127<t));)chars+=r(t),n++;return n<e&&S(e,n,t),chars},C=(e,r)=>{var n=E();switch(null==n&&(n=e),l[d()]){case"region":var a=E();null==a&&(a=n);var o={};return o.type="region",o.name=n,o.path=a,o.x=g()*scale,o.y=g()*scale,o.scaleX=g(),o.scaleY=g(),o.rotation=g(),o.width=g()*scale,o.height=g()*scale,o.color=v(),o;case"boundingbox":var s={};return s.type="boundingbox",s.name=n,s.vertices=m(),s;case"mesh":var a=E();null==a&&(a=n);var u={};return u.type="mesh",u.name=n,u.path=a,u.uvs=m(),u.triangles=_(),u.vertices=m(),u.color=v(),u.hull=c(!0),r&&(u.edges=b(),u.width=g(),u.height=g()),u;case"skinnedmesh":var a=E();null==a&&(a=n);var p={};p.type="skinnedmesh",p.name=n,p.path=a,p.uvs=m(),p.triangles=_(),p.vertices=[];for(var f=c(!0),T=0,S;T<f;){S=t(g()),p.vertices[T++]=S;for(var C=T+4*S;T<C;T+=4)p.vertices[T]=t(g()),p.vertices[T+1]=g(),p.vertices[T+2]=g(),p.vertices[T+3]=g()}return p.color=v(),p.hull=c(!0),r&&(p.edges=b(),p.width=g(),p.height=g()),p;}return null},P=(e,t)=>{var r=c(!0);if(0==r)return null;for(var o={},s=0;s<r;s++){for(var l=c(!0),d={},u=0,p=c(!0),n;u<p;u++)n=E(),d[n]=C(n,t);o[a.slots[l].name]=d}return o},A=(e,t)=>{switch(d()){case 1:t[e].curve="stepped";break;case 2:var r=g(),n=g(),a=g(),o=g();t[e].curve=[r,n,a,o];}},M=t=>{for(var r={},o=o,s={},l=0,p=c(!0);l<p;l++){for(var f=c(!0),m={},_=c(!0),b=0;b<_;b++){var T=d(),S=c(!0);switch(T){case 4:for(var C=Array(S),P=0;P<S;P++){var M=g(),R=v();if(C[P]={},C[P].time=M,C[P].color=R,P<S-1)A(P,C)}m.color=C;break;case 3:for(var C=Array(S),P=0;P<S;P++){var M=g(),O=E();C[P]={},C[P].time=M,C[P].name=O}m.attachment=C;}}s[a.slots[f].name]=m}r.slots=s;for(var I={},l=0,p=c(!0);l<p;l++){for(var D=c(!0),L={},b=0,k=c(!0);b<k;b++){var T=d(),S=c(!0);switch(T){case 1:for(var C=Array(S),P=0;P<S;P++){var B=g(),N=g();C[P]={},C[P].time=B,C[P].angle=N,P<S-1&&A(P,C)}L.rotate=C;break;case 2:case 0:var C=Array(S),F=1;2==T&&(F=o);for(var P=0;P<S;P++){var B=g(),U=g(),X=g();C[P]={},C[P].time=B,C[P].x=U,C[P].y=X,P<S-1&&A(P,C)}0==T?L.scale=C:L.translate=C;break;case 5:case 6:for(var C=Array(S),P=0;P<S;P++){var B=g(),W=u();C[P]={},C[P].time=B,5==T?C[P].x=W:C[P].y=W}5==T?L.flipX=C:L.flipY=C;}}I[a.bones[D].name]=L}r.bones=I;for(var G={},l=0,p=c(!0);l<p;l++){for(var Y=c(!0),S=c(!0),C=Array(S),P=0;P<S;P++){var M=g(),V=g(),H=u();C[P].time=M,C[P].mix=V,C[P].bendPositive=H,P<S-1&&A(P,C)}G[a.ik[Y]]=C}r.ik=G;for(var j={},l=0,p=c(!0);l<p;l++){for(var z=c(!0),m={},b=0,k=c(!0);b<k;b++){for(var f=c(!0),q={},K=0,Z=c(!0);K<Z;K++){var J=E(),S=c(!0),Q=a.skins[a.skinsName[z]][a.slots[f].name],$;for(var O in Q)Q[O].name==J&&($=Q[O]);$||console.log("FFD attachment not found: "+J);for(var C=Array(S),P=0;P<S;P++){var M=g(),ee;ee="mesh"==$.type?$.vertices.length:3*(3*$.uvs.length);for(var te=Array(ee),re=0;re<ee;re++)te[re]=0;var ne=.1,ae=c(!0);if(!(0==ae)){var oe=c(!0);ae+=oe;for(var ie=oe;ie<ae;ie++)te[ie]=g()*o;if("mesh"==$.type)for(var se=$.vertices,ie=0,le=te.length;ie<le;ie++)te[ie]+=se[ie]*ne}else if("mesh"==$.type)for(var re=0;re<ee;re++)te[re]+=$.vertices[re]*ne;C[P]={},C[P].time=M,C[P].vertices=te,P<S-1&&A(P,C)}q[J]=C}m[a.slots[f].name]=q}j[a.skinsName[z]]=m}r.ffd=j;var de=c(!0);if(0<de){for(var ue=Array(de),pe=a.slots.length,l=0;l<de;l++){for(var ce={},he=c(!0),fe=Array(he),b=0;b<he;b++){var ge={},f=c(!0);ge.slot=a.slots[f].name;var me=c(!0);ge.offset=me,fe[b]=ge}ce.offsets=fe;var B=g();ce.time=B,ue[l]=ce}r.drawOrder=ue}var ye=c(!0);if(0<ye){for(var _e=Array(ye),l=0;l<ye;l++){var M=g(),t=a.eventsName[c(!0)],xe=a.events[t],be={};be.name=t,be.int=c(!0),be.float=g(),be.string=u()?E():xe.string,be.time=M,_e[l]=be}r.events=_e}return r};let R;const O=a.skeleton;O.hash=E(),O.spine=E(),O.width=g(),O.height=g();const I=u();I&&(O.imagesPath=E());const D=a.bones;for(R=c(!0);0<R;R--){var L={name:E(),parent:null},k=c(!0)-1;-1!==k&&(L.parent=D[k].name),L.x=g()*scale,L.y=g()*scale,L.scaleX=g(),L.scaleY=g(),L.rotation=g(),L.length=g()*scale,L.flipX=u(),L.flipY=u(),L.inheritScale=u(),L.inheritRotation=u(),I&&(L.color=v()),D.push(L)}const B=c(!0);if(0<B){a.ik=Array(c(!0));const e=a.ik;for(R=0;R<B;R++){for(var N={name:E(),bones:Array(c(!0))},F=0;F<N.bones.length;F++)N.bones[F]=a.bones[c(!0)].name;N.target=a.bones[c(!0)].name,N.mix=g(),N.bendPositive=u(),e[R]=N}}a.slots=Array(c(!0));const U=a.slots;for(R=0;R<U.length;R++){const e={};e.name=E(),e.bone=a.bones[c(!0)].name,e.color=v(),e.attachment=E(),e.blend=s[c(!0)],U[R]=e}const X=a.skins,W=P("default",I);null!=W&&(X["default"]=W,a.skinsName.push("default")),R=0;let G=c(!0);for(;R<G;R++){const e=E();X[e]=P(e,I),a.skinsName.push("skinName")}a.events=[],a.eventsName=[];var Y=a.events;for(R=0,G=c(!0);R<G;R++){var V=E(),H={};H.int=c(!1),H.float=g(),H.string=E(),Y[V]=H,a.eventsName[R]=V}a.animations={};var z=a.animations;for(R=0,G=c(!0);R<G;R++){var q=E();z[q]=M(q)}return a}let n=fetch(`/media/TDoll/${tdollId}_chibi_dorm_skel.skel`).then(e=>e.arrayBuffer()).then(t=>e(new Uint8Array(t))),a=fetch(`/media/TDoll/${tdollId}_chibi_dorm_atlas.txt`).then(e=>e.text()),o=new Promise(e=>{let t=document.createElement("img");t.onload=()=>{e(new PIXI.BaseTexture(t))},t.src=`/media/TDoll/${tdollId}_chibi_dorm_spritemap.webp`}),i=PIXI.spine.SpineRuntime,s=new PIXI.Container,l=PIXI.autoDetectRenderer(w,h,{transparent:!0,preserveDrawingBuffer:!0}),d=async()=>{window.requestAnimationFrame(d),l.render(s)},u=l.view,p;(e=>document.querySelector(e))("body").append(u),u.id="TDoll",u.style.opacity=0,l.view.ondrag=t=>{console.log(t)},l.view.draggable=!0,await Promise.all([n,a,o]),p=new PIXI.spine.Spine(new i.SkeletonJsonParser(new i.AtlasAttachmentParser(new i.Atlas(await a,async(e,t)=>t(await o)))).readSkeletonData(await n,tdollId));let c={};for(let e of p.spineData.animations)c[e.name]=e;p.position.set(x,y),p.scale.set(scale),p.state.setAnimationByName(0,"wait",!0),s.addChild(p),window.requestAnimationFrame(d),u.style.opacity=1})();